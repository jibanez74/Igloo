import{n as e,t}from"./mail-CHhIb2Nw.js";import{t as n}from"./snowflake-C19eAxuk.js";import{Mt as r,Ot as i,d as ee,en as a,it as o,kt as s,q as c}from"./index-B4Mm07st.js";import"./dist-DoMa5iEY.js";import{a as te,c as ne}from"./toast-helpers-N18T5b5Z.js";import{t as l}from"./button-DUpsrK_w.js";import"./dist-DRYwAtpY.js";import{t as u}from"./input-COadufZY.js";import{t as d}from"./label-oJjLCjTp.js";import{a as f,i as p,n as m,r as h,t as g}from"./card-oiowJjLi.js";var _=i(`eye-off`,[[`path`,{d:`M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49`,key:`ct8e1f`}],[`path`,{d:`M14.084 14.158a3 3 0 0 1-4.242-4.242`,key:`151rxh`}],[`path`,{d:`M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143`,key:`13bj9a`}],[`path`,{d:`m2 2 20 20`,key:`1ooewy`}]]),v=i(`eye`,[[`path`,{d:`M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0`,key:`1nclc0`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]]),y=i(`log-in`,[[`path`,{d:`m10 17 5-5-5-5`,key:`1bsop3`}],[`path`,{d:`M15 12H3`,key:`6jk70r`}],[`path`,{d:`M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4`,key:`u53s6r`}]]),b=s(),x=a(),re=`/assets/login-bg-Bfc_orN0.jpg`,S=r();const C=c(`/login/`)({component:w});function w(){let r=(0,b.c)(43),[i,a]=(0,x.useTransition)(),[s,c]=(0,x.useState)(!1),w=(0,x.useRef)(null),T=C.useNavigate(),{redirect:E}=C.useSearch(),{queryClient:D}=C.useRouteContext(),O,k;r[0]===Symbol.for(`react.memo_cache_sentinel`)?(O=()=>{let e=w.current;if(e){if(window.matchMedia(`(prefers-reduced-motion: reduce)`).matches){e.classList.remove(`opacity-0`,`translate-y-2`);return}requestAnimationFrame(()=>{e.classList.remove(`opacity-0`,`translate-y-2`)})}},k=[],r[0]=O,r[1]=k):(O=r[0],k=r[1]),(0,x.useEffect)(O,k);let A;r[2]!==T||r[3]!==D||r[4]!==E?(A=e=>{e.preventDefault(),a(async()=>{let t=new FormData(e.currentTarget),n=await o(t.get(`email`),t.get(`password`));n.error?te(`Login failed`,n.message||`An error occurred during login`):(ne(`Welcome back!`,n.message||`Login successful`),await D.fetchQuery(ee()),await D.invalidateQueries(),T({to:E,from:`/login`,replace:!0}))})},r[2]=T,r[3]=D,r[4]=E,r[5]=A):A=r[5];let j=A,M,N;r[6]===Symbol.for(`react.memo_cache_sentinel`)?(M=(0,S.jsx)(`title`,{children:`Sign In - Igloo`}),N=(0,S.jsx)(`meta`,{name:`description`,content:`Sign in to access your personal Igloo media library.`}),r[6]=M,r[7]=N):(M=r[6],N=r[7]);let P,F;r[8]===Symbol.for(`react.memo_cache_sentinel`)?(P=(0,S.jsx)(`div`,{className:`absolute inset-0 bg-cover bg-center bg-no-repeat`,style:{backgroundImage:`url(${re})`}}),F=(0,S.jsx)(`div`,{className:`absolute inset-0 bg-slate-950/70`}),r[8]=P,r[9]=F):(P=r[8],F=r[9]);let I;r[10]===Symbol.for(`react.memo_cache_sentinel`)?(I=(0,S.jsxs)(p,{className:`pb-2 text-center`,children:[(0,S.jsx)(`div`,{className:`mx-auto mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-slate-800`,children:(0,S.jsx)(n,{className:`size-5 text-amber-400`,"aria-hidden":`true`})}),(0,S.jsx)(f,{className:`text-2xl font-semibold tracking-tight text-slate-100`,children:`Welcome to Igloo`}),(0,S.jsx)(h,{className:`text-slate-400`,children:`Sign in to access your private media library.`})]}),r[10]=I):I=r[10];let L;r[11]===Symbol.for(`react.memo_cache_sentinel`)?(L=(0,S.jsx)(d,{htmlFor:`email`,children:`Email`}),r[11]=L):L=r[11];let R;r[12]===Symbol.for(`react.memo_cache_sentinel`)?(R=(0,S.jsx)(t,{className:`absolute top-1/2 left-3 z-10 size-4 -translate-y-1/2 text-slate-400`,"aria-hidden":`true`}),r[12]=R):R=r[12];let z;r[13]===i?z=r[14]:(z=(0,S.jsxs)(`div`,{className:`space-y-1`,children:[L,(0,S.jsxs)(`div`,{className:`relative`,children:[R,(0,S.jsx)(u,{autoFocus:!0,type:`email`,id:`email`,name:`email`,inputMode:`email`,autoComplete:`username`,required:!0,className:`pl-10`,disabled:i})]})]}),r[13]=i,r[14]=z);let B;r[15]===Symbol.for(`react.memo_cache_sentinel`)?(B=(0,S.jsx)(d,{htmlFor:`password`,children:`Password`}),r[15]=B):B=r[15];let V;r[16]===Symbol.for(`react.memo_cache_sentinel`)?(V=(0,S.jsx)(e,{className:`absolute top-1/2 left-3 z-10 size-4 -translate-y-1/2 text-slate-400`,"aria-hidden":`true`}),r[16]=V):V=r[16];let H=s?`text`:`password`,U;r[17]!==i||r[18]!==H?(U=(0,S.jsx)(u,{type:H,minLength:9,maxLength:128,id:`password`,name:`password`,required:!0,className:`px-10`,disabled:i}),r[17]=i,r[18]=H,r[19]=U):U=r[19];let W=s?`Hide password`:`Show password`,G;r[20]===s?G=r[21]:(G=()=>c(!s),r[20]=s,r[21]=G);let K;r[22]===s?K=r[23]:(K=s?(0,S.jsx)(_,{className:`size-4`,"aria-hidden":`true`}):(0,S.jsx)(v,{className:`size-4`,"aria-hidden":`true`}),r[22]=s,r[23]=K);let q;r[24]!==i||r[25]!==W||r[26]!==G||r[27]!==K?(q=(0,S.jsx)(`button`,{type:`button`,className:`absolute top-1/2 right-2 -translate-y-1/2 rounded-md p-2
                               text-slate-400 hover:text-white focus:ring-2 focus:ring-amber-400 focus:outline-none`,"aria-label":W,onClick:G,disabled:i,children:K}),r[24]=i,r[25]=W,r[26]=G,r[27]=K,r[28]=q):q=r[28];let J;r[29]!==U||r[30]!==q?(J=(0,S.jsxs)(`div`,{className:`space-y-1`,children:[B,(0,S.jsxs)(`div`,{className:`relative`,children:[V,U,q]})]}),r[29]=U,r[30]=q,r[31]=J):J=r[31];let Y;r[32]===Symbol.for(`react.memo_cache_sentinel`)?(Y=(0,S.jsx)(y,{className:`size-4`,"aria-hidden":`true`}),r[32]=Y):Y=r[32];let X=i?`Signing in...`:`Sign in`,Z;r[33]===X?Z=r[34]:(Z=(0,S.jsx)(`span`,{children:X}),r[33]=X,r[34]=Z);let Q;r[35]!==i||r[36]!==Z?(Q=(0,S.jsx)(`div`,{className:`pt-2`,children:(0,S.jsxs)(l,{type:`submit`,variant:`accent`,className:`w-full`,disabled:i,children:[Y,Z]})}),r[35]=i,r[36]=Z,r[37]=Q):Q=r[37];let $;return r[38]!==j||r[39]!==z||r[40]!==J||r[41]!==Q?($=(0,S.jsxs)(`div`,{className:`h-full bg-slate-900 text-slate-100 antialiased`,children:[M,N,(0,S.jsxs)(`div`,{className:`relative min-h-screen`,children:[P,F,(0,S.jsx)(`main`,{className:`relative z-10 flex min-h-screen items-center justify-center px-4`,children:(0,S.jsxs)(g,{ref:w,className:`w-full max-w-md translate-y-2 border-slate-800 bg-slate-900/80 opacity-0
               shadow-xl backdrop-blur-sm transition-all duration-500 ease-out will-change-transform`,children:[I,(0,S.jsx)(m,{children:(0,S.jsxs)(`form`,{onSubmit:j,className:`space-y-4`,children:[z,J,Q]})})]})})]})]}),r[38]=j,r[39]=z,r[40]=J,r[41]=Q,r[42]=$):$=r[42],$}export{C as Route};