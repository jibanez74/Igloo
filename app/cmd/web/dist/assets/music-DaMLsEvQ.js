import{t as e}from"./useQuery-DYliyyeq.js";import{i as t,n,r,t as i}from"./PlaylistFormDialog-BwpFg17L.js";import"./dialog-BHOyGAmv.js";import{o as a,t as o}from"./TrackItem-D52HMG6c.js";import{t as s}from"./ellipsis-DakNDuIj.js";import{t as c}from"./music-DCJfo9yH.js";import{t as l}from"./plus-DrfurNsD.js";import{t as u}from"./shuffle-SybXheIC.js";import"./trash-2-CWBGQmm5.js";import{t as d}from"./user-wQOA0tR5.js";import{B as f,Dt as p,G as m,H as h,J as g,Mt as _,Ot as v,Q as y,Tt as b,U as x,V as S,W as C,a as w,en as T,g as E,gt as D,h as O,k,kt as A,t as j,tn as M,u as N,vt as P,w as F,x as ee,y as te,yt as I}from"./index-B4Mm07st.js";import"./dist-D9YK6Fjb.js";import"./dist-DoMa5iEY.js";import"./dist-DehwVPxN.js";import"./dist-m3SJwciI.js";import"./dist-BE3VF_ow.js";import{t as L}from"./toast-helpers-N18T5b5Z.js";import{n as ne}from"./button-DUpsrK_w.js";import"./dist-DRYwAtpY.js";import"./input-COadufZY.js";import{a as R,i as z,n as B,r as V}from"./nullable-DZsmEyNt.js";import{t as re}from"./AlbumCard-ikU3iddX.js";import{i as H,n as U,r as ie,t as ae}from"./tabs-BMmQOkPZ.js";import"./label-oJjLCjTp.js";var oe=v(`chevron-left`,[[`path`,{d:`m15 18-6-6 6-6`,key:`1wnfg3`}]]),se=v(`chevron-right`,[[`path`,{d:`m9 18 6-6-6-6`,key:`mthhwq`}]]),W=v(`users`,[[`path`,{d:`M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2`,key:`1yyitq`}],[`path`,{d:`M16 3.128a4 4 0 0 1 0 7.744`,key:`16gr8j`}],[`path`,{d:`M22 21v-2a4 4 0 0 0-3-3.87`,key:`kshegd`}],[`circle`,{cx:`9`,cy:`7`,r:`4`,key:`nufk8`}]]),G=M(T(),1),K=A(),q=_();function ce(e){let t=(0,K.c)(24),{musician:n}=e,{id:r,name:i,thumb:a,album_count:o,track_count:s}=n,c;t[0]===a?c=t[1]:(c=V(a),t[0]=a,t[1]=c);let l=c,u;t[2]===r?u=t[3]:(u=r.toString(),t[2]=r,t[3]=u);let f;t[4]===u?f=t[5]:(f={id:u},t[4]=u,t[5]=f);let p=`${i}, ${o} albums, ${s} tracks`,m;t[6]!==i||t[7]!==l?(m=(0,q.jsx)(`div`,{className:`relative mx-auto mb-3 aspect-square w-full max-w-32 overflow-hidden rounded-full bg-slate-800`,children:l?(0,q.jsx)(`img`,{src:l,alt:i,className:`size-full object-cover transition-transform duration-300 group-hover:scale-105`}):(0,q.jsx)(`div`,{className:`flex size-full items-center justify-center`,children:(0,q.jsx)(d,{className:`size-10 text-slate-600`,"aria-hidden":`true`})})}),t[6]=i,t[7]=l,t[8]=m):m=t[8];let h;t[9]===i?h=t[10]:(h=(0,q.jsx)(`h3`,{className:`truncate text-sm font-semibold text-white`,children:i}),t[9]=i,t[10]=h);let _=o===1?`album`:`albums`,v=s===1?`track`:`tracks`,y;t[11]!==o||t[12]!==_||t[13]!==v||t[14]!==s?(y=(0,q.jsxs)(`p`,{className:`mt-0.5 text-xs text-slate-400`,children:[o,` `,_,` ·`,` `,s,` `,v]}),t[11]=o,t[12]=_,t[13]=v,t[14]=s,t[15]=y):y=t[15];let b;t[16]!==h||t[17]!==y?(b=(0,q.jsxs)(`div`,{className:`text-center`,children:[h,y]}),t[16]=h,t[17]=y,t[18]=b):b=t[18];let x;return t[19]!==b||t[20]!==f||t[21]!==p||t[22]!==m?(x=(0,q.jsx)(`article`,{className:`group relative animate-in overflow-hidden rounded-xl border border-slate-800 bg-slate-900 p-4 transition-all duration-300 fade-in hover:-translate-y-1 hover:border-amber-400/50 hover:shadow-xl hover:shadow-amber-400/20`,children:(0,q.jsxs)(g,{to:`/music/musician/$id`,params:f,className:`block focus:ring-2 focus:ring-amber-400 focus:outline-none focus:ring-inset`,"aria-label":p,children:[m,b]})}),t[19]=b,t[20]=f,t[21]=p,t[22]=m,t[23]=x):x=t[23],x}var J=A();function le(e){let t=(0,J.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=I(`mx-auto flex w-full justify-center`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,q.jsx)(`nav`,{role:`navigation`,"aria-label":`pagination`,"data-slot":`pagination`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function ue(e){let t=(0,J.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=I(`flex flex-row items-center gap-1`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,q.jsx)(`ul`,{"data-slot":`pagination-content`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function Y(e){let t=(0,J.c)(4),n;t[0]===e?n=t[1]:({...n}=e,t[0]=e,t[1]=n);let r;return t[2]===n?r=t[3]:(r=(0,q.jsx)(`li`,{"data-slot":`pagination-item`,...n}),t[2]=n,t[3]=r),r}function X(e){let t=(0,J.c)(14),n,r,i,a;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4]):({className:n,isActive:r,size:a,...i}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a);let o=a===void 0?`icon`:a,s=r?`page`:void 0,c;t[5]!==n||t[6]!==r||t[7]!==o?(c=I(ne({variant:r?`outline`:`ghost`,size:o}),n),t[5]=n,t[6]=r,t[7]=o,t[8]=c):c=t[8];let l;return t[9]!==r||t[10]!==i||t[11]!==s||t[12]!==c?(l=(0,q.jsx)(`a`,{"aria-current":s,"data-slot":`pagination-link`,"data-active":r,className:c,...i}),t[9]=r,t[10]=i,t[11]=s,t[12]=c,t[13]=l):l=t[13],l}function de(e){let t=(0,J.c)(10),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=I(`gap-1 px-2.5 sm:pl-2.5`,n),t[3]=n,t[4]=i);let a,o;t[5]===Symbol.for(`react.memo_cache_sentinel`)?(a=(0,q.jsx)(oe,{}),o=(0,q.jsx)(`span`,{className:`hidden sm:block`,children:`Previous`}),t[5]=a,t[6]=o):(a=t[5],o=t[6]);let s;return t[7]!==r||t[8]!==i?(s=(0,q.jsxs)(X,{"aria-label":`Go to previous page`,size:`default`,className:i,...r,children:[a,o]}),t[7]=r,t[8]=i,t[9]=s):s=t[9],s}function fe(e){let t=(0,J.c)(10),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=I(`gap-1 px-2.5 sm:pr-2.5`,n),t[3]=n,t[4]=i);let a,o;t[5]===Symbol.for(`react.memo_cache_sentinel`)?(a=(0,q.jsx)(`span`,{className:`hidden sm:block`,children:`Next`}),o=(0,q.jsx)(se,{}),t[5]=a,t[6]=o):(a=t[5],o=t[6]);let s;return t[7]!==r||t[8]!==i?(s=(0,q.jsxs)(X,{"aria-label":`Go to next page`,size:`default`,className:i,...r,children:[a,o]}),t[7]=r,t[8]=i,t[9]=s):s=t[9],s}function pe(e){let t=(0,J.c)(10),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=I(`flex size-9 items-center justify-center`,n),t[3]=n,t[4]=i);let a,o;t[5]===Symbol.for(`react.memo_cache_sentinel`)?(a=(0,q.jsx)(s,{className:`size-4`}),o=(0,q.jsx)(`span`,{className:`sr-only`,children:`More pages`}),t[5]=a,t[6]=o):(a=t[5],o=t[6]);let c;return t[7]!==r||t[8]!==i?(c=(0,q.jsxs)(`span`,{"aria-hidden":!0,"data-slot":`pagination-ellipsis`,className:i,...r,children:[a,o]}),t[7]=r,t[8]=i,t[9]=c):c=t[9],c}var me=A();function Z(e){let t=(0,me.c)(25),{currentPage:n,totalPages:r,onPageChange:i}=e,a;t[0]!==n||t[1]!==r?(a=(()=>{let e=[];if(r<=7)for(let t=1;t<=r;t++)e.push(t);else{e.push(1),n>3&&e.push(`ellipsis`);let t=Math.max(2,n-1),i=Math.min(r-1,n+1);for(let n=t;n<=i;n++)e.push(n);n<r-2&&e.push(`ellipsis`),e.push(r)}return e})(),t[0]=n,t[1]=r,t[2]=a):a=t[2];let o=a,s;t[3]!==n||t[4]!==i?(s=()=>i(n-1),t[3]=n,t[4]=i,t[5]=s):s=t[5];let c=n===1?`pointer-events-none opacity-50`:`cursor-pointer hover:bg-slate-800`,l=n===1,u;t[6]!==s||t[7]!==c||t[8]!==l?(u=(0,q.jsx)(Y,{children:(0,q.jsx)(de,{onClick:s,className:c,"aria-disabled":l})}),t[6]=s,t[7]=c,t[8]=l,t[9]=u):u=t[9];let d;t[10]!==n||t[11]!==i||t[12]!==o?(d=o.map((e,t)=>e===`ellipsis`?(0,q.jsx)(Y,{children:(0,q.jsx)(pe,{})},`ellipsis-${t}`):(0,q.jsx)(Y,{children:(0,q.jsx)(X,{onClick:()=>i(e),isActive:e===n,className:e===n?`bg-amber-500 text-slate-900 hover:bg-amber-400`:`cursor-pointer hover:bg-slate-800`,children:e})},e)),t[10]=n,t[11]=i,t[12]=o,t[13]=d):d=t[13];let f;t[14]!==n||t[15]!==i?(f=()=>i(n+1),t[14]=n,t[15]=i,t[16]=f):f=t[16];let p=n===r?`pointer-events-none opacity-50`:`cursor-pointer hover:bg-slate-800`,m=n===r,h;t[17]!==f||t[18]!==p||t[19]!==m?(h=(0,q.jsx)(Y,{children:(0,q.jsx)(fe,{onClick:f,className:p,"aria-disabled":m})}),t[17]=f,t[18]=p,t[19]=m,t[20]=h):h=t[20];let g;return t[21]!==h||t[22]!==u||t[23]!==d?(g=(0,q.jsx)(le,{children:(0,q.jsxs)(ue,{children:[u,d,h]})}),t[21]=h,t[22]=u,t[23]=d,t[24]=g):g=t[24],g}var he=A();function ge(e){let t=(0,he.c)(32),{playlist:n}=e,{id:r,name:i,track_count:o,total_duration:s,cover_image:c,is_owner:l}=n,u;t[0]===c?u=t[1]:(u=V(c),t[0]=c,t[1]=u);let d=u,f;t[2]===r?f=t[3]:(f=r.toString(),t[2]=r,t[3]=f);let p;t[4]===f?p=t[5]:(p={id:f},t[4]=f,t[5]=p);let m;t[6]===s?m=t[7]:(m=D(s),t[6]=s,t[7]=m);let h=`${i}, ${o} tracks, ${m}`,_;t[8]!==d||t[9]!==i?(_=d?(0,q.jsx)(`img`,{src:d,alt:i,className:`size-full object-cover transition-transform duration-300 group-hover:scale-105`}):(0,q.jsx)(`div`,{className:`flex size-full items-center justify-center bg-linear-to-br from-slate-700 via-slate-800 to-cyan-900/30`,children:(0,q.jsx)(a,{className:`size-10 text-cyan-200/30`,"aria-hidden":`true`})}),t[8]=d,t[9]=i,t[10]=_):_=t[10];let v;t[11]===l?v=t[12]:(v=l&&(0,q.jsx)(`div`,{className:`absolute top-2 right-2 rounded-full bg-amber-500/90 px-2 py-0.5 text-xs font-medium text-slate-900`,children:`Owner`}),t[11]=l,t[12]=v);let y;t[13]!==_||t[14]!==v?(y=(0,q.jsxs)(`div`,{className:`relative mx-auto mb-3 aspect-square w-full overflow-hidden rounded-lg bg-slate-800`,children:[_,v]}),t[13]=_,t[14]=v,t[15]=y):y=t[15];let b;t[16]===i?b=t[17]:(b=(0,q.jsx)(`h3`,{className:`truncate text-sm font-semibold text-white`,children:i}),t[16]=i,t[17]=b);let x=o===1?`track`:`tracks`,S;t[18]===s?S=t[19]:(S=s>0&&` · ${D(s)}`,t[18]=s,t[19]=S);let C;t[20]!==x||t[21]!==S||t[22]!==o?(C=(0,q.jsxs)(`p`,{className:`mt-0.5 text-xs text-slate-400`,children:[o,` `,x,S]}),t[20]=x,t[21]=S,t[22]=o,t[23]=C):C=t[23];let w;t[24]!==C||t[25]!==b?(w=(0,q.jsxs)(`div`,{className:`text-center`,children:[b,C]}),t[24]=C,t[25]=b,t[26]=w):w=t[26];let T;return t[27]!==w||t[28]!==p||t[29]!==h||t[30]!==y?(T=(0,q.jsx)(`article`,{className:`group relative animate-in overflow-hidden rounded-xl border border-slate-800 bg-slate-900 p-4 transition-all duration-300 fade-in hover:-translate-y-1 hover:border-amber-400/50 hover:shadow-xl hover:shadow-amber-400/20`,children:(0,q.jsxs)(g,{to:`/music/playlist/$id`,params:p,className:`block focus:ring-2 focus:ring-amber-400 focus:outline-none focus:ring-inset`,"aria-label":h,children:[y,w]})}),t[27]=w,t[28]=p,t[29]=h,t[30]=y,t[31]=T):T=t[31],T}var _e=A();function ve(e){let t=(0,_e.c)(3),{open:n,onOpenChange:r}=e,a;return t[0]!==r||t[1]!==n?(a=(0,q.jsx)(i,{mode:`create`,open:n,onOpenChange:r}),t[0]=r,t[1]=n,t[2]=a):a=t[2],a}var Q=A();m({tab:h(x([`musicians`,`albums`,`tracks`,`playlists`]),`albums`).default(`albums`),albumsPage:h(C().int().positive(),1).default(1),musiciansPage:h(C().int().positive(),1).default(1)});function ye(){let e=(0,Q.c)(21),t=w.useNavigate(),{tab:n,albumsPage:i,musiciansPage:o}=w.useSearch(),s;e[0]===t?s=e[1]:(s=e=>t({to:`/music`,search:t=>({...t,tab:e}),replace:!0}),e[0]=t,e[1]=s);let l=s,u,d;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(u=(0,q.jsx)(`title`,{children:`Music Library - Igloo`}),d=(0,q.jsx)(`meta`,{name:`description`,content:`Browse your collection of musicians, albums, tracks, and playlists in your Igloo media library.`}),e[2]=u,e[3]=d):(u=e[2],d=e[3]);let f,m;e[4]===Symbol.for(`react.memo_cache_sentinel`)?(f=(0,q.jsxs)(`header`,{className:`-m-3 mb-8 rounded-lg p-3 focus:bg-slate-800/30 focus:ring-2 focus:ring-amber-400 focus:outline-none`,tabIndex:0,"aria-label":`Music Library. Browse your collection of musicians, albums, and tracks.`,children:[(0,q.jsxs)(`h1`,{className:`flex items-center gap-3 text-3xl font-semibold tracking-tight text-white md:text-4xl`,"aria-hidden":`true`,children:[(0,q.jsx)(c,{className:`size-6 text-amber-400`,"aria-hidden":`true`}),(0,q.jsx)(`span`,{children:`Music Library`})]}),(0,q.jsx)(`p`,{className:`mt-2 max-w-2xl text-sm text-slate-400 md:text-base`,"aria-hidden":`true`,children:`Browse your collection of musicians, albums, and tracks`})]}),m=(0,q.jsx)(be,{}),e[4]=f,e[5]=m):(f=e[4],m=e[5]);let h;e[6]===Symbol.for(`react.memo_cache_sentinel`)?(h=(0,q.jsxs)(H,{value:`musicians`,className:`px-4 py-2 text-slate-400 hover:text-white data-[state=active]:bg-amber-500 data-[state=active]:text-slate-900 data-[state=active]:shadow-lg data-[state=active]:shadow-amber-500/20`,children:[(0,q.jsx)(W,{className:`mr-2 size-4`,"aria-hidden":`true`}),`Musicians`]}),e[6]=h):h=e[6];let g;e[7]===Symbol.for(`react.memo_cache_sentinel`)?(g=(0,q.jsxs)(H,{value:`albums`,className:`px-4 py-2 text-slate-400 hover:text-white data-[state=active]:bg-amber-500 data-[state=active]:text-slate-900 data-[state=active]:shadow-lg data-[state=active]:shadow-amber-500/20`,children:[(0,q.jsx)(p,{className:`mr-2 size-4`,"aria-hidden":`true`}),`Albums`]}),e[7]=g):g=e[7];let _;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(_=(0,q.jsxs)(H,{value:`tracks`,className:`px-4 py-2 text-slate-400 hover:text-white data-[state=active]:bg-amber-500 data-[state=active]:text-slate-900 data-[state=active]:shadow-lg data-[state=active]:shadow-amber-500/20`,children:[(0,q.jsx)(r,{className:`mr-2 size-4`,"aria-hidden":`true`}),`Tracks`]}),e[8]=_):_=e[8];let v;e[9]===Symbol.for(`react.memo_cache_sentinel`)?(v=(0,q.jsxs)(ie,{className:`h-auto border border-slate-700/50 bg-slate-800/50 p-1`,children:[h,g,_,(0,q.jsxs)(H,{value:`playlists`,className:`px-4 py-2 text-slate-400 hover:text-white data-[state=active]:bg-amber-500 data-[state=active]:text-slate-900 data-[state=active]:shadow-lg data-[state=active]:shadow-amber-500/20`,children:[(0,q.jsx)(a,{className:`mr-2 size-4`,"aria-hidden":`true`}),`Playlists`]})]}),e[9]=v):v=e[9];let y;e[10]===o?y=e[11]:(y=(0,q.jsx)(U,{value:`musicians`,className:`mt-6`,children:(0,q.jsx)(Ce,{currentPage:o})}),e[10]=o,e[11]=y);let b;e[12]===i?b=e[13]:(b=(0,q.jsx)(U,{value:`albums`,className:`mt-6`,children:(0,q.jsx)(Te,{currentPage:i,perPage:24})}),e[12]=i,e[13]=b);let x;e[14]===Symbol.for(`react.memo_cache_sentinel`)?(x=(0,q.jsx)(U,{value:`tracks`,className:`mt-6`,children:(0,q.jsx)(De,{})}),e[14]=x):x=e[14];let S;e[15]===Symbol.for(`react.memo_cache_sentinel`)?(S=(0,q.jsx)(U,{value:`playlists`,className:`mt-6`,children:(0,q.jsx)(Ne,{})}),e[15]=S):S=e[15];let C;return e[16]!==l||e[17]!==b||e[18]!==y||e[19]!==n?(C=(0,q.jsxs)(`div`,{children:[u,d,f,m,(0,q.jsxs)(ae,{value:n,onValueChange:l,children:[v,y,b,x,S]})]}),e[16]=l,e[17]=b,e[18]=y,e[19]=n,e[20]=C):C=e[20],C}function be(){let t=(0,Q.c)(24),n;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(n=O(),t[0]=n):n=t[0];let{data:r}=e(n),i=r?.error===!1?r.data:null,a=i?.total_albums??0,o=i?.total_tracks??0,s=i?.total_musicians??0,l=`Library statistics: ${a} albums, ${o} tracks, ${s} musicians`,u;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(u=(0,q.jsx)(p,{className:`size-4 text-amber-400`}),t[1]=u):u=t[1];let f;t[2]===a?f=t[3]:(f=(0,q.jsx)(`span`,{className:`font-medium text-white`,children:a}),t[2]=a,t[3]=f);let m;t[4]===Symbol.for(`react.memo_cache_sentinel`)?(m=(0,q.jsx)(`span`,{className:`text-slate-400`,children:`Albums`}),t[4]=m):m=t[4];let h;t[5]===f?h=t[6]:(h=(0,q.jsxs)(`div`,{className:`flex items-center gap-2`,"aria-hidden":`true`,children:[u,f,m]}),t[5]=f,t[6]=h);let g;t[7]===Symbol.for(`react.memo_cache_sentinel`)?(g=(0,q.jsx)(c,{className:`size-4 text-amber-400`}),t[7]=g):g=t[7];let _;t[8]===o?_=t[9]:(_=(0,q.jsx)(`span`,{className:`font-medium text-white`,children:o}),t[8]=o,t[9]=_);let v;t[10]===Symbol.for(`react.memo_cache_sentinel`)?(v=(0,q.jsx)(`span`,{className:`text-slate-400`,children:`Tracks`}),t[10]=v):v=t[10];let y;t[11]===_?y=t[12]:(y=(0,q.jsxs)(`div`,{className:`flex items-center gap-2`,"aria-hidden":`true`,children:[g,_,v]}),t[11]=_,t[12]=y);let b;t[13]===Symbol.for(`react.memo_cache_sentinel`)?(b=(0,q.jsx)(d,{className:`size-4 text-amber-400`}),t[13]=b):b=t[13];let x;t[14]===s?x=t[15]:(x=(0,q.jsx)(`span`,{className:`font-medium text-white`,children:s}),t[14]=s,t[15]=x);let S;t[16]===Symbol.for(`react.memo_cache_sentinel`)?(S=(0,q.jsx)(`span`,{className:`text-slate-400`,children:`Musicians`}),t[16]=S):S=t[16];let C;t[17]===x?C=t[18]:(C=(0,q.jsxs)(`div`,{className:`flex items-center gap-2`,"aria-hidden":`true`,children:[b,x,S]}),t[17]=x,t[18]=C);let w;return t[19]!==l||t[20]!==C||t[21]!==h||t[22]!==y?(w=(0,q.jsxs)(`section`,{className:`-m-3 mb-6 flex flex-wrap gap-6 rounded-lg p-3 focus:bg-slate-800/30 focus:ring-2 focus:ring-amber-400 focus:outline-none`,"aria-label":l,tabIndex:0,children:[h,y,C]}),t[19]=l,t[20]=C,t[21]=h,t[22]=y,t[23]=w):w=t[23],w}function xe(){let e=(0,Q.c)(2),t;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,q.jsxs)(`div`,{className:`mb-6 flex items-center justify-between`,children:[(0,q.jsx)(`div`,{className:`h-4 w-24 animate-pulse rounded-sm bg-slate-800`}),(0,q.jsx)(`div`,{className:`h-4 w-20 animate-pulse rounded-sm bg-slate-800`})]}),e[0]=t):t=e[0];let n;return e[1]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,q.jsxs)(`div`,{children:[t,(0,q.jsx)(`div`,{className:`mb-8 grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5`,children:Array.from({length:24}).map(Se)})]}),e[1]=n):n=e[1],n}function Se(e,t){return(0,q.jsxs)(`div`,{className:`animate-pulse rounded-xl border border-slate-800 bg-slate-900 p-4`,children:[(0,q.jsx)(`div`,{className:`mx-auto mb-3 aspect-square w-full max-w-32 rounded-full bg-slate-800`}),(0,q.jsx)(`div`,{className:`mx-auto h-4 w-3/4 rounded-sm bg-slate-800`}),(0,q.jsx)(`div`,{className:`mx-auto mt-2 h-3 w-1/2 rounded-sm bg-slate-800`})]},t)}function Ce(t){let n=(0,Q.c)(40),{currentPage:r}=t,i=w.useNavigate(),a;n[0]===r?a=n[1]:(a=E(r,24),n[0]=r,n[1]=a);let{data:o,isLoading:s}=e(a),c;n[2]===o?c=n[3]:(c=o?.error===!1?o.data.musicians:[],n[2]=o,n[3]=c);let l=c,u=o?.error===!1?o.data.total_pages:0,d=o?.error===!1?o.data.total:0,f;n[4]!==r||n[5]!==s||n[6]!==l||n[7]!==u?(f=()=>{if(!s)return l.length===0?`No musicians found`:`Showing ${l.length} musicians, page ${r} of ${u}`},n[4]=r,n[5]=s,n[6]=l,n[7]=u,n[8]=f):f=n[8];let p=f,m;n[9]===i?m=n[10]:(m=e=>{i({to:`/music`,search:t=>({...t,musiciansPage:e}),replace:!0}),window.scrollTo({top:0,behavior:`smooth`})},n[9]=i,n[10]=m);let h=m;if(s){let e;return n[11]===Symbol.for(`react.memo_cache_sentinel`)?(e=(0,q.jsx)(xe,{}),n[11]=e):e=n[11],e}if(l.length===0){let e;return n[12]===Symbol.for(`react.memo_cache_sentinel`)?(e=(0,q.jsxs)(`div`,{className:`py-12 text-center text-slate-400`,children:[(0,q.jsx)(W,{className:`mx-auto mb-4 size-10 opacity-50`,"aria-hidden":`true`}),(0,q.jsx)(`p`,{children:`No musicians found in your library.`})]}),n[12]=e):e=n[12],e}let g;n[13]===p?g=n[14]:(g=p(),n[13]=p,n[14]=g);let _;n[15]===g?_=n[16]:(_=(0,q.jsx)(R,{message:g}),n[15]=g,n[16]=_);let v;n[17]===d?v=n[18]:(v=d.toLocaleString(),n[17]=d,n[18]=v);let y;n[19]===v?y=n[20]:(y=(0,q.jsxs)(`span`,{className:`text-sm text-slate-400`,children:[v,` musicians`]}),n[19]=v,n[20]=y);let b;n[21]!==r||n[22]!==u?(b=(0,q.jsxs)(`span`,{className:`text-sm text-slate-400`,children:[`Page `,r,` of `,u]}),n[21]=r,n[22]=u,n[23]=b):b=n[23];let x;n[24]!==y||n[25]!==b?(x=(0,q.jsxs)(`div`,{className:`mb-6 flex items-center justify-between`,children:[y,b]}),n[24]=y,n[25]=b,n[26]=x):x=n[26];let S;n[27]===l?S=n[28]:(S=l.map(we),n[27]=l,n[28]=S);let C;n[29]===S?C=n[30]:(C=(0,q.jsx)(`div`,{className:`mb-8 grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5`,children:S}),n[29]=S,n[30]=C);let T;n[31]!==r||n[32]!==h||n[33]!==u?(T=u>1&&(0,q.jsx)(Z,{currentPage:r,totalPages:u,onPageChange:h}),n[31]=r,n[32]=h,n[33]=u,n[34]=T):T=n[34];let D;return n[35]!==x||n[36]!==C||n[37]!==T||n[38]!==_?(D=(0,q.jsxs)(`div`,{children:[_,x,C,T]}),n[35]=x,n[36]=C,n[37]=T,n[38]=_,n[39]=D):D=n[39],D}function we(e){return(0,q.jsx)(ce,{musician:e},e.id)}function Te(t){let n=(0,Q.c)(41),{currentPage:r,perPage:i}=t,a=w.useNavigate(),o;n[0]!==r||n[1]!==i?(o=N(r,i),n[0]=r,n[1]=i,n[2]=o):o=n[2];let{data:s,isLoading:c}=e(o),l;n[3]===s?l=n[4]:(l=s?.error===!1?s.data.albums:[],n[3]=s,n[4]=l);let u=l,d=s?.error===!1?s.data.total_pages:0,f=s?.error===!1?s.data.total:0,m;n[5]!==u||n[6]!==r||n[7]!==c||n[8]!==d?(m=()=>{if(!c)return u.length===0?`No albums found`:`Showing ${u.length} albums, page ${r} of ${d}`},n[5]=u,n[6]=r,n[7]=c,n[8]=d,n[9]=m):m=n[9];let h=m,g;n[10]===a?g=n[11]:(g=e=>{a({to:`/music`,search:t=>({...t,albumsPage:e}),replace:!0}),window.scrollTo({top:0,behavior:`smooth`})},n[10]=a,n[11]=g);let _=g;if(c){let e;return n[12]===Symbol.for(`react.memo_cache_sentinel`)?(e=(0,q.jsxs)(`div`,{className:`flex justify-center py-12`,role:`status`,"aria-label":`Loading albums`,children:[(0,q.jsx)(P,{className:`h-8 w-8 text-amber-400`}),(0,q.jsx)(`span`,{className:`sr-only`,children:`Loading albums...`})]}),n[12]=e):e=n[12],e}if(u.length===0){let e;return n[13]===Symbol.for(`react.memo_cache_sentinel`)?(e=(0,q.jsxs)(`div`,{className:`py-12 text-center text-slate-400`,children:[(0,q.jsx)(p,{className:`mx-auto mb-4 size-10 opacity-50`,"aria-hidden":`true`}),(0,q.jsx)(`p`,{children:`No albums found in your library.`})]}),n[13]=e):e=n[13],e}let v;n[14]===h?v=n[15]:(v=h(),n[14]=h,n[15]=v);let y;n[16]===v?y=n[17]:(y=(0,q.jsx)(R,{message:v}),n[16]=v,n[17]=y);let b;n[18]===f?b=n[19]:(b=f.toLocaleString(),n[18]=f,n[19]=b);let x;n[20]===b?x=n[21]:(x=(0,q.jsxs)(`span`,{className:`text-sm text-slate-400`,children:[b,` albums`]}),n[20]=b,n[21]=x);let S;n[22]!==r||n[23]!==d?(S=(0,q.jsxs)(`span`,{className:`text-sm text-slate-400`,children:[`Page `,r,` of `,d]}),n[22]=r,n[23]=d,n[24]=S):S=n[24];let C;n[25]!==x||n[26]!==S?(C=(0,q.jsxs)(`div`,{className:`mb-6 flex items-center justify-between`,children:[x,S]}),n[25]=x,n[26]=S,n[27]=C):C=n[27];let T;n[28]===u?T=n[29]:(T=u.map(Ee),n[28]=u,n[29]=T);let E;n[30]===T?E=n[31]:(E=(0,q.jsx)(`div`,{className:`mb-8 grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6`,children:T}),n[30]=T,n[31]=E);let D;n[32]!==r||n[33]!==_||n[34]!==d?(D=d>1&&(0,q.jsx)(Z,{currentPage:r,totalPages:d,onPageChange:_}),n[32]=r,n[33]=_,n[34]=d,n[35]=D):D=n[35];let O;return n[36]!==C||n[37]!==E||n[38]!==D||n[39]!==y?(O=(0,q.jsxs)(`div`,{children:[y,C,E,D]}),n[36]=C,n[37]=E,n[38]=D,n[39]=y,n[40]=O):O=n[40],O}function Ee(e){return(0,q.jsx)(re,{album:e},e.id)}function De(){let e=(0,Q.c)(32),r;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(r=ee(),e[0]=r):r=e[0];let{data:i,fetchNextPage:a,hasNextPage:o,isFetchingNextPage:s,isLoading:l}=t(r),u=(0,G.useRef)(null),[d,f]=(0,G.useState)(0),p,m;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(p=()=>{u.current&&f(u.current.offsetTop)},m=[],e[1]=p,e[2]=m):(p=e[1],m=e[2]),(0,G.useEffect)(p,m);let h=i?.pages[0]?.error===!1?i.pages[0].data?.total??0:0,g=i?.pages.flatMap($)??[],_=Me(g),v=n({count:_.length,estimateSize:e=>_[e]?.type===`letter`?52:60,overscan:5,scrollMargin:d}),y=v.getVirtualItems();(0,G.useEffect)(()=>{if(y.length===0)return;let e=y[y.length-1];e&&e.index>=_.length-10&&o&&!s&&a()},[y,_.length,o,s,a]);let b=()=>{if(!l){if(g.length===0)return`No tracks found`;if(!s)return`${g.length} of ${h} tracks loaded`}};if(l){let t;return e[3]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,q.jsxs)(`div`,{className:`flex justify-center py-12`,role:`status`,"aria-label":`Loading tracks`,children:[(0,q.jsx)(P,{className:`h-8 w-8 text-amber-400`}),(0,q.jsx)(`span`,{className:`sr-only`,children:`Loading tracks...`})]}),e[3]=t):t=e[3],t}if(g.length===0){let t;return e[4]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,q.jsxs)(`div`,{className:`py-12 text-center text-slate-400`,children:[(0,q.jsx)(c,{className:`mx-auto mb-4 size-10 opacity-50`,"aria-hidden":`true`}),(0,q.jsx)(`p`,{children:`No tracks found in your library.`})]}),e[4]=t):t=e[4],t}let x;e[5]===b?x=e[6]:(x=b(),e[5]=b,e[6]=x);let S;e[7]===x?S=e[8]:(S=(0,q.jsx)(R,{message:x}),e[7]=x,e[8]=S);let C;e[9]===h?C=e[10]:(C=h.toLocaleString(),e[9]=h,e[10]=C);let w;e[11]===C?w=e[12]:(w=(0,q.jsxs)(`span`,{className:`text-sm text-slate-400`,children:[C,` tracks`]}),e[11]=C,e[12]=w);let T;e[13]===Symbol.for(`react.memo_cache_sentinel`)?(T=(0,q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,q.jsx)(Oe,{}),(0,q.jsx)(ke,{})]}),e[13]=T):T=e[13];let E;e[14]===w?E=e[15]:(E=(0,q.jsxs)(`div`,{className:`mb-4 flex items-center justify-between`,children:[w,T]}),e[14]=w,e[15]=E);let D;e[16]===v?D=e[17]:(D=v.getTotalSize(),e[16]=v,e[17]=D);let O=`${D}px`,k;e[18]===O?k=e[19]:(k={height:O,width:`100%`,position:`relative`},e[18]=O,e[19]=k);let A=y.map(e=>{let t=_[e.index];return t?(0,q.jsx)(`div`,{style:{position:`absolute`,top:0,left:0,width:`100%`,height:`${e.size}px`,transform:`translateY(${e.start-d}px)`},children:t.type===`letter`?(0,q.jsx)(Ae,{letter:t.letter}):(0,q.jsx)(je,{track:t.track})},e.key):null}),j;e[20]!==k||e[21]!==A?(j=(0,q.jsx)(`div`,{style:k,children:A}),e[20]=k,e[21]=A,e[22]=j):j=e[22];let M;e[23]===s?M=e[24]:(M=s&&(0,q.jsx)(`div`,{className:`flex justify-center py-4`,children:(0,q.jsx)(P,{className:`h-6 w-6 text-amber-400`})}),e[23]=s,e[24]=M);let N;e[25]!==j||e[26]!==M?(N=(0,q.jsxs)(`div`,{ref:u,className:`overflow-hidden rounded-lg border border-slate-800 bg-slate-900/50`,children:[j,M]}),e[25]=j,e[26]=M,e[27]=N):N=e[27];let F;return e[28]!==N||e[29]!==S||e[30]!==E?(F=(0,q.jsxs)(`div`,{children:[S,E,N]}),e[28]=N,e[29]=S,e[30]=E,e[31]=F):F=e[31],F}function $(e){return e.error===!1?e.data?.tracks??[]:[]}function Oe(){let[e,t]=(0,G.useState)(!1),n=j();return(0,q.jsxs)(`button`,{onClick:async()=>{t(!0);try{await n.startPlayAllPlayback()}catch(e){console.error(`Failed to start playback:`,e),L(`start playback`,`Unable to start playing all tracks. Please try again.`)}finally{t(!1)}},disabled:e,className:`inline-flex items-center gap-2 rounded-full bg-slate-700 px-4 py-2 font-medium text-white transition-colors hover:bg-slate-600 focus:ring-2 focus:ring-amber-400 focus:ring-offset-2 focus:ring-offset-slate-900 focus:outline-none disabled:opacity-50`,"aria-label":`Play all tracks`,children:[e?(0,q.jsx)(P,{className:`size-4`}):(0,q.jsx)(b,{className:`size-4 fill-current`,"aria-hidden":`true`}),(0,q.jsx)(`span`,{children:`Play All`})]})}function ke(){let[e,t]=(0,G.useState)(!1),n=j();return(0,q.jsxs)(`button`,{onClick:async()=>{t(!0);try{await n.startShufflePlayback()}catch(e){console.error(`Failed to start shuffle playback:`,e),L(`start shuffle`,`Unable to start shuffle playback. Please try again.`)}finally{t(!1)}},disabled:e,className:`inline-flex items-center gap-2 rounded-full bg-amber-500 px-4 py-2 font-medium text-slate-900 transition-colors hover:bg-amber-400 focus:ring-2 focus:ring-amber-400 focus:ring-offset-2 focus:ring-offset-slate-900 focus:outline-none disabled:opacity-50`,"aria-label":`Shuffle all tracks`,children:[e?(0,q.jsx)(P,{className:`size-4`}):(0,q.jsx)(u,{className:`size-4`,"aria-hidden":`true`}),(0,q.jsx)(`span`,{children:`Shuffle All`})]})}function Ae(e){let t=(0,Q.c)(2),{letter:n}=e,r;return t[0]===n?r=t[1]:(r=(0,q.jsx)(`div`,{className:`animate-in border-b border-amber-500/20 bg-slate-800/50 px-4 py-3 duration-300 fade-in`,children:(0,q.jsx)(`span`,{className:`text-2xl font-bold text-amber-400`,children:n})}),t[0]=n,t[1]=r),r}function je(e){let t=(0,Q.c)(35),{track:n}=e,r=j(),i;t[0]!==r||t[1]!==n.album_cover||t[2]!==n.album_id||t[3]!==n.album_title||t[4]!==n.bit_rate||t[5]!==n.codec||t[6]!==n.duration||t[7]!==n.file_path||t[8]!==n.id||t[9]!==n.musician_id||t[10]!==n.musician_name||t[11]!==n.title?(i=()=>{let e=y({id:n.id,title:n.title,file_path:n.file_path,duration:n.duration,codec:n.codec,bit_rate:n.bit_rate,album_id:n.album_id,musician_id:n.musician_id,album_cover:n.album_cover,musician_name:n.musician_name});r.playTrack(e,[e],{cover:V(n.album_cover),title:V(n.album_title)??`Unknown Album`,musician:V(n.musician_name)})},t[0]=r,t[1]=n.album_cover,t[2]=n.album_id,t[3]=n.album_title,t[4]=n.bit_rate,t[5]=n.codec,t[6]=n.duration,t[7]=n.file_path,t[8]=n.id,t[9]=n.musician_id,t[10]=n.musician_name,t[11]=n.title,t[12]=i):i=t[12];let a=i,s=n.id,c=n.title,l=n.duration,u;t[13]===n.musician_name?u=t[14]:(u=V(n.musician_name)??`Unknown Artist`,t[13]=n.musician_name,t[14]=u);let d;t[15]===n.album_id?d=t[16]:(d=B(n.album_id),t[15]=n.album_id,t[16]=d);let f;t[17]===n.album_title?f=t[18]:(f=z(n.album_title),t[17]=n.album_title,t[18]=f);let p;t[19]===n.musician_id?p=t[20]:(p=B(n.musician_id),t[19]=n.musician_id,t[20]=p);let m;t[21]===n.musician_name?m=t[22]:(m=z(n.musician_name),t[21]=n.musician_name,t[22]=m);let h=r.currentTrack?.id===n.id&&r.isPlaying,g=r.currentTrack?.id===n.id,_;return t[23]!==a||t[24]!==h||t[25]!==g||t[26]!==u||t[27]!==d||t[28]!==f||t[29]!==p||t[30]!==m||t[31]!==n.duration||t[32]!==n.id||t[33]!==n.title?(_=(0,q.jsx)(o,{id:s,title:c,duration:l,subtitle:u,albumId:d,albumTitle:f,musicianId:p,musicianName:m,variant:`library`,isPlaying:h,isCurrentTrack:g,onPlay:a,showActionsMenu:!0}),t[23]=a,t[24]=h,t[25]=g,t[26]=u,t[27]=d,t[28]=f,t[29]=p,t[30]=m,t[31]=n.duration,t[32]=n.id,t[33]=n.title,t[34]=_):_=t[34],_}function Me(e){let t=[],n=null;for(let r of e){let e=r.title.charAt(0).toUpperCase(),i=/[A-Z]/.test(e)?e:`#`;i!==n&&(t.push({type:`letter`,letter:i}),n=i),t.push({type:`track`,track:r})}return t}function Ne(){let t=(0,Q.c)(27),[n,r]=(0,G.useState)(!1),i;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(i=te(),t[0]=i):i=t[0];let{data:a,isLoading:o}=e(i),s;t[1]===a?s=t[2]:(s=a?.error===!1?a.data.playlists:[],t[1]=a,t[2]=s);let c=s,u;t[3]!==o||t[4]!==c?(u=()=>{if(!o)return c.length===0?`No playlists yet`:`${c.length} playlist${c.length===1?``:`s`} loaded`},t[3]=o,t[4]=c,t[5]=u):u=t[5];let d=u;if(o){let e;return t[6]===Symbol.for(`react.memo_cache_sentinel`)?(e=(0,q.jsx)(Fe,{}),t[6]=e):e=t[6],e}let f;t[7]===d?f=t[8]:(f=d(),t[7]=d,t[8]=f);let p;t[9]===f?p=t[10]:(p=(0,q.jsx)(R,{message:f}),t[9]=f,t[10]=p);let m=c.length===1?`playlist`:`playlists`,h;t[11]!==c.length||t[12]!==m?(h=(0,q.jsxs)(`span`,{className:`text-sm text-slate-400`,children:[c.length,` `,m]}),t[11]=c.length,t[12]=m,t[13]=h):h=t[13];let g;t[14]===Symbol.for(`react.memo_cache_sentinel`)?(g=()=>r(!0),t[14]=g):g=t[14];let _;t[15]===Symbol.for(`react.memo_cache_sentinel`)?(_=(0,q.jsxs)(`button`,{onClick:g,className:`inline-flex items-center gap-2 rounded-full bg-amber-500 px-4 py-2 font-medium text-slate-900 transition-colors hover:bg-amber-400 focus:ring-2 focus:ring-amber-400 focus:ring-offset-2 focus:ring-offset-slate-900 focus:outline-none`,"aria-label":`Create new playlist`,children:[(0,q.jsx)(l,{className:`size-4`,"aria-hidden":`true`}),`New Playlist`]}),t[15]=_):_=t[15];let v;t[16]===h?v=t[17]:(v=(0,q.jsxs)(`div`,{className:`mb-6 flex items-center justify-between`,children:[h,_]}),t[16]=h,t[17]=v);let y;t[18]===c?y=t[19]:(y=c.length===0?(0,q.jsx)(Le,{onCreateClick:()=>r(!0)}):(0,q.jsx)(`div`,{className:`grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5`,children:c.map(Pe)}),t[18]=c,t[19]=y);let b;t[20]===n?b=t[21]:(b=(0,q.jsx)(ve,{open:n,onOpenChange:r}),t[20]=n,t[21]=b);let x;return t[22]!==y||t[23]!==b||t[24]!==p||t[25]!==v?(x=(0,q.jsxs)(`div`,{children:[p,v,y,b]}),t[22]=y,t[23]=b,t[24]=p,t[25]=v,t[26]=x):x=t[26],x}function Pe(e){return(0,q.jsx)(ge,{playlist:e},e.id)}function Fe(){let e=(0,Q.c)(2),t;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,q.jsxs)(`div`,{className:`mb-6 flex items-center justify-between`,children:[(0,q.jsx)(`div`,{className:`h-4 w-24 animate-pulse rounded-sm bg-slate-800`}),(0,q.jsx)(`div`,{className:`h-10 w-32 animate-pulse rounded-full bg-slate-800`})]}),e[0]=t):t=e[0];let n;return e[1]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,q.jsxs)(`div`,{children:[t,(0,q.jsx)(`div`,{className:`grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5`,children:Array.from({length:10}).map(Ie)})]}),e[1]=n):n=e[1],n}function Ie(e,t){return(0,q.jsxs)(`div`,{className:`animate-pulse rounded-xl border border-slate-800 bg-slate-900 p-4`,children:[(0,q.jsx)(`div`,{className:`mx-auto mb-3 aspect-square w-full rounded-lg bg-slate-800`}),(0,q.jsx)(`div`,{className:`mx-auto h-4 w-3/4 rounded-sm bg-slate-800`}),(0,q.jsx)(`div`,{className:`mx-auto mt-2 h-3 w-1/2 rounded-sm bg-slate-800`})]},t)}function Le(e){let t=(0,Q.c)(6),{onCreateClick:n}=e,r,i,o;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,q.jsx)(`div`,{className:`mb-6 flex size-24 items-center justify-center rounded-full bg-linear-to-br from-slate-700 via-slate-800 to-cyan-900/40 shadow-lg shadow-cyan-500/5`,children:(0,q.jsx)(a,{className:`size-10 text-cyan-200/40`,"aria-hidden":`true`})}),i=(0,q.jsx)(`h3`,{className:`mb-2 text-xl font-semibold text-white`,children:`No playlists yet`}),o=(0,q.jsx)(`p`,{className:`mb-6 max-w-sm text-slate-400`,children:`Create your first playlist to start organizing your favorite tracks.`}),t[0]=r,t[1]=i,t[2]=o):(r=t[0],i=t[1],o=t[2]);let s;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(s=(0,q.jsx)(l,{className:`size-4`,"aria-hidden":`true`}),t[3]=s):s=t[3];let c;return t[4]===n?c=t[5]:(c=(0,q.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-16 text-center`,children:[r,i,o,(0,q.jsxs)(`button`,{onClick:n,className:`inline-flex items-center gap-2 rounded-full bg-amber-500 px-6 py-3 font-semibold text-slate-900 shadow-lg shadow-amber-500/20 transition-colors hover:bg-amber-400 focus:ring-2 focus:ring-amber-400 focus:ring-offset-2 focus:ring-offset-slate-900 focus:outline-none`,children:[s,`Create Your First Playlist`]})]}),t[4]=n,t[5]=c),c}export{ye as component};