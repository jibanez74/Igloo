import"./useQuery-DYliyyeq.js";import"./dialog-BHOyGAmv.js";import{t as e}from"./arrow-left-CHge2wga.js";import{t}from"./TrackItem-D52HMG6c.js";import{t as n}from"./circle-alert-BBYeejEm.js";import{t as r}from"./clock-BRDoWx7G.js";import{t as i}from"./list-ordered-CLejkNMT.js";import{t as a}from"./music-DCJfo9yH.js";import"./plus-DrfurNsD.js";import{t as o}from"./shuffle-SybXheIC.js";import"./trash-2-CWBGQmm5.js";import{t as s}from"./user-wQOA0tR5.js";import{Dt as ee,J as c,Mt as l,Q as u,Tt as d,gt as f,kt as p,r as m,t as h}from"./index-B4Mm07st.js";import"./dist-D9YK6Fjb.js";import"./dist-DoMa5iEY.js";import"./dist-DehwVPxN.js";import"./dist-m3SJwciI.js";import"./dist-BE3VF_ow.js";import"./toast-helpers-N18T5b5Z.js";import"./button-DUpsrK_w.js";import"./dist-DRYwAtpY.js";import"./input-COadufZY.js";import{n as te,r as g,t as _}from"./nullable-DZsmEyNt.js";import{n as v,r as y,t as b}from"./alert-DRXpCir_.js";var x=p(),S=l();function C(){let e=(0,x.c)(7),t=m.useLoaderData();if(t.error){let r,i;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,S.jsx)(n,{className:`size-4`,"aria-hidden":`true`}),i=(0,S.jsx)(y,{children:`Error`}),e[0]=r,e[1]=i):(r=e[0],i=e[1]);let a=t.message||`Failed to load musician details. Please try again later.`,o;return e[2]===a?o=e[3]:(o=(0,S.jsxs)(b,{variant:`destructive`,className:`border-red-500/20 bg-red-500/10 text-red-400`,children:[r,i,(0,S.jsx)(v,{children:a})]}),e[2]=a,e[3]=o),o}if(!t.data?.musician){let t;return e[4]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,S.jsx)(`div`,{className:`py-12 text-center`,children:(0,S.jsx)(`h2`,{className:`text-xl font-semibold text-slate-300`,children:`Musician not found`})}),e[4]=t):t=e[4],t}let r;return e[5]===t.data?r=e[6]:(r=(0,S.jsx)(w,{...t.data}),e[5]=t.data,e[6]=r),r}function w(n){let l=(0,x.c)(89),{musician:p,albums:m,tracks:v,genres:y,total_duration:b}=n,C=h(),w,T,E,D,O,k,A,j;if(l[0]!==m||l[1]!==C||l[2]!==y||l[3]!==p.id||l[4]!==p.name||l[5]!==p.spotify_followers||l[6]!==p.spotify_popularity||l[7]!==p.summary||l[8]!==p.thumb||l[9]!==b||l[10]!==v){let e=g(p.thumb),n;l[19]===p.summary?n=l[20]:(n=g(p.summary),l[19]=p.summary,l[20]=n);let c=n,h;if(l[21]!==p.spotify_popularity){let e=_(p.spotify_popularity);h=e===null?null:Math.round(e),l[21]=p.spotify_popularity,l[22]=h}else h=l[22];let x=h,M=te(p.spotify_followers),N=`${p.name} - Igloo`,P=`Listen to ${p.name} - ${m.length} albums, ${v.length} tracks in your Igloo music library.`,ae=ie,F;l[23]!==p.id||l[24]!==p.name?(F=e=>e.map(e=>u({id:e.id,title:e.title,duration:e.duration,file_path:e.file_path,codec:e.codec,bit_rate:e.bit_rate,album_id:e.album_id,musician_id:{Int64:p.id,Valid:!0},album_cover:e.album_cover,musician_name:{String:p.name,Valid:!0}})),l[23]=p.id,l[24]=p.name,l[25]=F):F=l[25];let oe=F,se=()=>{if(v.length===0)return;let t=oe(v);C.playAlbum(t,{cover:e,title:p.name,musician:p.name})},ce=()=>{if(v.length===0)return;let t=oe(v);C.shuffleAlbum(t,{cover:e,title:p.name,musician:p.name})},le=t=>{let n=oe(v),r=v.findIndex(e=>e.id===t.id),i=[...n.slice(r),...n.slice(0,r)];C.playAlbum(i,{cover:g(t.album_cover)??e,title:p.name,musician:p.name})},I;l[26]===C?I=l[27]:(I=e=>C.currentTrack?.id===e.id&&C.isPlaying,l[26]=C,l[27]=I);let ue=I,de=p.name,fe=m.length,pe=v.length,L;l[28]===b?L=l[29]:(L=f(b),l[28]=b,l[29]=L);let R;l[30]===y?R=l[31]:(R=y.length>0?` Genres: ${y.join(`, `)}.`:``,l[30]=y,l[31]=R);let z=`${de}. ${fe} ${m.length===1?`album`:`albums`}, ${pe} ${v.length===1?`track`:`tracks`}. Total duration: ${L}.${R}`;w=`animate-in overflow-x-hidden duration-300 fade-in`,T=`musician-name`,l[32]===N?E=l[33]:(E=(0,S.jsx)(`title`,{children:N}),l[32]=N,l[33]=E),l[34]===P?D=l[35]:(D=(0,S.jsx)(`meta`,{name:`description`,content:P}),l[34]=P,l[35]=D),l[36]!==m.length||l[37]!==p.name||l[38]!==z||l[39]!==v.length?(O=(0,S.jsxs)(`span`,{tabIndex:0,className:`sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50
          focus:rounded-md focus:bg-slate-800 focus:px-4 focus:py-2 focus:text-white focus:ring-2
          focus:ring-amber-400 focus:outline-none`,"aria-label":z,children:[p.name,` - `,m.length,` albums, `,v.length,` tracks`]}),l[36]=m.length,l[37]=p.name,l[38]=z,l[39]=v.length,l[40]=O):O=l[40];let me=e?(0,S.jsx)(`img`,{src:e,alt:p.name,className:`size-full object-cover`}):(0,S.jsx)(`div`,{className:`flex size-full items-center justify-center bg-slate-800`,role:`img`,"aria-label":`No image available`,children:(0,S.jsx)(s,{className:`size-16 text-slate-600`,"aria-hidden":`true`})}),B;l[41]===me?B=l[42]:(B=(0,S.jsx)(`figure`,{className:`mx-auto shrink-0 md:mx-0`,children:(0,S.jsx)(`div`,{className:`aspect-square w-48 overflow-hidden rounded-full border border-amber-500/20 shadow-2xl shadow-amber-500/10 md:w-56 lg:w-64`,children:me})}),l[41]=me,l[42]=B);let V;l[43]===p.name?V=l[44]:(V=(0,S.jsx)(`h1`,{id:`musician-name`,className:`truncate text-2xl font-bold text-white sm:text-3xl md:text-4xl lg:text-5xl`,title:p.name,children:p.name}),l[43]=p.name,l[44]=V);let H;l[45]===c?H=l[46]:(H=c&&(0,S.jsx)(`p`,{className:`mt-3 text-sm text-slate-400 sm:text-base md:max-w-2xl`,children:c}),l[45]=c,l[46]=H);let U;l[47]===y?U=l[48]:(U=y.length>0&&(0,S.jsx)(`ul`,{className:`mt-4 flex flex-wrap justify-center gap-2 md:justify-start`,"aria-label":`Genres: ${y.join(`, `)}`,children:y.map(re)}),l[47]=y,l[48]=U);let W;l[49]===Symbol.for(`react.memo_cache_sentinel`)?(W=(0,S.jsx)(ee,{className:`size-4 text-slate-400`,"aria-hidden":`true`}),l[49]=W):W=l[49];let he=m.length===1?`album`:`albums`,G;l[50]!==m.length||l[51]!==he?(G=(0,S.jsxs)(`li`,{className:`flex items-center gap-1.5`,children:[W,(0,S.jsxs)(`span`,{children:[m.length,` `,he]})]}),l[50]=m.length,l[51]=he,l[52]=G):G=l[52];let K;l[53]===Symbol.for(`react.memo_cache_sentinel`)?(K=(0,S.jsx)(a,{className:`size-4 text-slate-400`,"aria-hidden":`true`}),l[53]=K):K=l[53];let ge=v.length===1?`track`:`tracks`,q;l[54]!==ge||l[55]!==v.length?(q=(0,S.jsxs)(`li`,{className:`flex items-center gap-1.5`,children:[K,(0,S.jsxs)(`span`,{children:[v.length,` `,ge]})]}),l[54]=ge,l[55]=v.length,l[56]=q):q=l[56];let J;l[57]===Symbol.for(`react.memo_cache_sentinel`)?(J=(0,S.jsx)(r,{className:`size-4 text-slate-400`,"aria-hidden":`true`}),l[57]=J):J=l[57];let Y;l[58]===b?Y=l[59]:(Y=f(b),l[58]=b,l[59]=Y);let X;l[60]===Y?X=l[61]:(X=(0,S.jsxs)(`li`,{className:`flex items-center gap-1.5`,children:[J,(0,S.jsx)(`span`,{children:Y})]}),l[60]=Y,l[61]=X);let Z;l[62]!==G||l[63]!==q||l[64]!==X?(Z=(0,S.jsxs)(`ul`,{className:`mt-4 flex flex-wrap items-center justify-center gap-x-4 gap-y-2 text-sm text-slate-400 sm:text-base md:justify-start`,"aria-label":`Musician statistics`,children:[G,q,X]}),l[62]=G,l[63]=q,l[64]=X,l[65]=Z):Z=l[65];let _e=v.length>0&&(0,S.jsxs)(`div`,{className:`mt-6 flex flex-col justify-center gap-3 sm:flex-row md:justify-start`,children:[(0,S.jsxs)(`button`,{onClick:se,className:`inline-flex items-center justify-center gap-2 rounded-full bg-amber-500 px-6 py-3
                  font-semibold text-slate-900 shadow-lg shadow-amber-500/20 transition-colors hover:bg-amber-400
                  focus:ring-2 focus:ring-amber-400 focus:ring-offset-2 focus:ring-offset-slate-900 focus:outline-none`,"aria-label":`Play all ${v.length} tracks by ${p.name}`,children:[(0,S.jsx)(d,{className:`size-4 fill-current`,"aria-hidden":`true`}),`Play All`]}),(0,S.jsxs)(`button`,{onClick:ce,className:`inline-flex items-center justify-center gap-2 rounded-full border border-slate-600 bg-slate-700
                  px-6 py-3 font-semibold text-white transition-colors hover:bg-slate-600
                  focus:ring-2 focus:ring-amber-400 focus:ring-offset-2 focus:ring-offset-slate-900 focus:outline-none`,"aria-label":`Shuffle play all ${v.length} tracks by ${p.name}`,children:[(0,S.jsx)(o,{className:`size-4`,"aria-hidden":`true`}),`Shuffle`]})]}),Q=(x!==null||M!==null)&&(0,S.jsxs)(`div`,{className:`mt-4 flex flex-wrap items-center justify-center gap-x-4 gap-y-1 text-xs text-slate-400 sm:text-sm md:justify-start`,children:[(0,S.jsx)(`svg`,{className:`size-4 text-green-500`,viewBox:`0 0 24 24`,fill:`currentColor`,"aria-hidden":`true`,children:(0,S.jsx)(`path`,{d:`M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z`})}),x!==null&&(0,S.jsxs)(`span`,{children:[(0,S.jsx)(`span`,{className:`text-slate-400`,children:`Popularity:`}),` `,(0,S.jsx)(`span`,{className:`font-medium text-green-400`,children:x})]}),M!==null&&(0,S.jsxs)(`span`,{children:[(0,S.jsx)(`span`,{className:`text-slate-400`,children:`Followers:`}),` `,(0,S.jsx)(`span`,{className:`font-medium text-green-400`,children:ae(M)})]})]}),$;l[66]!==V||l[67]!==H||l[68]!==U||l[69]!==Z||l[70]!==_e||l[71]!==Q?($=(0,S.jsxs)(`div`,{className:`flex min-w-0 flex-1 flex-col text-center md:text-left`,children:[V,H,U,Z,_e,Q]}),l[66]=V,l[67]=H,l[68]=U,l[69]=Z,l[70]=_e,l[71]=Q,l[72]=$):$=l[72],l[73]!==B||l[74]!==$?(k=(0,S.jsxs)(`header`,{className:`mb-10 flex flex-col gap-8 md:flex-row`,children:[B,$]}),l[73]=B,l[74]=$,l[75]=k):k=l[75],l[76]===m?A=l[77]:(A=m.length>0&&(0,S.jsxs)(`section`,{className:`mb-10`,"aria-labelledby":`discography-heading`,children:[(0,S.jsxs)(`h2`,{id:`discography-heading`,className:`mb-4 flex items-center gap-2 text-xl font-semibold text-white`,children:[(0,S.jsx)(ee,{className:`size-5 text-amber-400`,"aria-hidden":`true`}),`Discography`]}),(0,S.jsx)(`div`,{className:`grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6`,children:m.map(ne)})]}),l[76]=m,l[77]=A),j=v.length>0&&(0,S.jsxs)(`section`,{"aria-labelledby":`tracks-heading`,children:[(0,S.jsxs)(`h2`,{id:`tracks-heading`,className:`mb-4 flex items-center gap-2 text-xl font-semibold text-white`,children:[(0,S.jsx)(i,{className:`size-5 text-amber-400`,"aria-hidden":`true`}),`All Tracks`]}),(0,S.jsx)(`div`,{className:`overflow-hidden rounded-xl border border-amber-500/10 bg-slate-800/30`,children:(0,S.jsx)(`div`,{className:`divide-y divide-slate-700/30`,children:v.map(e=>(0,S.jsx)(t,{id:e.id,title:e.title,duration:e.duration,subtitle:g(e.album_title)??`Unknown Album`,albumId:te(e.album_id),variant:`musician`,isPlaying:ue(e),isCurrentTrack:C.currentTrack?.id===e.id,onPlay:()=>le(e)},e.id))})})]}),l[0]=m,l[1]=C,l[2]=y,l[3]=p.id,l[4]=p.name,l[5]=p.spotify_followers,l[6]=p.spotify_popularity,l[7]=p.summary,l[8]=p.thumb,l[9]=b,l[10]=v,l[11]=w,l[12]=T,l[13]=E,l[14]=D,l[15]=O,l[16]=k,l[17]=A,l[18]=j}else w=l[11],T=l[12],E=l[13],D=l[14],O=l[15],k=l[16],A=l[17],j=l[18];let M;l[78]===Symbol.for(`react.memo_cache_sentinel`)?(M={tab:`musicians`},l[78]=M):M=l[78];let N;l[79]===Symbol.for(`react.memo_cache_sentinel`)?(N=(0,S.jsx)(`nav`,{className:`mt-8`,"aria-label":`Page navigation`,children:(0,S.jsxs)(c,{to:`/music`,search:M,className:`inline-flex items-center gap-2 rounded-md px-2 py-1 text-slate-400 transition-colors
            hover:text-amber-400 focus:text-amber-400 focus:ring-2 focus:ring-amber-400 focus:outline-none`,"aria-label":`Back to Musicians library`,children:[(0,S.jsx)(e,{className:`size-4`,"aria-hidden":`true`}),`Back to Musicians`]})}),l[79]=N):N=l[79];let P;return l[80]!==w||l[81]!==T||l[82]!==E||l[83]!==D||l[84]!==O||l[85]!==k||l[86]!==A||l[87]!==j?(P=(0,S.jsxs)(`article`,{className:w,"aria-labelledby":T,children:[E,D,O,k,A,j,N]}),l[80]=w,l[81]=T,l[82]=E,l[83]=D,l[84]=O,l[85]=k,l[86]=A,l[87]=j,l[88]=P):P=l[88],P}function ne(e){return(0,S.jsx)(T,{album:e},e.id)}function re(e){return(0,S.jsx)(`li`,{className:`rounded-full border border-amber-500/30 bg-slate-800/80 px-3 py-1 text-sm text-amber-200 backdrop-blur-sm`,children:e},e)}function ie(e){return e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${Math.floor(e/1e3)}K`:e.toString()}function T(e){let t=(0,x.c)(27),{album:n}=e,r;t[0]===n.cover?r=t[1]:(r=g(n.cover),t[0]=n.cover,t[1]=r);let i=r,a;t[2]===n.year?a=t[3]:(a=te(n.year),t[2]=n.year,t[3]=a);let o=a,s;t[4]===n.id?s=t[5]:(s=n.id.toString(),t[4]=n.id,t[5]=s);let l;t[6]===s?l=t[7]:(l={id:s},t[6]=s,t[7]=l);let u=`${n.title}${o?`, ${o}`:``}, ${n.track_count} ${n.track_count===1?`track`:`tracks`}`,d;t[8]!==n.title||t[9]!==i?(d=(0,S.jsx)(`div`,{className:`aspect-square overflow-hidden bg-slate-800`,children:i?(0,S.jsx)(`img`,{src:i,alt:n.title,className:`size-full object-cover transition-transform duration-300 group-hover:scale-105`}):(0,S.jsx)(`div`,{className:`flex size-full items-center justify-center`,children:(0,S.jsx)(ee,{className:`size-10 text-slate-600`,"aria-hidden":`true`})})}),t[8]=n.title,t[9]=i,t[10]=d):d=t[10];let f;t[11]===n.title?f=t[12]:(f=(0,S.jsx)(`h3`,{className:`truncate text-sm font-semibold text-white`,children:n.title}),t[11]=n.title,t[12]=f);let p;t[13]===o?p=t[14]:(p=o&&(0,S.jsxs)(`span`,{children:[o,` Â· `]}),t[13]=o,t[14]=p);let m=n.track_count===1?`track`:`tracks`,h;t[15]!==n.track_count||t[16]!==p||t[17]!==m?(h=(0,S.jsxs)(`p`,{className:`mt-0.5 text-xs text-slate-400`,children:[p,n.track_count,` `,m]}),t[15]=n.track_count,t[16]=p,t[17]=m,t[18]=h):h=t[18];let _;t[19]!==h||t[20]!==f?(_=(0,S.jsxs)(`div`,{className:`p-3`,children:[f,h]}),t[19]=h,t[20]=f,t[21]=_):_=t[21];let v;return t[22]!==_||t[23]!==l||t[24]!==u||t[25]!==d?(v=(0,S.jsx)(`article`,{className:`group animate-in duration-300 fade-in`,children:(0,S.jsxs)(c,{to:`/music/album/$id`,params:l,className:`block overflow-hidden rounded-lg border border-slate-800 bg-slate-900 transition-all
          hover:-translate-y-1 hover:border-amber-400/50 hover:shadow-xl hover:shadow-amber-400/20
          focus:border-amber-400 focus:ring-2 focus:ring-amber-400 focus:outline-none`,"aria-label":u,children:[d,_]})}),t[22]=_,t[23]=l,t[24]=u,t[25]=d,t[26]=v):v=t[26],v}export{C as component};