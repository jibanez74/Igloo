import{t as e}from"./useQuery-DYliyyeq.js";import{t}from"./circle-alert-BBYeejEm.js";import{t as n}from"./film-DVe3ZGJr.js";import{t as r}from"./house-BJ-gRVct.js";import{t as i}from"./music-DCJfo9yH.js";import{t as a}from"./star-C5KGbxfz.js";import{F as o,I as s,J as c,Mt as l,f as u,kt as d,p as f,q as p,vt as m}from"./index-B4Mm07st.js";import"./toast-helpers-N18T5b5Z.js";import"./dist-DRYwAtpY.js";import{a as h}from"./nullable-DZsmEyNt.js";import{n as g,r as _,t as v}from"./alert-DRXpCir_.js";import{t as y}from"./AlbumCard-ikU3iddX.js";var b=d(),x=l();function S(){let n=(0,b.c)(20),r;n[0]===Symbol.for(`react.memo_cache_sentinel`)?(r=f(),n[0]=r):r=n[0];let{data:a,isPending:o}=e(r),s;n[1]===a?s=n[2]:(s=a&&!a.error?a.data.albums:[],n[1]=a,n[2]=s);let c=s,l=a&&a.error,u;n[3]!==c||n[4]!==l||n[5]!==o?(u=()=>{if(!o)return l?`Failed to load albums`:c.length===0?`No albums in your library`:`${c.length} albums loaded`},n[3]=c,n[4]=l,n[5]=o,n[6]=u):u=n[6];let d=u,p;n[7]===d?p=n[8]:(p=d(),n[7]=d,n[8]=p);let y;n[9]===p?y=n[10]:(y=(0,x.jsx)(h,{message:p}),n[9]=p,n[10]=y);let S;n[11]===Symbol.for(`react.memo_cache_sentinel`)?(S=(0,x.jsx)(`h2`,{id:`recent-albums`,className:`mb-4 text-xl font-semibold tracking-tight md:text-2xl`,children:`Recently Added Albums`}),n[11]=S):S=n[11];let w;n[12]!==c||n[13]!==a||n[14]!==l||n[15]!==o?(w=o?(0,x.jsxs)(`div`,{className:`flex items-center justify-center py-12`,role:`status`,"aria-label":`Loading albums...`,children:[(0,x.jsx)(m,{className:`size-8 text-amber-400`}),(0,x.jsx)(`span`,{className:`sr-only`,children:`Loading albums...`})]}):l?(0,x.jsxs)(v,{variant:`destructive`,className:`border-red-500/20 bg-red-500/10 text-red-400`,children:[(0,x.jsx)(t,{className:`size-4`,"aria-hidden":`true`}),(0,x.jsx)(_,{children:`Error`}),(0,x.jsx)(g,{children:a.message||`Failed to load albums. Please try again later.`})]}):c.length>0?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(`span`,{tabIndex:0,className:`sr-only focus:not-sr-only focus:absolute focus:z-50 focus:rounded-md focus:bg-slate-800 focus:px-4 focus:py-2 focus:text-white`,"aria-label":`Recently Added Albums section, ${c.length} albums`,children:[`Recently Added Albums - `,c.length,` albums`]}),(0,x.jsx)(`div`,{className:`grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6`,children:c.map(C)})]}):(0,x.jsxs)(`div`,{className:`py-12 text-center`,children:[(0,x.jsx)(`div`,{className:`mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-slate-800`,children:(0,x.jsx)(i,{className:`size-6 text-slate-600`,"aria-hidden":`true`})}),(0,x.jsx)(`h3`,{className:`mb-2 text-lg font-semibold text-slate-300`,children:`No Albums Yet`}),(0,x.jsx)(`p`,{className:`mx-auto max-w-md text-slate-400`,children:`Your music library is empty. Add some albums to get started with your personal music collection.`})]}),n[12]=c,n[13]=a,n[14]=l,n[15]=o,n[16]=w):w=n[16];let T;return n[17]!==y||n[18]!==w?(T=(0,x.jsxs)(`section`,{role:`region`,"aria-labelledby":`recent-albums`,"aria-label":`Recently Added Albums`,className:`mt-8`,children:[y,S,w]}),n[17]=y,n[18]=w,n[19]=T):T=n[19],T}function C(e){return(0,x.jsx)(y,{album:e},e.id)}var w=d();function T(e){let t=(0,w.c)(29),{movie:r}=e,{id:i,title:l,poster_path:u,vote_average:d,release_date:f}=r,p=u?`${o}/${s}${u}`:null,m;t[0]===d?m=t[1]:(m=d?d.toFixed(1):null,t[0]=d,t[1]=m);let h=m,g;t[2]===f?g=t[3]:(g=f?new Date(f).getFullYear():null,t[2]=f,t[3]=g);let _=g,v=E,y;t[4]===i?y=t[5]:(y=i.toString(),t[4]=i,t[5]=y);let b;t[6]===y?b=t[7]:(b={id:y},t[6]=y,t[7]=b);let S=`${l}${_?`, ${_}`:``}${h?`, rated ${h} out of 10`:``}`,C;t[8]===p?C=t[9]:(C=p?(0,x.jsx)(`img`,{src:p,alt:``,width:`500`,height:`750`,loading:`lazy`,decoding:`async`,fetchPriority:`low`,className:`size-full object-cover transition-transform duration-300 group-hover:scale-105`}):(0,x.jsx)(`div`,{className:`flex size-full items-center justify-center`,children:(0,x.jsx)(n,{className:`size-10 text-slate-600`,"aria-hidden":`true`})}),t[8]=p,t[9]=C);let T;t[10]!==h||t[11]!==d?(T=h&&(0,x.jsxs)(`div`,{className:`absolute top-2 right-2 rounded-md px-2 py-0.5 text-xs font-bold shadow-lg ${v(d)}`,"aria-hidden":`true`,children:[(0,x.jsx)(a,{className:`mr-1 size-2.5 fill-current`,"aria-hidden":`true`}),h]}),t[10]=h,t[11]=d,t[12]=T):T=t[12];let D;t[13]===Symbol.for(`react.memo_cache_sentinel`)?(D=(0,x.jsx)(`div`,{className:`absolute inset-x-0 bottom-0 h-24 bg-linear-to-t from-black/90 via-black/50 to-transparent`}),t[13]=D):D=t[13];let O;t[14]!==C||t[15]!==T?(O=(0,x.jsxs)(`div`,{className:`relative aspect-2/3 bg-slate-800`,children:[C,T,D]}),t[14]=C,t[15]=T,t[16]=O):O=t[16];let k;t[17]===l?k=t[18]:(k=(0,x.jsx)(`h3`,{className:`truncate text-sm font-semibold text-white drop-shadow-lg`,children:l}),t[17]=l,t[18]=k);let A;t[19]===_?A=t[20]:(A=_&&(0,x.jsx)(`p`,{className:`mt-0.5 text-xs text-slate-300 drop-shadow-lg`,children:_}),t[19]=_,t[20]=A);let j;t[21]!==k||t[22]!==A?(j=(0,x.jsxs)(`div`,{className:`absolute inset-x-0 bottom-0 p-3`,children:[k,A]}),t[21]=k,t[22]=A,t[23]=j):j=t[23];let M;return t[24]!==j||t[25]!==b||t[26]!==S||t[27]!==O?(M=(0,x.jsx)(`article`,{className:`group relative animate-in overflow-hidden rounded-xl border border-slate-800 bg-slate-900 transition-all duration-300 fade-in hover:-translate-y-1 hover:border-cyan-500/50 hover:shadow-xl hover:shadow-cyan-500/20`,children:(0,x.jsxs)(c,{to:`/movies/in-theaters/$id`,params:b,className:`block rounded-xl focus:ring-2 focus:ring-cyan-400 focus:ring-offset-2 focus:ring-offset-slate-900 focus:outline-none`,"aria-label":S,children:[O,j]})}),t[24]=j,t[25]=b,t[26]=S,t[27]=O,t[28]=M):M=t[28],M}function E(e){return e>=7?`bg-teal-500 text-white`:e>=5?`bg-sky-500 text-white`:`bg-slate-500 text-white`}var D=d();function O(){let r=(0,D.c)(5),i;r[0]===Symbol.for(`react.memo_cache_sentinel`)?(i=u(),r[0]=i):i=r[0];let{data:a,isPending:o}=e(i),s;if(r[1]!==a||r[2]!==o){let e=a&&!a.error?[...a.data.movies].sort(A):[],i=a&&a.error,c;r[4]===Symbol.for(`react.memo_cache_sentinel`)?(c=(0,x.jsx)(`h2`,{id:`movies-in-theaters`,className:`mb-4 text-xl font-semibold tracking-tight md:text-2xl`,children:`Now Playing in Theaters`}),r[4]=c):c=r[4],s=(0,x.jsxs)(`section`,{role:`region`,"aria-labelledby":`movies-in-theaters`,"aria-label":`Now Playing in Theaters`,className:`mt-10`,children:[c,o?(0,x.jsxs)(`div`,{className:`flex items-center justify-center py-12`,role:`status`,"aria-label":`Loading movies...`,children:[(0,x.jsx)(m,{className:`size-8 text-cyan-400`}),(0,x.jsx)(`span`,{className:`sr-only`,children:`Loading movies...`})]}):i?(0,x.jsxs)(v,{variant:`destructive`,className:`border-red-500/20 bg-red-500/10 text-red-400`,children:[(0,x.jsx)(t,{className:`size-4`,"aria-hidden":`true`}),(0,x.jsx)(_,{children:`Error`}),(0,x.jsx)(g,{children:a.message||`Failed to load movies. Please try again later.`})]}):e.length>0?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(`span`,{tabIndex:0,className:`sr-only focus:not-sr-only focus:absolute focus:z-50 focus:rounded-md focus:bg-slate-800 focus:px-4 focus:py-2 focus:text-white`,"aria-label":`Now Playing in Theaters section, ${e.length} movies`,children:[`Now Playing in Theaters - `,e.length,` movies`]}),(0,x.jsx)(`div`,{className:`grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6`,children:e.map(k)})]}):(0,x.jsxs)(`div`,{className:`py-12 text-center`,children:[(0,x.jsx)(`div`,{className:`mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full border border-cyan-500/20 bg-slate-800`,children:(0,x.jsx)(n,{className:`size-6 text-cyan-600`,"aria-hidden":`true`})}),(0,x.jsx)(`h3`,{className:`mb-2 text-lg font-semibold text-slate-300`,children:`No Movies Available`}),(0,x.jsx)(`p`,{className:`mx-auto max-w-md text-slate-400`,children:`Unable to fetch movies currently playing in theaters. Check back later.`})]})]}),r[1]=a,r[2]=o,r[3]=s}else s=r[3];return s}function k(e){return(0,x.jsx)(T,{movie:e},e.id)}function A(e,t){let n=new Date(e.release_date).getTime();return new Date(t.release_date).getTime()-n}var j=d();const M=p(`/_auth/`)({component:N});function N(){let e=(0,j.c)(3),t,n;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,x.jsx)(`title`,{children:`Home - Igloo`}),n=(0,x.jsx)(`meta`,{name:`description`,content:`Welcome to Igloo - explore your personal media library with recently added movies, TV shows, music, and more.`}),e[0]=t,e[1]=n):(t=e[0],n=e[1]);let i;return e[2]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,x.jsxs)(x.Fragment,{children:[t,n,(0,x.jsxs)(`header`,{className:`mb-8`,children:[(0,x.jsxs)(`h1`,{className:`flex items-center gap-3 text-3xl font-semibold tracking-tight text-white md:text-4xl`,children:[(0,x.jsx)(r,{className:`size-6 text-amber-400`,"aria-hidden":`true`}),(0,x.jsx)(`span`,{children:`Welcome to Igloo`})]}),(0,x.jsx)(`p`,{className:`mt-2 max-w-2xl text-sm text-slate-400 md:text-base`,children:`Explore your personal media library â€” recently added movies, TV shows, music, and more.`})]}),(0,x.jsx)(`div`,{className:`grid grid-cols-1 gap-4 md:grid-cols-2`}),(0,x.jsx)(S,{}),(0,x.jsx)(O,{})]}),e[2]=i):i=e[2],i}export{M as Route};