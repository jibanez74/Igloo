import{t as e}from"./useQuery-DYliyyeq.js";import{a as t,i as n,n as r,o as i,r as a,s as o,t as s}from"./dialog-BHOyGAmv.js";import{t as c}from"./plus-DrfurNsD.js";import{t as l}from"./trash-2-CWBGQmm5.js";import{t as u}from"./user-wQOA0tR5.js";import{$ as d,$t as f,Ct as p,Dt as m,Et as h,J as g,Mt as _,N as v,Ot as y,Tt as b,_t as x,ct as S,en as C,j as w,jt as T,kt as E,tn as D,vt as O,y as ee,yt as k}from"./index-B4Mm07st.js";import{i as A,n as j,o as M,r as N,t as P}from"./dist-D9YK6Fjb.js";import{n as F,t as I}from"./dist-DoMa5iEY.js";import{a as te,i as L,n as ne,r as R,t as re}from"./dist-DehwVPxN.js";import{c as ie,d as ae,f as z,l as oe,p as B,u as V}from"./dist-m3SJwciI.js";import{a as H,i as U,n as se,r as W,t as G}from"./dist-BE3VF_ow.js";import{n as ce,o as le,t as K}from"./toast-helpers-N18T5b5Z.js";import{t as ue}from"./button-DUpsrK_w.js";import{t as de}from"./input-COadufZY.js";import{a as fe}from"./nullable-DZsmEyNt.js";var pe=y(`check`,[[`path`,{d:`M20 6 9 17l-5-5`,key:`1gmf2c`}]]),q=y(`ellipsis-vertical`,[[`circle`,{cx:`12`,cy:`12`,r:`1`,key:`41hilf`}],[`circle`,{cx:`12`,cy:`5`,r:`1`,key:`gxeob9`}],[`circle`,{cx:`12`,cy:`19`,r:`1`,key:`lyex9k`}]]),me=y(`grip-vertical`,[[`circle`,{cx:`9`,cy:`12`,r:`1`,key:`1vctgf`}],[`circle`,{cx:`9`,cy:`5`,r:`1`,key:`hp0tcf`}],[`circle`,{cx:`9`,cy:`19`,r:`1`,key:`fkjjf6`}],[`circle`,{cx:`15`,cy:`12`,r:`1`,key:`1tmaij`}],[`circle`,{cx:`15`,cy:`5`,r:`1`,key:`19l28e`}],[`circle`,{cx:`15`,cy:`19`,r:`1`,key:`f4zoj3`}]]),he=y(`heart`,[[`path`,{d:`M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5`,key:`mvr1a0`}]]),ge=y(`list-music`,[[`path`,{d:`M16 5H3`,key:`m91uny`}],[`path`,{d:`M11 12H3`,key:`51ecnj`}],[`path`,{d:`M11 19H3`,key:`zflm78`}],[`path`,{d:`M21 16V5`,key:`yxg4q8`}],[`circle`,{cx:`18`,cy:`16`,r:`3`,key:`1hluhg`}]]),J=D(C(),1),Y=_();function _e(e,t=[]){let n=[];function r(t,r){let i=J.createContext(r),a=n.length;n=[...n,r];let o=t=>{let{scope:n,children:r,...o}=t,s=n?.[e]?.[a]||i,c=J.useMemo(()=>o,Object.values(o));return(0,Y.jsx)(s.Provider,{value:c,children:r})};o.displayName=t+`Provider`;function s(n,o){let s=o?.[e]?.[a]||i,c=J.useContext(s);if(c)return c;if(r!==void 0)return r;throw Error(`\`${n}\` must be used within \`${t}\``)}return[o,s]}let i=()=>{let t=n.map(e=>J.createContext(e));return function(n){let r=n?.[e]||t;return J.useMemo(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return i.scopeName=e,[r,ve(i,...t)]}function ve(...e){let t=e[0];if(e.length===1)return t;let n=()=>{let n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=n.reduce((t,{useScope:n,scopeName:r})=>{let i=n(e)[`__scope${r}`];return{...t,...i}},{});return J.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}function ye(e){let t=be(e),n=J.forwardRef((e,n)=>{let{children:r,...i}=e,a=J.Children.toArray(r),o=a.find(Se);if(o){let e=o.props.children,r=a.map(t=>t===o?J.Children.count(e)>1?J.Children.only(null):J.isValidElement(e)?e.props.children:null:t);return(0,Y.jsx)(t,{...i,ref:n,children:J.isValidElement(e)?J.cloneElement(e,void 0,r):null})}return(0,Y.jsx)(t,{...i,ref:n,children:r})});return n.displayName=`${e}.Slot`,n}function be(e){let t=J.forwardRef((e,t)=>{let{children:n,...r}=e;if(J.isValidElement(n)){let e=we(n),i=Ce(r,n.props);return n.type!==J.Fragment&&(i.ref=t?I(t,e):e),J.cloneElement(n,i)}return J.Children.count(n)>1?J.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var xe=Symbol(`radix.slottable`);function Se(e){return J.isValidElement(e)&&typeof e.type==`function`&&`__radixId`in e.type&&e.type.__radixId===xe}function Ce(e,t){let n={...t};for(let r in t){let i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...e)=>{let t=a(...e);return i(...e),t}:i&&(n[r]=i):r===`style`?n[r]={...i,...a}:r===`className`&&(n[r]=[i,a].filter(Boolean).join(` `))}return{...e,...n}}function we(e){let t=Object.getOwnPropertyDescriptor(e.props,`ref`)?.get,n=t&&`isReactWarning`in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,`ref`)?.get,n=t&&`isReactWarning`in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}f();var Te=[`a`,`button`,`div`,`form`,`h2`,`h3`,`img`,`input`,`label`,`li`,`nav`,`ol`,`p`,`select`,`span`,`svg`,`ul`].reduce((e,t)=>{let n=ye(`Primitive.${t}`),r=J.forwardRef((e,r)=>{let{asChild:i,...a}=e,o=i?n:t;return typeof window<`u`&&(window[Symbol.for(`radix-ui`)]=!0),(0,Y.jsx)(o,{...a,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Ee(e,t=[]){let n=[];function r(t,r){let i=J.createContext(r),a=n.length;n=[...n,r];let o=t=>{let{scope:n,children:r,...o}=t,s=n?.[e]?.[a]||i,c=J.useMemo(()=>o,Object.values(o));return(0,Y.jsx)(s.Provider,{value:c,children:r})};o.displayName=t+`Provider`;function s(n,o){let s=o?.[e]?.[a]||i,c=J.useContext(s);if(c)return c;if(r!==void 0)return r;throw Error(`\`${n}\` must be used within \`${t}\``)}return[o,s]}let i=()=>{let t=n.map(e=>J.createContext(e));return function(n){let r=n?.[e]||t;return J.useMemo(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return i.scopeName=e,[r,De(i,...t)]}function De(...e){let t=e[0];if(e.length===1)return t;let n=()=>{let n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=n.reduce((t,{useScope:n,scopeName:r})=>{let i=n(e)[`__scope${r}`];return{...t,...i}},{});return J.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}function Oe(e){let t=ke(e),n=J.forwardRef((e,n)=>{let{children:r,...i}=e,a=J.Children.toArray(r),o=a.find(je);if(o){let e=o.props.children,r=a.map(t=>t===o?J.Children.count(e)>1?J.Children.only(null):J.isValidElement(e)?e.props.children:null:t);return(0,Y.jsx)(t,{...i,ref:n,children:J.isValidElement(e)?J.cloneElement(e,void 0,r):null})}return(0,Y.jsx)(t,{...i,ref:n,children:r})});return n.displayName=`${e}.Slot`,n}function ke(e){let t=J.forwardRef((e,t)=>{let{children:n,...r}=e;if(J.isValidElement(n)){let e=Ne(n),i=Me(r,n.props);return n.type!==J.Fragment&&(i.ref=t?I(t,e):e),J.cloneElement(n,i)}return J.Children.count(n)>1?J.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ae=Symbol(`radix.slottable`);function je(e){return J.isValidElement(e)&&typeof e.type==`function`&&`__radixId`in e.type&&e.type.__radixId===Ae}function Me(e,t){let n={...t};for(let r in t){let i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...e)=>{let t=a(...e);return i(...e),t}:i&&(n[r]=i):r===`style`?n[r]={...i,...a}:r===`className`&&(n[r]=[i,a].filter(Boolean).join(` `))}return{...e,...n}}function Ne(e){let t=Object.getOwnPropertyDescriptor(e.props,`ref`)?.get,n=t&&`isReactWarning`in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,`ref`)?.get,n=t&&`isReactWarning`in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Pe=D(f(),1),Fe=[`a`,`button`,`div`,`form`,`h2`,`h3`,`img`,`input`,`label`,`li`,`nav`,`ol`,`p`,`select`,`span`,`svg`,`ul`].reduce((e,t)=>{let n=Oe(`Primitive.${t}`),r=J.forwardRef((e,r)=>{let{asChild:i,...a}=e,o=i?n:t;return typeof window<`u`&&(window[Symbol.for(`radix-ui`)]=!0),(0,Y.jsx)(o,{...a,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Ie(e,t){e&&Pe.flushSync(()=>e.dispatchEvent(t))}var Le=[`Enter`,` `],Re=[`ArrowDown`,`PageUp`,`Home`],ze=[`ArrowUp`,`PageDown`,`End`],Be=[...Re,...ze],Ve={ltr:[...Le,`ArrowRight`],rtl:[...Le,`ArrowLeft`]},He={ltr:[`ArrowLeft`],rtl:[`ArrowRight`]},Ue=`Menu`,[We,Ge,Ke]=te(Ue),[X,qe]=Ee(Ue,[Ke,H,R]),Je=H(),Ye=R(),[Xe,Z]=X(Ue),[Ze,Qe]=X(Ue),$e=e=>{let{__scopeMenu:t,open:n=!1,children:r,dir:i,onOpenChange:a,modal:o=!0}=e,s=Je(t),[c,l]=J.useState(null),u=J.useRef(!1),d=N(a),f=L(i);return J.useEffect(()=>{let e=()=>{u.current=!0,document.addEventListener(`pointerdown`,t,{capture:!0,once:!0}),document.addEventListener(`pointermove`,t,{capture:!0,once:!0})},t=()=>u.current=!1;return document.addEventListener(`keydown`,e,{capture:!0}),()=>{document.removeEventListener(`keydown`,e,{capture:!0}),document.removeEventListener(`pointerdown`,t,{capture:!0}),document.removeEventListener(`pointermove`,t,{capture:!0})}},[]),(0,Y.jsx)(U,{...s,children:(0,Y.jsx)(Xe,{scope:t,open:n,onOpenChange:d,content:c,onContentChange:l,children:(0,Y.jsx)(Ze,{scope:t,onClose:J.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:o,children:r})})})};$e.displayName=Ue;var et=`MenuAnchor`,tt=J.forwardRef((e,t)=>{let{__scopeMenu:n,...r}=e,i=Je(n);return(0,Y.jsx)(G,{...i,...r,ref:t})});tt.displayName=et;var nt=`MenuPortal`,[rt,it]=X(nt,{forceMount:void 0}),at=e=>{let{__scopeMenu:t,forceMount:n,children:r,container:i}=e,a=Z(nt,t);return(0,Y.jsx)(rt,{scope:t,forceMount:n,children:(0,Y.jsx)(P,{present:n||a.open,children:(0,Y.jsx)(V,{asChild:!0,container:i,children:r})})})};at.displayName=nt;var Q=`MenuContent`,[ot,st]=X(Q),ct=J.forwardRef((e,t)=>{let n=it(Q,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,a=Z(Q,e.__scopeMenu),o=Qe(Q,e.__scopeMenu);return(0,Y.jsx)(We.Provider,{scope:e.__scopeMenu,children:(0,Y.jsx)(P,{present:r||a.open,children:(0,Y.jsx)(We.Slot,{scope:e.__scopeMenu,children:o.modal?(0,Y.jsx)(lt,{...i,ref:t}):(0,Y.jsx)(ut,{...i,ref:t})})})})}),lt=J.forwardRef((e,t)=>{let n=Z(Q,e.__scopeMenu),r=J.useRef(null),i=F(t,r);return J.useEffect(()=>{let e=r.current;if(e)return oe(e)},[]),(0,Y.jsx)(ft,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:M(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),ut=J.forwardRef((e,t)=>{let n=Z(Q,e.__scopeMenu);return(0,Y.jsx)(ft,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),dt=Oe(`MenuContent.ScrollLock`),ft=J.forwardRef((e,t)=>{let{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEntryFocus:c,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:m,...h}=e,g=Z(Q,n),_=Qe(Q,n),v=Je(n),y=Ye(n),b=Ge(n),[x,S]=J.useState(null),C=J.useRef(null),w=F(t,C,g.onContentChange),T=J.useRef(0),E=J.useRef(``),D=J.useRef(0),O=J.useRef(null),ee=J.useRef(`right`),k=J.useRef(0),A=m?ie:J.Fragment,j=m?{as:dt,allowPinchZoom:!0}:void 0,N=e=>{let t=E.current+e,n=b().filter(e=>!e.disabled),r=document.activeElement,i=n.find(e=>e.ref.current===r)?.textValue,a=Xt(n.map(e=>e.textValue),t,i),o=n.find(e=>e.textValue===a)?.ref.current;(function e(t){E.current=t,window.clearTimeout(T.current),t!==``&&(T.current=window.setTimeout(()=>e(``),1e3))})(t),o&&setTimeout(()=>o.focus())};J.useEffect(()=>()=>window.clearTimeout(T.current),[]),z();let P=J.useCallback(e=>ee.current===O.current?.side&&Qt(e,O.current?.area),[]);return(0,Y.jsx)(ot,{scope:n,searchRef:E,onItemEnter:J.useCallback(e=>{P(e)&&e.preventDefault()},[P]),onItemLeave:J.useCallback(e=>{P(e)||(C.current?.focus(),S(null))},[P]),onTriggerLeave:J.useCallback(e=>{P(e)&&e.preventDefault()},[P]),pointerGraceTimerRef:D,onPointerGraceIntentChange:J.useCallback(e=>{O.current=e},[]),children:(0,Y.jsx)(A,{...j,children:(0,Y.jsx)(ae,{asChild:!0,trapped:i,onMountAutoFocus:M(a,e=>{e.preventDefault(),C.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:(0,Y.jsx)(B,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:(0,Y.jsx)(ne,{asChild:!0,...y,dir:_.dir,orientation:`vertical`,loop:r,currentTabStopId:x,onCurrentTabStopIdChange:S,onEntryFocus:M(c,e=>{_.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,Y.jsx)(W,{role:`menu`,"aria-orientation":`vertical`,"data-state":Gt(g.open),"data-radix-menu-content":``,dir:_.dir,...v,...h,ref:w,style:{outline:`none`,...h.style},onKeyDown:M(h.onKeyDown,e=>{let t=e.target.closest(`[data-radix-menu-content]`)===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,r=e.key.length===1;t&&(e.key===`Tab`&&e.preventDefault(),!n&&r&&N(e.key));let i=C.current;if(e.target!==i||!Be.includes(e.key))return;e.preventDefault();let a=b().filter(e=>!e.disabled).map(e=>e.ref.current);ze.includes(e.key)&&a.reverse(),Jt(a)}),onBlur:M(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(T.current),E.current=``)}),onPointerMove:M(e.onPointerMove,$t(e=>{let t=e.target,n=k.current!==e.clientX;e.currentTarget.contains(t)&&n&&(ee.current=e.clientX>k.current?`right`:`left`,k.current=e.clientX)}))})})})})})})});ct.displayName=Q;var pt=`MenuGroup`,mt=J.forwardRef((e,t)=>{let{__scopeMenu:n,...r}=e;return(0,Y.jsx)(Fe.div,{role:`group`,...r,ref:t})});mt.displayName=pt;var ht=`MenuLabel`,gt=J.forwardRef((e,t)=>{let{__scopeMenu:n,...r}=e;return(0,Y.jsx)(Fe.div,{...r,ref:t})});gt.displayName=ht;var _t=`MenuItem`,vt=`menu.itemSelect`,yt=J.forwardRef((e,t)=>{let{disabled:n=!1,onSelect:r,...i}=e,a=J.useRef(null),o=Qe(_t,e.__scopeMenu),s=st(_t,e.__scopeMenu),c=F(t,a),l=J.useRef(!1),u=()=>{let e=a.current;if(!n&&e){let t=new CustomEvent(vt,{bubbles:!0,cancelable:!0});e.addEventListener(vt,e=>r?.(e),{once:!0}),Ie(e,t),t.defaultPrevented?l.current=!1:o.onClose()}};return(0,Y.jsx)(bt,{...i,ref:c,disabled:n,onClick:M(e.onClick,u),onPointerDown:t=>{e.onPointerDown?.(t),l.current=!0},onPointerUp:M(e.onPointerUp,e=>{l.current||e.currentTarget?.click()}),onKeyDown:M(e.onKeyDown,e=>{let t=s.searchRef.current!==``;n||t&&e.key===` `||Le.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});yt.displayName=_t;var bt=J.forwardRef((e,t)=>{let{__scopeMenu:n,disabled:r=!1,textValue:i,...a}=e,o=st(_t,n),s=Ye(n),c=J.useRef(null),l=F(t,c),[u,d]=J.useState(!1),[f,p]=J.useState(``);return J.useEffect(()=>{let e=c.current;e&&p((e.textContent??``).trim())},[a.children]),(0,Y.jsx)(We.ItemSlot,{scope:n,disabled:r,textValue:i??f,children:(0,Y.jsx)(re,{asChild:!0,...s,focusable:!r,children:(0,Y.jsx)(Fe.div,{role:`menuitem`,"data-highlighted":u?``:void 0,"aria-disabled":r||void 0,"data-disabled":r?``:void 0,...a,ref:l,onPointerMove:M(e.onPointerMove,$t(e=>{r?o.onItemLeave(e):(o.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:M(e.onPointerLeave,$t(e=>o.onItemLeave(e))),onFocus:M(e.onFocus,()=>d(!0)),onBlur:M(e.onBlur,()=>d(!1))})})})}),xt=`MenuCheckboxItem`,St=J.forwardRef((e,t)=>{let{checked:n=!1,onCheckedChange:r,...i}=e;return(0,Y.jsx)(At,{scope:e.__scopeMenu,checked:n,children:(0,Y.jsx)(yt,{role:`menuitemcheckbox`,"aria-checked":Kt(n)?`mixed`:n,...i,ref:t,"data-state":qt(n),onSelect:M(i.onSelect,()=>r?.(Kt(n)?!0:!n),{checkForDefaultPrevented:!1})})})});St.displayName=xt;var Ct=`MenuRadioGroup`,[wt,Tt]=X(Ct,{value:void 0,onValueChange:()=>{}}),Et=J.forwardRef((e,t)=>{let{value:n,onValueChange:r,...i}=e,a=N(r);return(0,Y.jsx)(wt,{scope:e.__scopeMenu,value:n,onValueChange:a,children:(0,Y.jsx)(mt,{...i,ref:t})})});Et.displayName=Ct;var Dt=`MenuRadioItem`,Ot=J.forwardRef((e,t)=>{let{value:n,...r}=e,i=Tt(Dt,e.__scopeMenu),a=n===i.value;return(0,Y.jsx)(At,{scope:e.__scopeMenu,checked:a,children:(0,Y.jsx)(yt,{role:`menuitemradio`,"aria-checked":a,...r,ref:t,"data-state":qt(a),onSelect:M(r.onSelect,()=>i.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Ot.displayName=Dt;var kt=`MenuItemIndicator`,[At,jt]=X(kt,{checked:!1}),Mt=J.forwardRef((e,t)=>{let{__scopeMenu:n,forceMount:r,...i}=e,a=jt(kt,n);return(0,Y.jsx)(P,{present:r||Kt(a.checked)||a.checked===!0,children:(0,Y.jsx)(Fe.span,{...i,ref:t,"data-state":qt(a.checked)})})});Mt.displayName=kt;var Nt=`MenuSeparator`,Pt=J.forwardRef((e,t)=>{let{__scopeMenu:n,...r}=e;return(0,Y.jsx)(Fe.div,{role:`separator`,"aria-orientation":`horizontal`,...r,ref:t})});Pt.displayName=Nt;var Ft=`MenuArrow`,It=J.forwardRef((e,t)=>{let{__scopeMenu:n,...r}=e,i=Je(n);return(0,Y.jsx)(se,{...i,...r,ref:t})});It.displayName=Ft;var Lt=`MenuSub`,[Rt,zt]=X(Lt),Bt=e=>{let{__scopeMenu:t,children:n,open:r=!1,onOpenChange:i}=e,a=Z(Lt,t),o=Je(t),[s,c]=J.useState(null),[l,u]=J.useState(null),d=N(i);return J.useEffect(()=>(a.open===!1&&d(!1),()=>d(!1)),[a.open,d]),(0,Y.jsx)(U,{...o,children:(0,Y.jsx)(Xe,{scope:t,open:r,onOpenChange:d,content:l,onContentChange:u,children:(0,Y.jsx)(Rt,{scope:t,contentId:j(),triggerId:j(),trigger:s,onTriggerChange:c,children:n})})})};Bt.displayName=Lt;var Vt=`MenuSubTrigger`,Ht=J.forwardRef((e,t)=>{let n=Z(Vt,e.__scopeMenu),r=Qe(Vt,e.__scopeMenu),i=zt(Vt,e.__scopeMenu),a=st(Vt,e.__scopeMenu),o=J.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:c}=a,l={__scopeMenu:e.__scopeMenu},u=J.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return J.useEffect(()=>u,[u]),J.useEffect(()=>{let e=s.current;return()=>{window.clearTimeout(e),c(null)}},[s,c]),(0,Y.jsx)(tt,{asChild:!0,...l,children:(0,Y.jsx)(bt,{id:i.triggerId,"aria-haspopup":`menu`,"aria-expanded":n.open,"aria-controls":i.contentId,"data-state":Gt(n.open),...e,ref:I(t,i.onTriggerChange),onClick:t=>{e.onClick?.(t),!(e.disabled||t.defaultPrevented)&&(t.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:M(e.onPointerMove,$t(t=>{a.onItemEnter(t),!t.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:M(e.onPointerLeave,$t(e=>{u();let t=n.content?.getBoundingClientRect();if(t){let r=n.content?.dataset.side,i=r===`right`,o=i?-5:5,c=t[i?`left`:`right`],l=t[i?`right`:`left`];a.onPointerGraceIntentChange({area:[{x:e.clientX+o,y:e.clientY},{x:c,y:t.top},{x:l,y:t.top},{x:l,y:t.bottom},{x:c,y:t.bottom}],side:r}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(e),e.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:M(e.onKeyDown,t=>{let i=a.searchRef.current!==``;e.disabled||i&&t.key===` `||Ve[r.dir].includes(t.key)&&(n.onOpenChange(!0),n.content?.focus(),t.preventDefault())})})})});Ht.displayName=Vt;var Ut=`MenuSubContent`,Wt=J.forwardRef((e,t)=>{let n=it(Q,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,a=Z(Q,e.__scopeMenu),o=Qe(Q,e.__scopeMenu),s=zt(Ut,e.__scopeMenu),c=J.useRef(null),l=F(t,c);return(0,Y.jsx)(We.Provider,{scope:e.__scopeMenu,children:(0,Y.jsx)(P,{present:r||a.open,children:(0,Y.jsx)(We.Slot,{scope:e.__scopeMenu,children:(0,Y.jsx)(ft,{id:s.contentId,"aria-labelledby":s.triggerId,...i,ref:l,align:`start`,side:o.dir===`rtl`?`left`:`right`,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{o.isUsingKeyboardRef.current&&c.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:M(e.onFocusOutside,e=>{e.target!==s.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:M(e.onEscapeKeyDown,e=>{o.onClose(),e.preventDefault()}),onKeyDown:M(e.onKeyDown,e=>{let t=e.currentTarget.contains(e.target),n=He[o.dir].includes(e.key);t&&n&&(a.onOpenChange(!1),s.trigger?.focus(),e.preventDefault())})})})})})});Wt.displayName=Ut;function Gt(e){return e?`open`:`closed`}function Kt(e){return e===`indeterminate`}function qt(e){return Kt(e)?`indeterminate`:e?`checked`:`unchecked`}function Jt(e){let t=document.activeElement;for(let n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Yt(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function Xt(e,t,n){let r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,i=n?e.indexOf(n):-1,a=Yt(e,Math.max(i,0));r.length===1&&(a=a.filter(e=>e!==n));let o=a.find(e=>e.toLowerCase().startsWith(r.toLowerCase()));return o===n?void 0:o}function Zt(e,t){let{x:n,y:r}=e,i=!1;for(let e=0,a=t.length-1;e<t.length;a=e++){let o=t[e],s=t[a],c=o.x,l=o.y,u=s.x,d=s.y;l>r!=d>r&&n<(u-c)*(r-l)/(d-l)+c&&(i=!i)}return i}function Qt(e,t){return t?Zt({x:e.clientX,y:e.clientY},t):!1}function $t(e){return t=>t.pointerType===`mouse`?e(t):void 0}var en=$e,tn=tt,nn=at,rn=ct,an=mt,on=gt,sn=yt,cn=St,ln=Et,un=Ot,dn=Mt,fn=Pt,pn=It,mn=Ht,hn=Wt,gn=`DropdownMenu`,[_n,vn]=_e(gn,[qe]),$=qe(),[yn,bn]=_n(gn),xn=e=>{let{__scopeDropdownMenu:t,children:n,dir:r,open:i,defaultOpen:a,onOpenChange:o,modal:s=!0}=e,c=$(t),l=J.useRef(null),[u,d]=A({prop:i,defaultProp:a??!1,onChange:o,caller:gn});return(0,Y.jsx)(yn,{scope:t,triggerId:j(),triggerRef:l,contentId:j(),open:u,onOpenChange:d,onOpenToggle:J.useCallback(()=>d(e=>!e),[d]),modal:s,children:(0,Y.jsx)(en,{...c,open:u,onOpenChange:d,dir:r,modal:s,children:n})})};xn.displayName=gn;var Sn=`DropdownMenuTrigger`,Cn=J.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,disabled:r=!1,...i}=e,a=bn(Sn,n),o=$(n);return(0,Y.jsx)(tn,{asChild:!0,...o,children:(0,Y.jsx)(Te.button,{type:`button`,id:a.triggerId,"aria-haspopup":`menu`,"aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?`open`:`closed`,"data-disabled":r?``:void 0,disabled:r,...i,ref:I(t,a.triggerRef),onPointerDown:M(e.onPointerDown,e=>{!r&&e.button===0&&e.ctrlKey===!1&&(a.onOpenToggle(),a.open||e.preventDefault())}),onKeyDown:M(e.onKeyDown,e=>{r||([`Enter`,` `].includes(e.key)&&a.onOpenToggle(),e.key===`ArrowDown`&&a.onOpenChange(!0),[`Enter`,` `,`ArrowDown`].includes(e.key)&&e.preventDefault())})})})});Cn.displayName=Sn;var wn=`DropdownMenuPortal`,Tn=e=>{let{__scopeDropdownMenu:t,...n}=e,r=$(t);return(0,Y.jsx)(nn,{...r,...n})};Tn.displayName=wn;var En=`DropdownMenuContent`,Dn=J.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=bn(En,n),a=$(n),o=J.useRef(!1);return(0,Y.jsx)(rn,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:t,onCloseAutoFocus:M(e.onCloseAutoFocus,e=>{o.current||i.triggerRef.current?.focus(),o.current=!1,e.preventDefault()}),onInteractOutside:M(e.onInteractOutside,e=>{let t=e.detail.originalEvent,n=t.button===0&&t.ctrlKey===!0,r=t.button===2||n;(!i.modal||r)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":`var(--radix-popper-transform-origin)`,"--radix-dropdown-menu-content-available-width":`var(--radix-popper-available-width)`,"--radix-dropdown-menu-content-available-height":`var(--radix-popper-available-height)`,"--radix-dropdown-menu-trigger-width":`var(--radix-popper-anchor-width)`,"--radix-dropdown-menu-trigger-height":`var(--radix-popper-anchor-height)`}})});Dn.displayName=En;var On=`DropdownMenuGroup`,kn=J.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=$(n);return(0,Y.jsx)(an,{...i,...r,ref:t})});kn.displayName=On;var An=`DropdownMenuLabel`,jn=J.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=$(n);return(0,Y.jsx)(on,{...i,...r,ref:t})});jn.displayName=An;var Mn=`DropdownMenuItem`,Nn=J.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=$(n);return(0,Y.jsx)(sn,{...i,...r,ref:t})});Nn.displayName=Mn;var Pn=`DropdownMenuCheckboxItem`,Fn=J.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=$(n);return(0,Y.jsx)(cn,{...i,...r,ref:t})});Fn.displayName=Pn;var In=`DropdownMenuRadioGroup`,Ln=J.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=$(n);return(0,Y.jsx)(ln,{...i,...r,ref:t})});Ln.displayName=In;var Rn=`DropdownMenuRadioItem`,zn=J.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=$(n);return(0,Y.jsx)(un,{...i,...r,ref:t})});zn.displayName=Rn;var Bn=`DropdownMenuItemIndicator`,Vn=J.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=$(n);return(0,Y.jsx)(dn,{...i,...r,ref:t})});Vn.displayName=Bn;var Hn=`DropdownMenuSeparator`,Un=J.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=$(n);return(0,Y.jsx)(fn,{...i,...r,ref:t})});Un.displayName=Hn;var Wn=`DropdownMenuArrow`,Gn=J.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=$(n);return(0,Y.jsx)(pn,{...i,...r,ref:t})});Gn.displayName=Wn;var Kn=`DropdownMenuSubTrigger`,qn=J.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=$(n);return(0,Y.jsx)(mn,{...i,...r,ref:t})});qn.displayName=Kn;var Jn=`DropdownMenuSubContent`,Yn=J.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,i=$(n);return(0,Y.jsx)(hn,{...i,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":`var(--radix-popper-transform-origin)`,"--radix-dropdown-menu-content-available-width":`var(--radix-popper-available-width)`,"--radix-dropdown-menu-content-available-height":`var(--radix-popper-available-height)`,"--radix-dropdown-menu-trigger-width":`var(--radix-popper-anchor-width)`,"--radix-dropdown-menu-trigger-height":`var(--radix-popper-anchor-height)`}})});Yn.displayName=Jn;var Xn=xn,Zn=Cn,Qn=Tn,$n=Dn,er=Nn,tr=Un,nr=E();function rr(e){let t=(0,nr.c)(4),n;t[0]===e?n=t[1]:({...n}=e,t[0]=e,t[1]=n);let r;return t[2]===n?r=t[3]:(r=(0,Y.jsx)(Xn,{"data-slot":`dropdown-menu`,...n}),t[2]=n,t[3]=r),r}function ir(e){let t=(0,nr.c)(4),n;t[0]===e?n=t[1]:({...n}=e,t[0]=e,t[1]=n);let r;return t[2]===n?r=t[3]:(r=(0,Y.jsx)(Zn,{"data-slot":`dropdown-menu-trigger`,...n}),t[2]=n,t[3]=r),r}function ar(e){let t=(0,nr.c)(10),n,r,i;t[0]===e?(n=t[1],r=t[2],i=t[3]):({className:n,sideOffset:i,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i);let a=i===void 0?4:i,o;t[4]===n?o=t[5]:(o=k(`z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-32 origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95`,n),t[4]=n,t[5]=o);let s;return t[6]!==r||t[7]!==a||t[8]!==o?(s=(0,Y.jsx)(Qn,{children:(0,Y.jsx)($n,{"data-slot":`dropdown-menu-content`,sideOffset:a,className:o,...r})}),t[6]=r,t[7]=a,t[8]=o,t[9]=s):s=t[9],s}function or(e){let t=(0,nr.c)(12),n,r,i,a;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4]):({className:n,inset:r,variant:a,...i}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a);let o=a===void 0?`default`:a,s;t[5]===n?s=t[6]:(s=k(`relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none focus:bg-accent focus:text-accent-foreground data-disabled:pointer-events-none data-disabled:opacity-50 data-inset:pl-8 data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 data-[variant=destructive]:focus:text-destructive dark:data-[variant=destructive]:focus:bg-destructive/20 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 [&_svg:not([class*='text-'])]:text-muted-foreground data-[variant=destructive]:*:[svg]:text-destructive!`,n),t[5]=n,t[6]=s);let c;return t[7]!==r||t[8]!==i||t[9]!==s||t[10]!==o?(c=(0,Y.jsx)(er,{"data-slot":`dropdown-menu-item`,"data-inset":r,"data-variant":o,className:s,...i}),t[7]=r,t[8]=i,t[9]=s,t[10]=o,t[11]=c):c=t[11],c}function sr(e){let t=(0,nr.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=k(`-mx-1 my-1 h-px bg-border`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Y.jsx)(tr,{"data-slot":`dropdown-menu-separator`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}var cr=E();function lr(c){let l=(0,cr.c)(53),{open:u,onOpenChange:f,trackId:p,trackTitle:m}=c,[h,g]=(0,J.useState)(``),_;l[0]===Symbol.for(`react.memo_cache_sentinel`)?(_=new Set,l[0]=_):_=l[0];let[y,b]=(0,J.useState)(_),[x,S]=(0,J.useState)(``),C=T(),E;l[1]===Symbol.for(`react.memo_cache_sentinel`)?(E=ee(),l[1]=E):E=l[1];let D;l[2]===u?D=l[3]:(D={...E,enabled:u},l[2]=u,l[3]=D);let{data:k,isLoading:A}=e(D),j;l[4]===k?j=l[5]:(j=k?.error===!1?k.data.playlists:[],l[4]=k,l[5]=j);let M=j,N;l[6]===M?N=l[7]:(N=M.filter(fr),l[6]=M,l[7]=N);let P=N,F;bb0:{if(!h.trim()){F=P;break bb0}let e;if(l[8]!==P||l[9]!==h){let t=h.toLowerCase();e=P.filter(e=>e.name.toLowerCase().includes(t)),l[8]=P,l[9]=h,l[10]=e}else e=l[10];F=e}let I=F,te;l[11]===p?te=l[12]:(te=async e=>await Promise.all(e.map(e=>d(e,[p]))),l[11]=p,l[12]=te);let L=o({mutationFn:te,onSuccess:e=>{e.reduce(dr,0)>0?(y.forEach(e=>{C.invalidateQueries({queryKey:[v,e]})}),C.invalidateQueries({queryKey:[w]}),ce(`Track`,`to ${y.size} playlist(s)`),ne()):le(`Track already in selected playlists`)},onError:ur}),ne=()=>{g(``),b(new Set),S(``),f(!1)},R;l[13]===Symbol.for(`react.memo_cache_sentinel`)?(R=(e,t)=>{b(n=>{let r=new Set(n);return r.has(e)?(r.delete(e),S(`${t} deselected. ${r.size} playlist${r.size===1?``:`s`} selected.`)):(r.add(e),S(`${t} selected. ${r.size} playlist${r.size===1?``:`s`} selected.`)),r})},l[13]=R):R=l[13];let re=R,ie;l[14]!==L||l[15]!==y?(ie=()=>{y.size!==0&&L.mutate(Array.from(y))},l[14]=L,l[15]=y,l[16]=ie):ie=l[16];let ae=ie,z;l[17]===x?z=l[18]:(z=(0,Y.jsx)(fe,{message:x}),l[17]=x,l[18]=z);let oe;l[19]===Symbol.for(`react.memo_cache_sentinel`)?(oe=(0,Y.jsx)(i,{className:`text-white`,children:`Add to Playlist`}),l[19]=oe):oe=l[19];let B;l[20]===m?B=l[21]:(B=(0,Y.jsxs)(t,{children:[oe,(0,Y.jsxs)(a,{className:`text-slate-400`,children:[`Add "`,m,`" to one or more playlists.`]})]}),l[20]=m,l[21]=B);let V;l[22]!==P.length||l[23]!==h?(V=P.length>5&&(0,Y.jsx)(de,{type:`text`,placeholder:`Search playlists...`,value:h,onChange:e=>g(e.target.value),className:`border-slate-700 bg-slate-800 text-white placeholder:text-slate-500`}),l[22]=P.length,l[23]=h,l[24]=V):V=l[24];let H;l[25]!==P.length||l[26]!==I||l[27]!==A||l[28]!==y?(H=(0,Y.jsx)(`div`,{className:`max-h-64 overflow-y-auto`,children:A?(0,Y.jsx)(`div`,{className:`flex justify-center py-8`,children:(0,Y.jsx)(O,{className:`size-6 text-amber-400`})}):I.length===0?(0,Y.jsxs)(`div`,{className:`rounded-lg border border-slate-700/50 bg-slate-800/50 py-8 text-center`,children:[(0,Y.jsx)(`div`,{className:`mx-auto mb-3 flex size-12 items-center justify-center rounded-full bg-linear-to-br from-slate-700 via-slate-800 to-cyan-900/40`,children:(0,Y.jsx)(ge,{className:`size-5 text-cyan-200/40`,"aria-hidden":`true`})}),(0,Y.jsx)(`p`,{className:`text-slate-400`,children:P.length===0?`No playlists yet. Create one to get started.`:`No playlists match your search.`})]}):(0,Y.jsx)(`ul`,{className:`space-y-1`,children:I.map(e=>(0,Y.jsx)(`li`,{children:(0,Y.jsxs)(`button`,{type:`button`,onClick:()=>re(e.id,e.name),"aria-pressed":y.has(e.id),className:`flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left transition-colors ${y.has(e.id)?`bg-amber-500/20 text-white`:`text-slate-300 hover:bg-slate-800`}`,children:[(0,Y.jsx)(`div`,{className:`flex size-5 items-center justify-center rounded-sm border ${y.has(e.id)?`border-amber-500 bg-amber-500`:`border-slate-600`}`,children:y.has(e.id)&&(0,Y.jsx)(pe,{className:`size-3 text-slate-900`,"aria-hidden":`true`})}),(0,Y.jsxs)(`div`,{className:`min-w-0 flex-1`,children:[(0,Y.jsx)(`p`,{className:`truncate font-medium`,children:e.name}),(0,Y.jsxs)(`p`,{className:`text-xs text-slate-400`,children:[e.track_count,` tracks`]})]})]})},e.id))})}),l[25]=P.length,l[26]=I,l[27]=A,l[28]=y,l[29]=H):H=l[29];let U;l[30]!==ne||l[31]!==L.isPending?(U=(0,Y.jsx)(ue,{type:`button`,variant:`outline`,onClick:ne,disabled:L.isPending,className:`border-slate-600 bg-transparent text-slate-300 hover:bg-slate-800 hover:text-white`,children:`Cancel`}),l[30]=ne,l[31]=L.isPending,l[32]=U):U=l[32];let se=L.isPending||y.size===0,W;l[33]!==L.isPending||l[34]!==y.size?(W=L.isPending?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(O,{className:`mr-2 size-4`}),`Adding...`]}):`Add to ${y.size||``} Playlist${y.size===1?``:`s`}`,l[33]=L.isPending,l[34]=y.size,l[35]=W):W=l[35];let G;l[36]!==ae||l[37]!==se||l[38]!==W?(G=(0,Y.jsx)(ue,{type:`button`,variant:`accent`,onClick:ae,disabled:se,children:W}),l[36]=ae,l[37]=se,l[38]=W,l[39]=G):G=l[39];let K;l[40]!==U||l[41]!==G?(K=(0,Y.jsxs)(n,{className:`gap-2 sm:gap-0`,children:[U,G]}),l[40]=U,l[41]=G,l[42]=K):K=l[42];let q;l[43]!==z||l[44]!==B||l[45]!==V||l[46]!==H||l[47]!==K?(q=(0,Y.jsxs)(r,{className:`border-slate-700 bg-slate-900 sm:max-w-md`,children:[z,B,V,H,K]}),l[43]=z,l[44]=B,l[45]=V,l[46]=H,l[47]=K,l[48]=q):q=l[48];let me;return l[49]!==f||l[50]!==u||l[51]!==q?(me=(0,Y.jsx)(s,{open:u,onOpenChange:f,children:q}),l[49]=f,l[50]=u,l[51]=q,l[52]=me):me=l[52],me}function ur(){K(`add track to playlists`)}function dr(e,t){return t.error===!1?e+(t.data?.added??0):e}function fr(e){return e.can_edit}var pr=E();function mr(e){let t=(0,pr.c)(27),{trackId:n,trackTitle:r,albumId:i,musicianId:a,canRemoveFromPlaylist:o,onRemoveFromPlaylist:s}=e,d=o===void 0?!1:o,[f,p]=(0,J.useState)(!1),h=i!=null&&i>0,_=a!=null&&a>0,v=d&&s,y;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(y=(0,Y.jsx)(ir,{asChild:!0,children:(0,Y.jsx)(`button`,{className:`flex size-8 shrink-0 items-center justify-center rounded-full text-slate-400 transition-colors hover:bg-slate-700 hover:text-white`,"aria-label":`More actions`,children:(0,Y.jsx)(q,{className:`size-4`,"aria-hidden":`true`})})}),t[0]=y):y=t[0];let b;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(b=()=>p(!0),t[1]=b):b=t[1];let x;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(x=(0,Y.jsxs)(or,{onClick:b,className:`cursor-pointer hover:bg-slate-700`,children:[(0,Y.jsx)(c,{className:`mr-2 size-4 text-amber-400`,"aria-hidden":`true`}),`Add to Playlist`]}),t[2]=x):x=t[2];let S;t[3]!==h||t[4]!==_?(S=(h||_)&&(0,Y.jsx)(sr,{className:`bg-slate-700`}),t[3]=h,t[4]=_,t[5]=S):S=t[5];let C;t[6]!==i||t[7]!==h?(C=h&&(0,Y.jsx)(or,{asChild:!0,className:`cursor-pointer hover:bg-slate-700`,children:(0,Y.jsxs)(g,{to:`/music/album/$id`,params:{id:i.toString()},children:[(0,Y.jsx)(m,{className:`mr-2 size-4 text-amber-400`,"aria-hidden":`true`}),`Go to Album`]})}),t[6]=i,t[7]=h,t[8]=C):C=t[8];let w;t[9]!==_||t[10]!==a?(w=_&&(0,Y.jsx)(or,{asChild:!0,className:`cursor-pointer hover:bg-slate-700`,children:(0,Y.jsxs)(g,{to:`/music/musician/$id`,params:{id:a.toString()},children:[(0,Y.jsx)(u,{className:`mr-2 size-4 text-amber-400`,"aria-hidden":`true`}),`Go to Artist`]})}),t[9]=_,t[10]=a,t[11]=w):w=t[11];let T;t[12]!==v||t[13]!==s?(T=v&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(sr,{className:`bg-slate-700`}),(0,Y.jsxs)(or,{onClick:s,className:`cursor-pointer text-red-400 hover:bg-slate-700 hover:text-red-300 focus:text-red-300`,children:[(0,Y.jsx)(l,{className:`mr-2 size-4`,"aria-hidden":`true`}),`Remove from Playlist`]})]}),t[12]=v,t[13]=s,t[14]=T):T=t[14];let E;t[15]!==S||t[16]!==C||t[17]!==w||t[18]!==T?(E=(0,Y.jsxs)(rr,{children:[y,(0,Y.jsxs)(ar,{align:`end`,className:`border-slate-700 bg-slate-800 text-white`,children:[x,S,C,w,T]})]}),t[15]=S,t[16]=C,t[17]=w,t[18]=T,t[19]=E):E=t[19];let D;t[20]!==f||t[21]!==n||t[22]!==r?(D=(0,Y.jsx)(lr,{open:f,onOpenChange:p,trackId:n,trackTitle:r}),t[20]=f,t[21]=n,t[22]=r,t[23]=D):D=t[23];let O;return t[24]!==D||t[25]!==E?(O=(0,Y.jsxs)(Y.Fragment,{children:[E,D]}),t[24]=D,t[25]=E,t[26]=O):O=t[26],O}var hr=(0,J.forwardRef)(function({id:e,title:t,duration:n,trackIndex:r,subtitle:i,genres:a,albumId:o,albumTitle:s,musicianId:c,musicianName:l,variant:u,isPlaying:d=!1,isCurrentTrack:f=!1,isLiked:m=!1,onPlay:g,showActionsMenu:_,onLikeToggle:v,canRemoveFromPlaylist:y=!1,onRemoveFromPlaylist:C,isDraggable:w=!1,isDragging:T=!1,dragHandleProps:E},D){let[O,ee]=(0,J.useState)(m),[k,A]=(0,J.useState)(!1);(0,J.useEffect)(()=>{ee(m)},[m]);let j=_??u===`library`,M=async t=>{if(t.stopPropagation(),!k){A(!0);try{let t=await S(e);!t.error&&t.data&&(ee(t.data.is_liked),v?.(e,t.data.is_liked))}catch(e){console.error(`Failed to toggle like:`,e)}finally{A(!1)}}},N=()=>{let e=`flex size-9 shrink-0 items-center justify-center rounded-full bg-amber-500 text-slate-900 transition-all hover:bg-amber-400`;return u===`library`||u===`playlist`?e:u===`musician`?`${e} ${f?`opacity-100`:`opacity-100 sm:opacity-0 sm:group-hover:opacity-100`}`:`${e} ${f?`opacity-100`:`opacity-0 group-hover:opacity-100`}`};return(0,Y.jsxs)(`div`,{ref:D,className:`group flex items-center gap-3 px-3 py-3 transition-all duration-150 hover:bg-slate-800/50 sm:gap-4 sm:px-4 ${f?`bg-slate-800/40`:``} ${T?`opacity-50 shadow-lg ring-2 ring-amber-400/50`:``}`,children:[w&&(0,Y.jsx)(`button`,{...E,className:`flex size-8 shrink-0 cursor-grab items-center justify-center rounded-sm text-slate-400 transition-colors hover:bg-slate-700 hover:text-slate-300 active:cursor-grabbing`,"aria-label":`Drag to reorder`,children:(0,Y.jsx)(me,{className:`size-4`,"aria-hidden":`true`})}),u===`album`&&r!=null&&(0,Y.jsx)(`span`,{className:`w-8 shrink-0 text-center font-mono text-sm`,children:d?(0,Y.jsx)(p,{className:`mx-auto size-4 animate-pulse text-amber-400`,"aria-hidden":`true`}):(0,Y.jsx)(`span`,{className:`${f?`text-amber-400`:`text-slate-400`} group-hover:text-amber-400`,children:r})}),(0,Y.jsxs)(`div`,{className:`min-w-0 flex-1`,children:[(0,Y.jsx)(`p`,{className:`truncate font-medium ${f?`text-amber-400`:`text-white`}`,children:t}),u===`album`&&a&&a.length>0?(0,Y.jsx)(`p`,{className:`mt-0.5 truncate text-sm text-amber-400/60`,children:a.join(`, `)}):i?(0,Y.jsx)(`p`,{className:`truncate text-sm text-slate-400`,children:i}):null]}),(0,Y.jsx)(`span`,{className:`shrink-0 text-sm text-slate-400 tabular-nums`,children:x(n)}),(0,Y.jsx)(`button`,{onClick:M,disabled:k,className:`flex size-8 shrink-0 items-center justify-center rounded-full transition-all ${O?`text-red-500 hover:text-red-400`:`text-slate-400 hover:text-red-400`} ${k?`opacity-50`:``}`,title:O?`Remove from liked`:`Add to liked`,"aria-label":O?`Remove ${t} from liked`:`Add ${t} to liked`,children:(0,Y.jsx)(he,{className:`size-4 ${O?`fill-current`:``}`,"aria-hidden":`true`})}),j&&(0,Y.jsx)(mr,{trackId:e,trackTitle:t,albumId:o,albumTitle:s,musicianId:c,musicianName:l,canRemoveFromPlaylist:y,onRemoveFromPlaylist:C}),(0,Y.jsx)(`button`,{onClick:g,className:N(),title:d?`Pause track`:`Play track`,"aria-label":d?`Pause ${t}`:`Play ${t}`,children:d?(0,Y.jsx)(h,{className:`size-3 fill-current`,"aria-hidden":`true`}):(0,Y.jsx)(b,{className:`size-3 fill-current`,"aria-hidden":`true`})})]})});export{ir as a,or as i,rr as n,ge as o,ar as r,hr as t};