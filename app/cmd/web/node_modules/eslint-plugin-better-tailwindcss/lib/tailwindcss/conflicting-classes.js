// runner.js
import { resolve } from "node:path";
import { createSyncFn } from "synckit";
import { getWorkerOptions } from "../async-utils/worker.js";
export let getConflictingClasses = () => { throw new Error("getConflictingClasses() called before being initialized"); };
export function createGetConflictingClasses(ctx) {
    const workerPath = getWorkerPath(ctx);
    const workerOptions = getWorkerOptions();
    getConflictingClasses = createSyncFn(workerPath, workerOptions);
    return getConflictingClasses;
}
function getWorkerPath(ctx) {
    return resolve(getCurrentDirectory(), `./conflicting-classes.async.worker.v${ctx.version.major}.js`);
}
function getCurrentDirectory() {
    // eslint-disable-next-line eslint-plugin-typescript/prefer-ts-expect-error
    // @ts-ignore - `import.meta` doesn't exist in CommonJS -> will be transformed in build step
    return import.meta.dirname;
}
//# sourceMappingURL=conflicting-classes.js.map