import{t as u,i as t,b as a,m as j,r as p,f as O,s as y,u as le,q as ae,v as H,w as W,S as oe,x as J,g as N,n as de,y as ce,z as ue,A as X,a as Q,B as ve,C as ge,D as me,E as fe,o as be,G as he,H as xe,I as Z}from"./index-DNqQGOWK.js";import{g as A}from"./getImgSrc-ClS6Ftii.js";function $e(l){const s=["January","February","March","April","May","June","July","August","September","October","November","December"],e=new Date(l).getDate(),i=new Date(l).getFullYear();return`${s[new Date(l).getMonth()]} ${e}, ${i}`}function pe(l){const s=Math.floor(l/60),e=l%60;return`${s}h ${e}m`}function ee(l){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(l)}var _e=u('<div class=mb-12><h3 class="text-lg font-medium text-sky-200 mb-4">Cast</h3><div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">'),ye=u('<div class=text-center><div class="aspect-[2/3] mb-2 rounded-lg bg-slate-800/50 overflow-hidden"></div><div class="text-sm font-medium text-white"></div><div class="text-xs text-sky-200">'),we=u('<img class="w-full h-full object-cover"loading=lazy>',!0,!1,!1),ke=u('<div class="w-full h-full flex items-center justify-center bg-slate-800/50"><span class=text-sky-200/50>No Image');function Ce(l){return(()=>{var s=_e(),e=s.firstChild,i=e.nextSibling;return t(i,a(j,{get each(){return l.cast},children:r=>(()=>{var o=ye(),d=o.firstChild,m=d.nextSibling,x=m.nextSibling;return t(d,(()=>{var $=p(()=>!!r.thumb);return()=>$()?(()=>{var f=we();return O(n=>{var g=A(r.thumb),b=r.name;return g!==n.e&&y(f,"src",n.e=g),b!==n.t&&y(f,"alt",n.t=b),n},{e:void 0,t:void 0}),f})():ke()})()),t(m,()=>r.name),t(x,()=>r.character),o})()})),s})()}var Se=u('<div class=mb-12><h3 class="text-lg font-medium text-sky-200 mb-4">Crew</h3><div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">'),De=u('<div class=text-center><div class="aspect-[2/3] mb-2 rounded-lg bg-slate-800/50 overflow-hidden"></div><div class="text-sm font-medium text-white"></div><div class="text-xs text-sky-200">'),Fe=u('<img class="w-full h-full object-cover"loading=lazy>',!0,!1,!1),Ee=u('<div class="w-full h-full flex items-center justify-center bg-slate-800/50"><span class=text-sky-200/50>No Image');function je(l){return(()=>{var s=Se(),e=s.firstChild,i=e.nextSibling;return t(i,a(j,{get each(){return l.crew},children:r=>(()=>{var o=De(),d=o.firstChild,m=d.nextSibling,x=m.nextSibling;return t(d,(()=>{var $=p(()=>!!r.thumb);return()=>$()?(()=>{var f=Fe();return O(n=>{var g=A(r.thumb),b=r.name;return g!==n.e&&y(f,"src",n.e=g),b!==n.t&&y(f,"alt",n.t=b),n},{e:void 0,t:void 0}),f})():Ee()})()),t(m,()=>r.name),t(x,()=>r.job),o})()})),s})()}var Oe=u('<div class="flex flex-wrap gap-4 text-sm text-sky-200 mb-6 drop-shadow-lg bg-slate-900/20 backdrop-blur-sm rounded-lg px-4 py-2">'),Pe=u('<span class="px-2 py-0.5 bg-sky-500/10 rounded">');function Ie(l){return(()=>{var s=Oe();return t(s,a(j,{get each(){return l.genres},children:e=>(()=>{var i=Pe();return t(i,()=>e.tag),i})()})),s})()}function ie(l){const s=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,e=l.match(s);return e&&e[2].length===11?e[2]:null}function Le(l){return`https://img.youtube.com/vi/${l}/maxresdefault.jpg`}var Re=u('<div><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"allowfullscreen class="w-full h-full">');function Te(l){const s=ie(l.url);if(!s)return null;const e=new URLSearchParams({rel:"0",modestbranding:"1",...l.autoplay&&{autoplay:"1"},...l.onEnded&&{enablejsapi:"1"}});return(()=>{var i=Re(),r=i.firstChild;return le(r,"ended",l.onEnded),O(o=>{var d=`aspect-video bg-slate-800 rounded-lg overflow-hidden ${l.class||""}`,m=`https://www.youtube.com/embed/${s}?${e.toString()}`,x=l.title||"YouTube video player";return d!==o.e&&ae(i,o.e=d),m!==o.t&&y(r,"src",o.t=m),x!==o.a&&y(r,"title",o.a=x),o},{e:void 0,t:void 0,a:void 0}),i})()}var Ae=u('<dialog class="fixed m-auto inset-0 p-4 max-h-[90vh] max-w-[90vw] w-full md:w-[800px] bg-transparent backdrop:bg-slate-900/90 backdrop:backdrop-blur-sm"><div class="bg-slate-900 rounded-lg shadow-xl shadow-black/20 overflow-hidden">');function Ne(l){let s;H(()=>{s&&(l.isOpen&&l.videoUrl?(s.showModal(),document.body.style.overflow="hidden"):(s.close(),document.body.style.overflow="unset"))}),H(()=>{if(!l.isOpen)return;const i=r=>{r.key==="Escape"&&l.onClose()};document.addEventListener("keydown",i),W(()=>document.removeEventListener("keydown",i))}),W(()=>{document.body.style.overflow="unset"});const e=i=>{s&&i.target===s&&l.onClose()};return(()=>{var i=Ae(),r=i.firstChild;le(i,"close",l.onClose),i.$$click=e;var o=s;return typeof o=="function"?J(o,i):s=i,t(r,a(oe,{get when(){return l.videoUrl},children:d=>a(Te,{get url(){return d()},autoplay:!0,class:"w-full",get onEnded(){return l.onClose}})})),i})()}N(["click"]);var ze=u('<div><div class="flex items-center gap-1 text-sky-400 mb-1"><span class="text-sm font-medium">Studios</span></div><div class=text-white>'),Me=u("<span>");function Ue(l){return l.studios.length===0?null:(()=>{var s=ze(),e=s.firstChild,i=e.firstChild,r=e.nextSibling;return t(e,a(de,{class:"w-4 h-4","aria-hidden":!0}),i),t(r,a(j,{get each(){return l.studios},children:(o,d)=>(()=>{var m=Me();return t(m,()=>o.name,null),t(m,()=>d()<l.studios.length-1&&", ",null),m})()})),s})()}var Ye=u('<section class="container mx-auto px-4 py-12 border-t border-sky-200/10"><h2 class="text-2xl font-bold text-white mb-6">Extras</h2><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">'),Ve=u('<button class="group relative aspect-video w-full rounded-xl overflow-hidden focus:outline-none focus:ring-2 focus:ring-sky-500/40 focus:ring-offset-2 focus:ring-offset-slate-800"><img class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"loading=lazy><div class="absolute inset-0 bg-gradient-to-t from-slate-900 via-slate-900/50 to-transparent opacity-80 group-hover:opacity-90 transition-opacity"></div><div class="absolute inset-0 flex items-center justify-center"><div class="rounded-full bg-sky-500/90 p-4 transform transition-all duration-300 group-hover:bg-sky-400 group-hover:scale-110"></div></div><div class="absolute bottom-0 left-0 right-0 p-4"><h3 class="text-base font-medium text-white line-clamp-2 mb-1 group-hover:text-sky-200 transition-colors"></h3><p class="text-sm text-sky-200/80 capitalize">',!0,!1,!1);function He(l){const s=(i,r)=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),l.onSelectVideo(r))},e=i=>{const r=i.target;r.src=r.src.replace("maxresdefault.jpg","hqdefault.jpg")};return(()=>{var i=Ye(),r=i.firstChild,o=r.nextSibling;return t(o,a(j,{get each(){return l.extras},children:d=>{const m=ie(d.url),x=m?Le(m):"";return(()=>{var $=Ve(),f=$.firstChild,n=f.nextSibling,g=n.nextSibling,b=g.firstChild,P=g.nextSibling,I=P.firstChild,D=I.nextSibling;return $.$$keydown=_=>s(_,d.url),$.$$click=()=>l.onSelectVideo(d.url),f.addEventListener("error",e),y(f,"src",x),t(b,a(ce,{class:"w-8 h-8 text-white","aria-hidden":"true"})),t(I,()=>d.title),t(D,()=>d.kind),O(_=>{var F=`Play ${d.title}`,E=d.title;return F!==_.e&&y($,"aria-label",_.e=F),E!==_.t&&y(f,"alt",_.t=E),_},{e:void 0,t:void 0}),$})()}})),i})()}N(["click","keydown"]);var Je=u('<dialog class="fixed inset-0 bg-transparent p-0 m-0 h-full w-full outline-none"><div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] max-w-[90vw] bg-slate-900 rounded-xl shadow-2xl"><div class="flex items-center justify-between p-6 border-b border-sky-200/10"><h2 class="text-xl font-medium text-white">Playback Settings</h2><button type=button class="text-sky-200 hover:text-sky-100 transition-colors"></button></div><div class=p-6><form class=space-y-6><div><label for=audioTrack class="block text-base font-medium text-sky-200 mb-2">Audio Track</label><select id=audioTrack name=audioTrack class="w-full bg-slate-800 border border-sky-200/10 rounded-lg px-4 py-3 text-base text-white focus:outline-none focus:ring-2 focus:ring-sky-500/40"value=english></select></div><div><label for=subtitles class="block text-base font-medium text-sky-200 mb-2">Subtitles</label><select id=subtitles name=subtitles class="w-full bg-slate-800 border border-sky-200/10 rounded-lg px-4 py-3 text-base text-white focus:outline-none focus:ring-2 focus:ring-sky-500/40"value=none><option value=none>None</option></select></div><div><label for=resolution class="block text-base font-medium text-sky-200 mb-2">Resolution</label><select id=resolution name=resolution class="w-full bg-slate-800 border border-sky-200/10 rounded-lg px-4 py-3 text-base text-white focus:outline-none focus:ring-2 focus:ring-sky-500/40"value=1080p><option value=2160p>4K (2160p)</option><option value=1080p>Full HD (1080p)</option><option value=720p>HD (720p)</option><option value=480p>SD (480p)</option></select></div><div class="pt-4 flex gap-4"><button type=submit class="flex-1 px-6 py-3 bg-sky-500 hover:bg-sky-400 text-white text-base font-medium rounded-lg transition-colors">Apply Settings</button><button type=button class="flex-1 px-6 py-3 bg-slate-800 hover:bg-slate-700 text-sky-200 hover:text-sky-100 text-base font-medium rounded-lg transition-colors">Cancel'),te=u("<option>");function Be(l){let s,e;H(()=>{s&&(l.isOpen?s.showModal():s.close())});const i=()=>{e==null||e.reset(),l.onClose()};return(()=>{var r=Je(),o=r.firstChild,d=o.firstChild,m=d.firstChild,x=m.nextSibling,$=d.nextSibling,f=$.firstChild,n=f.firstChild,g=n.firstChild,b=g.nextSibling,P=n.nextSibling,I=P.firstChild,D=I.nextSibling;D.firstChild;var _=P.nextSibling,F=_.nextSibling,E=F.firstChild,R=E.nextSibling;r.$$click=w=>{w.target===s&&l.onClose()};var S=s;typeof S=="function"?J(S,r):s=r,x.$$click=i,t(x,a(ue,{class:"w-6 h-6","aria-hidden":"true"}));var L=e;return typeof L=="function"?J(L,f):e=f,t(b,a(j,{get each(){return l.audioOpts},children:w=>(()=>{var k=te();return t(k,()=>w.label),O(()=>k.value=w.value),k})()})),t(D,a(j,{get each(){return l.subtitleOpts},children:w=>(()=>{var k=te();return t(k,()=>w.label),O(()=>k.value=w.value),k})()}),null),R.$$click=i,r})()}N(["click"]);var Ke=u('<main class="min-h-screen pt-16"><div class="relative min-h-[90vh] w-full"><div class="absolute inset-0 bg-cover bg-center"><div class="absolute inset-0 bg-gradient-to-r from-slate-900/80 via-slate-900/50 to-transparent"></div><div class="absolute inset-0 bg-gradient-to-t from-slate-900/90 via-slate-900/40 to-transparent"></div></div><div class="relative h-full container mx-auto px-4 py-12 flex flex-col justify-end"><div class="flex flex-col md:flex-row gap-8 items-end md:items-end"><div class="relative z-10 md:translate-y-16"><div class="w-48 md:w-72 aspect-[2/3] rounded-lg overflow-hidden ring-1 ring-white/10 shadow-xl shadow-black/50"><img class="w-full h-full object-cover"></div></div><div class="flex-1 max-w-3xl relative z-10"><h1 class="text-4xl md:text-6xl font-bold text-white mb-4 drop-shadow-xl"></h1><div class="flex flex-wrap gap-4 text-sm text-sky-200 mb-6 drop-shadow-lg bg-slate-900/20 backdrop-blur-sm rounded-lg px-4 py-2"><div class="flex items-center gap-1"><span></span></div><div class="flex items-center gap-1"><span></span></div></div><div class="flex gap-6 mb-6"></div><p class="text-sky-200 leading-relaxed mb-8"></p><div class="flex flex-wrap items-center gap-4 mb-8"><button type=button class="inline-flex items-center gap-2 px-6 py-3 bg-sky-500 hover:bg-sky-400 text-white font-medium rounded-lg transition-colors">Play</button><button type=button class="inline-flex items-center gap-2 px-4 py-3 bg-rose-500/20 hover:bg-rose-500/30 text-rose-300 hover:text-rose-200 font-medium rounded-lg transition-colors">Like</button><button type=button class="inline-flex items-center gap-2 px-4 py-3 bg-emerald-500/20 hover:bg-emerald-500/30 text-emerald-300 hover:text-emerald-200 font-medium rounded-lg transition-colors">Mark as Watched</button></div><div class="grid grid-cols-2 md:grid-cols-3 gap-6"></div></div></div></div></div><section class="container mx-auto px-4 py-12"><h2 class="text-2xl font-bold text-white mb-6">Cast & Crew'),qe=u('<p class="text-xl text-sky-200 mb-4 italic drop-shadow-xl">'),Ge=u('<span class="px-2 py-0.5 bg-sky-500/20 rounded">'),We=u('<div class="flex items-center gap-2"><div><div class="text-lg font-medium text-white"></div><div class="text-xs text-sky-200">Audience Rating'),Xe=u('<div class="flex items-center gap-2"><div><div class="text-lg font-medium text-white"></div><div class="text-xs text-sky-200">Critic Rating'),Qe=u('<div><div class="flex items-center gap-1 text-sky-400 mb-1"><span class="text-sm font-medium">Budget</span></div><div class=text-white>'),Ze=u('<div><div class="flex items-center gap-1 text-sky-400 mb-1"><span class="text-sm font-medium">Revenue</span></div><div class=text-white>');const lt=function(){const s=X.useLoaderData(),{movie:e}=s(),i=p(()=>{if(!e.audio_streams.length)return[];const n=[];for(const g of e.audio_streams)n.push({value:g.index,label:`${g.title} ${g.language}`});return n}),r=p(()=>{if(!e.subtitles.length)return[];const n=[];for(const g of e.subtitles)n.push({value:g.index,label:`${g.title} ${g.language}`});return n}),[o,d]=Q(null),[m,x]=Q(!1),$=X.useNavigate(),f=async()=>{const n={title:e.title,audio_codec:"aac",audio_bit_rate:192,audio_channels:2,audio_stream_index:e.audio_streams[0].index,video_stream_index:e.video_streams[0].index,video_codec:"copy"},b=await(await fetch(`/api/v1/ffmpeg/movie/create-hls/${e.id}`,{method:"post",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json();if(b.error){alert(b.error);return}$({to:"/movies/$movieID/play",params:{movieID:e.id.toString()},search:{pid:b.pid,title:e.title}})};return(()=>{var n=Ke(),g=n.firstChild,b=g.firstChild,P=b.nextSibling,I=P.firstChild,D=I.firstChild,_=D.firstChild,F=_.firstChild,E=D.nextSibling,R=E.firstChild,S=R.nextSibling,L=S.firstChild,w=L.firstChild,k=L.nextSibling,B=k.firstChild,z=S.nextSibling,K=z.nextSibling,q=K.nextSibling,T=q.firstChild,se=T.firstChild,M=T.nextSibling,re=M.firstChild,G=M.nextSibling,ne=G.firstChild,U=q.nextSibling,Y=g.nextSibling;return Y.firstChild,t(R,()=>e.title),t(E,(()=>{var c=p(()=>!!e.tag_line);return()=>c()&&(()=>{var v=qe();return t(v,()=>e.tag_line),v})()})(),S),t(L,a(ve,{class:"w-4 h-4","aria-hidden":"true"}),w),t(w,()=>$e(e.release_date)),t(k,a(ge,{class:"w-4 h-4","aria-hidden":"true"}),B),t(B,()=>pe(e.run_time)),t(S,(()=>{var c=p(()=>!!e.content_rating);return()=>c()&&(()=>{var v=Ge();return t(v,()=>e.content_rating),v})()})(),null),t(S,a(Ie,{get genres(){return e.genres}}),null),t(z,(()=>{var c=p(()=>e.audience_rating>0);return()=>c()&&(()=>{var v=We(),h=v.firstChild,C=h.firstChild;return t(v,a(me,{class:"w-5 h-5 text-sky-400","aria-hidden":"true"}),h),t(C,()=>e.audience_rating.toFixed(1)),v})()})(),null),t(z,(()=>{var c=p(()=>e.critic_rating>0);return()=>c()&&(()=>{var v=Xe(),h=v.firstChild,C=h.firstChild;return t(v,a(fe,{class:"w-5 h-5 text-sky-400","aria-hidden":"true"}),h),t(C,()=>e.critic_rating.toFixed(1)),v})()})(),null),t(K,()=>e.summary),T.$$click=f,t(T,a(be,{class:"w-5 h-5","aria-hidden":"true"}),se),t(M,a(he,{class:"w-5 h-5","aria-hidden":"true"}),re),t(G,a(xe,{class:"w-5 h-5","aria-hidden":"true"}),ne),t(U,(()=>{var c=p(()=>e.budget>0);return()=>c()&&(()=>{var v=Qe(),h=v.firstChild,C=h.firstChild,V=h.nextSibling;return t(h,a(Z,{class:"w-4 h-4","aria-hidden":"true"}),C),t(V,()=>ee(e.budget)),v})()})(),null),t(U,(()=>{var c=p(()=>e.revenue>0);return()=>c()&&(()=>{var v=Ze(),h=v.firstChild,C=h.firstChild,V=h.nextSibling;return t(h,a(Z,{class:"w-4 h-4","aria-hidden":"true"}),C),t(V,()=>ee(e.revenue)),v})()})(),null),t(U,a(Ue,{get studios(){return e.studios}}),null),t(Y,(()=>{var c=p(()=>e.cast.length>0);return()=>c()&&a(Ce,{get cast(){return e.cast}})})(),null),t(Y,(()=>{var c=p(()=>e.crew.length>0);return()=>c()&&a(je,{get crew(){return e.crew}})})(),null),t(n,a(He,{get extras(){return e.extras},onSelectVideo:c=>d(c)}),null),t(n,a(Ne,{get isOpen(){return!!o()},onClose:()=>d(null),get videoUrl(){return o()}}),null),t(n,a(Be,{get isOpen(){return m()},onClose:()=>x(!1),get audioOpts(){return i()},get subtitleOpts(){return r()}}),null),O(c=>{var v=`url(${A(e.art)})`,h=A(e.thumb),C=`${e.title} Poster`;return v!==c.e&&((c.e=v)!=null?b.style.setProperty("background-image",v):b.style.removeProperty("background-image")),h!==c.t&&y(F,"src",c.t=h),C!==c.a&&y(F,"alt",c.a=C),c},{e:void 0,t:void 0,a:void 0}),n})()};N(["click"]);export{lt as component};
