import{a2 as c,a as o,d as Ce,t as Se,i as t,f as a,w,l as ke,x as Pe,p as Fe,o as Ee,F as Ae,g as n,h as Te}from"./index-Gyaoa0LF.js";var qe=Se('<div class="container mx-auto"><section class="bg-blue-950/50 backdrop-blur-sm rounded-2xl p-6 shadow-lg shadow-blue-900/20 border border-blue-900/20"aria-labelledby=user-form-title><header class=mb-8><h1 id=user-form-title class="text-2xl font-bold text-yellow-300">Create New User</h1><p class="mt-2 text-blue-200">Fill in the information below to create a new user account.</p></header><form class=space-y-6><div><label for=name class="block text-sm font-medium text-white mb-2">Full Name</label><div class=relative><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"></div><input autofocus type=text id=name name=name required minlength=2 maxlength=60 class="block w-full pl-10 pr-3 py-2 bg-blue-900/50 border border-blue-800 rounded-lg text-white placeholder-blue-300/50 focus:outline-none focus:ring-2 focus:ring-yellow-300/50 focus:border-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed"></div></div><div><label for=username class="block text-sm font-medium text-white mb-2">Username</label><div class=relative><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"></div><input type=text id=username name=username required minlength=2 maxlength=20 class="block w-full pl-10 pr-3 py-2 bg-blue-900/50 border border-blue-800 rounded-lg text-white placeholder-blue-300/50 focus:outline-none focus:ring-2 focus:ring-yellow-300/50 focus:border-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed"></div></div><div><label for=email class="block text-sm font-medium text-white mb-2">Email Address</label><div class=relative><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"></div><input type=email id=email name=email required class="block w-full pl-10 pr-3 py-2 bg-blue-900/50 border border-blue-800 rounded-lg text-white placeholder-blue-300/50 focus:outline-none focus:ring-2 focus:ring-yellow-300/50 focus:border-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed"></div></div><div><label for=password class="block text-sm font-medium text-white mb-2">Password</label><div class=relative><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"></div><input type=password id=password name=password required minlength=9 maxlength=128 class="block w-full pl-10 pr-3 py-2 bg-blue-900/50 border border-blue-800 rounded-lg text-white placeholder-blue-300/50 focus:outline-none focus:ring-2 focus:ring-yellow-300/50 focus:border-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed"></div><p class="mt-2 text-sm text-blue-300">Must be at least 9 characters long</p></div><div class="flex gap-6"><div class=flex-1><label class="block text-sm font-medium text-white mb-2">User Role</label><div class="relative flex items-center"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"></div><div class="pl-10 flex items-center"><input type=checkbox id=is_admin name=is_admin class="h-4 w-4 rounded border-blue-800 bg-blue-900/50 text-yellow-300 focus:ring-yellow-300/50 focus:ring-offset-2 focus:ring-offset-blue-950 disabled:opacity-50 disabled:cursor-not-allowed"><label for=is_admin class="ml-2 text-sm text-white">Administrator</label></div></div></div><div class=flex-1><label class="block text-sm font-medium text-white mb-2">Account Status</label><div class="relative flex items-center"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"></div><div class="pl-10 flex items-center"><input type=checkbox id=is_active name=is_active class="h-4 w-4 rounded border-blue-800 bg-blue-900/50 text-yellow-300 focus:ring-yellow-300/50 focus:ring-offset-2 focus:ring-offset-blue-950 disabled:opacity-50 disabled:cursor-not-allowed"><label for=is_active class="ml-2 text-sm text-white">Active Account</label></div></div></div></div><div class="pt-4 flex gap-4"><button type=button class="flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-900/50 border border-blue-800 rounded-lg hover:bg-blue-900/70 focus:outline-none focus:ring-2 focus:ring-blue-800/50 focus:ring-offset-2 focus:ring-offset-blue-950 transition-colors shadow-sm shadow-black/20 disabled:opacity-50 disabled:cursor-not-allowed"><span class="flex items-center justify-center gap-2">Cancel</span></button><button type=submit class="flex-1 px-4 py-2 text-sm font-medium text-blue-950 bg-yellow-300 rounded-lg hover:bg-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-300/50 focus:ring-offset-2 focus:ring-offset-blue-950 transition-colors shadow-sm shadow-black/20 disabled:opacity-50 disabled:cursor-not-allowed"><span class="flex items-center justify-center gap-2">');const Ne=function(){const y=c.useNavigate(),Y=c.useLoaderData(),{user:r,update:u}=Y(),Z=c.useRouteContext(),{queryClient:$}=Z();console.log(u);const[_,ee]=o(r.name),[C,le]=o(r.username),[S,te]=o(r.email),[k,se]=o(r.password),[P,ie]=o(!1),[F,ae]=o(!0),l=Ce(()=>({mutationFn:async()=>{const s=u?`/api/v1/users/update/${r.id}`:"/api/v1/users/create",f={name:_(),email:S(),username:C(),password:k(),is_admin:P(),is_active:F};try{const i=await fetch(s,{method:u?"put":"post",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});if(!i.ok){const d=await i.json();throw new Error(`${i.status} - ${d.error?d.error:i.statusText}`)}$.invalidateQueries({queryKey:["users"]})}catch(i){throw console.error(i),new Error("a network error occurred while submitting the form")}},onSuccess:()=>{$.invalidateQueries({queryKey:["users"]}),y({to:"/users",from:c.fullPath})},onError:s=>alert(s.message)})),ne=s=>{s.preventDefault(),l.mutate()};return(()=>{var s=qe(),f=s.firstChild,i=f.firstChild,d=i.nextSibling,E=d.firstChild,oe=E.firstChild,re=oe.nextSibling,A=re.firstChild,m=A.nextSibling,T=E.nextSibling,de=T.firstChild,ce=de.nextSibling,q=ce.firstChild,v=q.nextSibling,U=T.nextSibling,ue=U.firstChild,be=ue.nextSibling,L=be.firstChild,h=L.nextSibling,N=U.nextSibling,fe=N.firstChild,me=fe.nextSibling,j=me.firstChild,g=j.nextSibling,R=N.nextSibling,M=R.firstChild,ve=M.firstChild,he=ve.nextSibling,D=he.firstChild,ge=D.nextSibling,x=ge.firstChild,xe=M.nextSibling,pe=xe.firstChild,we=pe.nextSibling,I=we.firstChild,ye=I.nextSibling,p=ye.firstChild,$e=R.nextSibling,b=$e.firstChild,K=b.firstChild,_e=K.firstChild,Q=b.nextSibling,J=Q.firstChild;return d.addEventListener("submit",ne),t(A,a(w,{class:"h-5 w-5 text-yellow-300","aria-hidden":"true"})),m.$$input=e=>ee(e.currentTarget.value),t(q,a(w,{class:"h-5 w-5 text-yellow-300","aria-hidden":"true"})),v.$$input=e=>le(e.currentTarget.value),t(L,a(ke,{class:"h-5 w-5 text-yellow-300","aria-hidden":"true"})),h.$$input=e=>te(e.currentTarget.value),t(j,a(Pe,{class:"h-5 w-5 text-yellow-300","aria-hidden":"true"})),g.$$input=e=>se(e.currentTarget.value),t(D,a(Fe,{class:"h-5 w-5 text-yellow-300","aria-hidden":"true"})),x.addEventListener("change",e=>ie(e.currentTarget.checked)),t(I,a(w,{class:"h-5 w-5 text-yellow-300","aria-hidden":"true"})),p.addEventListener("change",e=>ae(e.currentTarget.checked)),b.$$click=()=>y({to:"/users",from:c.fullPath}),t(K,a(Ee,{class:"w-4 h-4"}),_e),t(J,a(Ae,{class:"w-4 h-4"}),null),t(J,u?"Update":"Create",null),n(e=>{var O=l.isPending,X=l.isPending,z=l.isPending,B=l.isPending,G=l.isPending,H=l.isPending,V=l.isPending,W=l.isPending;return O!==e.e&&(m.disabled=e.e=O),X!==e.t&&(v.disabled=e.t=X),z!==e.a&&(h.disabled=e.a=z),B!==e.o&&(g.disabled=e.o=B),G!==e.i&&(x.disabled=e.i=G),H!==e.n&&(p.disabled=e.n=H),V!==e.s&&(b.disabled=e.s=V),W!==e.h&&(Q.disabled=e.h=W),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),n(()=>m.value=_()),n(()=>v.value=C()),n(()=>h.value=S()),n(()=>g.value=k()),n(()=>x.checked=P()),n(()=>p.checked=F()),s})()};Te(["input","click"]);export{Ne as component};
