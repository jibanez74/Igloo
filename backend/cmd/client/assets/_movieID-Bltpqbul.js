import{t as c,i as t,f as u,k as j,m as _,g as P,s as k,P as Z,D as re,e as V,Q as G,S as se,T as z,h as M,A as ne,U as ae,o as oe,V as de,a as H,W as ue,X as ce,Y as ge,Z as ve,B as be,_ as fe,n as me,$ as K}from"./index-Cl_ZgWld.js";import{g as I}from"./getImgSrc-ClS6Ftii.js";function he(l){const r=["January","February","March","April","May","June","July","August","September","October","November","December"],e=new Date(l).getDate(),i=new Date(l).getFullYear();return`${r[new Date(l).getMonth()]} ${e}, ${i}`}function xe(l){const r=Math.floor(l/60),e=l%60;return`${r}h ${e}m`}function W(l){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(l)}var $e=c('<div class=mb-12><h3 class="text-lg font-medium text-yellow-300 mb-4">Cast</h3><div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">'),pe=c('<div class=text-center><div class="aspect-[2/3] mb-2 rounded-lg bg-blue-950/50 backdrop-blur-sm overflow-hidden shadow-lg shadow-blue-900/20"></div><div class="text-sm font-medium text-white"></div><div class="text-xs text-blue-200">'),_e=c('<img class="w-full h-full object-cover"loading=lazy>',!0,!1,!1),we=c('<div class="w-full h-full flex items-center justify-center bg-blue-950/50"><span class=text-blue-200/50>No Image');function ye(l){const r=l.cast.slice(0,12);return(()=>{var e=$e(),i=e.firstChild,a=i.nextSibling;return t(a,u(j,{each:r,children:s=>(()=>{var d=pe(),b=d.firstChild,h=b.nextSibling,$=h.nextSibling;return t(b,(()=>{var o=_(()=>!!s.thumb);return()=>o()?(()=>{var n=_e();return P(v=>{var w=I(s.thumb),p=s.name;return w!==v.e&&k(n,"src",v.e=w),p!==v.t&&k(n,"alt",v.t=p),v},{e:void 0,t:void 0}),n})():we()})()),t(h,()=>s.name),t($,()=>s.character),d})()})),e})()}const q={Director:1,Producer:2,"Executive Producer":3,Screenplay:4,Writer:5,"Director of Photography":6,Editor:7,"Production Designer":8,"Art Director":9,"Costume Designer":10,"Makeup Artist":11,"Original Music Composer":12,"Sound Designer":13};function ke(l,r=!0){const e=[...l];return e.sort((i,a)=>{const s=q[i.job]??Number.MAX_SAFE_INTEGER,d=q[a.job]??Number.MAX_SAFE_INTEGER;return s===d?i.job.localeCompare(a.job):s-d}),r?e.slice(0,12):e}var Ce=c('<div class=mb-12><h3 class="text-lg font-medium text-yellow-300 mb-4">Crew</h3><div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">'),Se=c('<div class=text-center><div class="aspect-[2/3] mb-2 rounded-lg bg-blue-950/50 backdrop-blur-sm overflow-hidden shadow-lg shadow-blue-900/20"></div><div class="text-sm font-medium text-white"></div><div class="text-xs text-blue-200">'),De=c('<img class="w-full h-full object-cover"loading=lazy>',!0,!1,!1),Ee=c('<div class="w-full h-full flex items-center justify-center bg-blue-950/50"><span class=text-blue-200/50>No Image');function Fe(l){const r=_(()=>ke(l.crew,!0));return(()=>{var e=Ce(),i=e.firstChild,a=i.nextSibling;return t(a,u(j,{get each(){return r()},children:s=>(()=>{var d=Se(),b=d.firstChild,h=b.nextSibling,$=h.nextSibling;return t(b,(()=>{var o=_(()=>!!s.thumb);return()=>o()?(()=>{var n=De();return P(v=>{var w=I(s.thumb),p=s.name;return w!==v.e&&k(n,"src",v.e=w),p!==v.t&&k(n,"alt",v.t=p),v},{e:void 0,t:void 0}),n})():Ee()})()),t(h,()=>s.name),t($,()=>s.job),d})()})),e})()}var je=c('<div class="flex flex-wrap gap-4 text-sm text-sky-200 mb-6 drop-shadow-lg bg-slate-900/20 backdrop-blur-sm rounded-lg px-4 py-2">'),Pe=c('<span class="px-2 py-0.5 bg-sky-500/10 rounded">');function Oe(l){return(()=>{var r=je();return t(r,u(j,{get each(){return l.genres},children:e=>(()=>{var i=Pe();return t(i,()=>e.tag),i})()})),r})()}function ee(l){const r=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,e=l.match(r);return e&&e[2].length===11?e[2]:null}function Ae(l){return`https://img.youtube.com/vi/${l}/maxresdefault.jpg`}var Te=c('<div><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"allowfullscreen class="w-full h-full">');function Ne(l){const r=ee(l.url);if(!r)return null;const e=new URLSearchParams({rel:"0",modestbranding:"1",...l.autoplay&&{autoplay:"1"},...l.onEnded&&{enablejsapi:"1"}});return(()=>{var i=Te(),a=i.firstChild;return Z(a,"ended",l.onEnded),P(s=>{var d=`aspect-video bg-slate-800 rounded-lg overflow-hidden ${l.class||""}`,b=`https://www.youtube.com/embed/${r}?${e.toString()}`,h=l.title||"YouTube video player";return d!==s.e&&re(i,s.e=d),b!==s.t&&k(a,"src",s.t=b),h!==s.a&&k(a,"title",s.a=h),s},{e:void 0,t:void 0,a:void 0}),i})()}var Re=c('<dialog class="fixed m-auto inset-0 p-4 max-h-[90vh] max-w-[90vw] w-full md:w-[800px] bg-transparent backdrop:bg-slate-900/90 backdrop:backdrop-blur-sm"><div class="bg-slate-900 rounded-lg shadow-xl shadow-black/20 overflow-hidden">');function Ie(l){let r;V(()=>{r&&(l.isOpen&&l.videoUrl?(r.showModal(),document.body.style.overflow="hidden"):(r.close(),document.body.style.overflow="unset"))}),V(()=>{if(!l.isOpen)return;const i=a=>{a.key==="Escape"&&l.onClose()};document.addEventListener("keydown",i),G(()=>document.removeEventListener("keydown",i))}),G(()=>{document.body.style.overflow="unset"});const e=i=>{r&&i.target===r&&l.onClose()};return(()=>{var i=Re(),a=i.firstChild;Z(i,"close",l.onClose),i.$$click=e;var s=r;return typeof s=="function"?z(s,i):r=i,t(a,u(se,{get when(){return l.videoUrl},children:d=>u(Ne,{get url(){return d()},autoplay:!0,class:"w-full",get onEnded(){return l.onClose}})})),i})()}M(["click"]);var Me=c('<div><div class="flex items-center gap-1 text-sky-400 mb-1"><span class="text-sm font-medium">Studios</span></div><div class=text-white>'),Le=c("<span>");function Ue(l){return l.studios.length===0?null:(()=>{var r=Me(),e=r.firstChild,i=e.firstChild,a=e.nextSibling;return t(e,u(ne,{class:"w-4 h-4","aria-hidden":!0}),i),t(a,u(j,{get each(){return l.studios},children:(s,d)=>(()=>{var b=Le();return t(b,()=>s.name,null),t(b,()=>d()<l.studios.length-1&&", ",null),b})()})),r})()}var Ye=c('<section class="container mx-auto px-4 py-12 border-t border-blue-900/20"><h2 class="text-2xl font-bold text-yellow-300 mb-6">Extras</h2><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">'),Ve=c('<button class="group relative aspect-video w-full rounded-xl overflow-hidden focus:outline-none focus:ring-2 focus:ring-yellow-300 focus:ring-offset-2 focus:ring-offset-blue-950 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-1"><img class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"loading=lazy><div class="absolute inset-0 bg-gradient-to-t from-black via-black/50 to-black/10"></div><div class="absolute inset-0 bg-black/40 group-hover:bg-black/20 transition-colors duration-300"></div><div class="absolute inset-0 flex items-center justify-center"><div class="rounded-full bg-yellow-300 p-4 transform transition-all duration-300 group-hover:bg-yellow-400 group-hover:scale-110 shadow-lg shadow-black/50 group-hover:shadow-xl"></div></div><div class="absolute bottom-0 left-0 right-0 p-6"><h3 class="text-lg font-bold text-white line-clamp-2 mb-2 drop-shadow group-hover:text-white transition-colors"></h3><div class="inline-block px-3 py-1 bg-blue-950/90 rounded-full"><p class="text-sm font-medium text-yellow-300 capitalize">',!0,!1,!1);function ze(l){const r=(i,a)=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),l.onSelectVideo(a))},e=i=>{const a=i.target;a.src=a.src.replace("maxresdefault.jpg","hqdefault.jpg")};return(()=>{var i=Ye(),a=i.firstChild,s=a.nextSibling;return t(s,u(j,{get each(){return l.extras},children:d=>{const b=ee(d.url),h=b?Ae(b):"";return(()=>{var $=Ve(),o=$.firstChild,n=o.nextSibling,v=n.nextSibling,w=v.nextSibling,p=w.firstChild,T=w.nextSibling,D=T.firstChild,O=D.nextSibling,A=O.firstChild;return $.$$keydown=x=>r(x,d.url),$.$$click=()=>l.onSelectVideo(d.url),o.addEventListener("error",e),k(o,"src",h),t(p,u(ae,{class:"w-8 h-8 text-blue-950","aria-hidden":"true"})),t(D,()=>d.title),t(A,()=>d.kind),P(x=>{var E=`Play ${d.title}`,F=d.title;return E!==x.e&&k($,"aria-label",x.e=E),F!==x.t&&k(o,"alt",x.t=F),x},{e:void 0,t:void 0}),$})()}})),i})()}M(["click","keydown"]);var Je=c('<dialog class="fixed inset-0 bg-transparent p-0 m-0 h-full w-full outline-none"><div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] max-w-[90vw] bg-slate-900 rounded-xl shadow-2xl"><div class="flex items-center justify-between p-6 border-b border-sky-200/10"><h2 class="text-xl font-medium text-white">Playback Settings</h2><button type=button class="text-sky-200 hover:text-sky-100 transition-colors"></button></div><div class=p-6><form class=space-y-6><div><label for=audioTrack class="block text-base font-medium text-sky-200 mb-2">Audio Track</label><select id=audioTrack name=audioTrack class="w-full bg-slate-800 border border-sky-200/10 rounded-lg px-4 py-3 text-base text-white focus:outline-none focus:ring-2 focus:ring-sky-500/40"value=english></select></div><div><label for=subtitles class="block text-base font-medium text-sky-200 mb-2">Subtitles</label><select id=subtitles name=subtitles class="w-full bg-slate-800 border border-sky-200/10 rounded-lg px-4 py-3 text-base text-white focus:outline-none focus:ring-2 focus:ring-sky-500/40"value=none><option value=none>None</option></select></div><div><label for=resolution class="block text-base font-medium text-sky-200 mb-2">Resolution</label><select id=resolution name=resolution class="w-full bg-slate-800 border border-sky-200/10 rounded-lg px-4 py-3 text-base text-white focus:outline-none focus:ring-2 focus:ring-sky-500/40"value=1080p><option value=2160p>4K (2160p)</option><option value=1080p>Full HD (1080p)</option><option value=720p>HD (720p)</option><option value=480p>SD (480p)</option></select></div><div class="pt-4 flex gap-4"><button type=submit class="flex-1 px-6 py-3 bg-sky-500 hover:bg-sky-400 text-white text-base font-medium rounded-lg transition-colors">Apply Settings</button><button type=button class="flex-1 px-6 py-3 bg-slate-800 hover:bg-slate-700 text-sky-200 hover:text-sky-100 text-base font-medium rounded-lg transition-colors">Cancel'),Q=c("<option>");function Be(l){let r,e;V(()=>{r&&(l.isOpen?r.showModal():r.close())});const i=()=>{e==null||e.reset(),l.onClose()};return(()=>{var a=Je(),s=a.firstChild,d=s.firstChild,b=d.firstChild,h=b.nextSibling,$=d.nextSibling,o=$.firstChild,n=o.firstChild,v=n.firstChild,w=v.nextSibling,p=n.nextSibling,T=p.firstChild,D=T.nextSibling;D.firstChild;var O=p.nextSibling,A=O.nextSibling,x=A.firstChild,E=x.nextSibling;a.$$click=C=>{C.target===r&&l.onClose()};var F=r;typeof F=="function"?z(F,a):r=a,h.$$click=i,t(h,u(oe,{class:"w-6 h-6","aria-hidden":"true"}));var N=e;return typeof N=="function"?z(N,o):e=o,t(w,u(j,{get each(){return l.audioOpts},children:C=>(()=>{var y=Q();return t(y,()=>C.label),P(()=>y.value=C.value),y})()})),t(D,u(j,{get each(){return l.subtitleOpts},children:C=>(()=>{var y=Q();return t(y,()=>C.label),P(()=>y.value=C.value),y})()}),null),E.$$click=i,a})()}M(["click"]);var Xe=c('<div class="relative min-h-[90vh] w-full"><div class="absolute inset-0 bg-cover bg-center"><div class="absolute inset-0 bg-gradient-to-r from-blue-950/80 via-blue-950/50 to-transparent"></div><div class="absolute inset-0 bg-gradient-to-t from-blue-950/90 via-blue-950/40 to-transparent"></div></div><div class="relative h-full container mx-auto px-4 py-12 flex flex-col justify-end"><div class="flex flex-col md:flex-row gap-8 items-end md:items-end"><div class="relative z-10 md:translate-y-16"><div class="w-48 md:w-72 aspect-[2/3] rounded-lg overflow-hidden ring-1 ring-white/10 shadow-xl shadow-black/50"><img class="w-full h-full object-cover"></div></div><div class="flex-1 max-w-3xl relative z-10"><h1 class="text-4xl md:text-6xl font-bold text-white mb-4 drop-shadow-xl"></h1><div class="flex flex-wrap gap-4 text-sm text-blue-200 mb-6 drop-shadow-lg bg-blue-950/20 backdrop-blur-sm rounded-lg px-4 py-2"><div class="flex items-center gap-1"><span></span></div><div class="flex items-center gap-1"><span></span></div></div><div class="flex gap-6 mb-6"></div><p class="text-blue-200 leading-relaxed mb-8"></p><div class="flex flex-wrap items-center gap-4 mb-8"><button type=button class="inline-flex items-center gap-2 px-6 py-3 bg-yellow-300 hover:bg-yellow-400 text-blue-950 font-medium rounded-lg transition-colors">Play</button><button type=button class="inline-flex items-center gap-2 px-4 py-3 bg-rose-500/20 hover:bg-rose-500/30 text-rose-300 hover:text-rose-200 font-medium rounded-lg transition-colors">Like</button><button type=button class="inline-flex items-center gap-2 px-4 py-3 bg-emerald-500/20 hover:bg-emerald-500/30 text-emerald-300 hover:text-emerald-200 font-medium rounded-lg transition-colors">Mark as Watched</button></div><div class="grid grid-cols-2 md:grid-cols-3 gap-6">'),Ge=c('<section class="container mx-auto px-4 py-12"><h2 class="text-2xl font-bold text-yellow-300 mb-6">Cast & Crew'),He=c('<p class="text-xl text-blue-200 mb-4 italic drop-shadow-xl">'),Ke=c('<span class="px-2 py-0.5 bg-yellow-300/20 rounded">'),We=c('<div class="flex items-center gap-2"><div><div class="text-lg font-medium text-white"></div><div class="text-xs text-blue-200">Audience Rating'),qe=c('<div class="flex items-center gap-2"><div><div class="text-lg font-medium text-white"></div><div class="text-xs text-blue-200">Critic Rating'),Qe=c('<div><div class="flex items-center gap-1 text-yellow-300 mb-1"><span class="text-sm font-medium">Budget</span></div><div class=text-white>'),Ze=c('<div><div class="flex items-center gap-1 text-yellow-300 mb-1"><span class="text-sm font-medium">Revenue</span></div><div class=text-white>');const lt=function(){const r=de.useLoaderData(),{movie:e}=r(),i=_(()=>{if(!e.audio_streams.length)return[];const o=[];for(const n of e.audio_streams)o.push({value:n.index,label:`${n.title} ${n.language}`});return o}),a=_(()=>{if(!e.subtitles.length)return[];const o=[];for(const n of e.subtitles)o.push({value:n.index,label:`${n.title} ${n.language}`});return o}),[s,d]=H(null),[b,h]=H(!1),$=async()=>{try{const o={title:e.title,audio_codec:"aac",audio_channels:2,audio_stream_index:e.audio_streams[0].index,video_stream_index:e.video_streams[0].index,video_codec:"h264",resolution:720,preset:"veryfast"},n=await fetch(`/api/v1/ffmpeg/create-hls-movie/${e.id}`,{method:"post",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),v=await n.json();if(!n.ok){alert(`${n.status} - ${v.error?v.error:n.statusText}`);return}alert(JSON.stringify(v))}catch(o){console.error(o),alert("an error occurred while playing the movie")}};return[" ",(()=>{var o=Xe(),n=o.firstChild,v=n.nextSibling,w=v.firstChild,p=w.firstChild,T=p.firstChild,D=T.firstChild,O=p.nextSibling,A=O.firstChild,x=A.nextSibling,E=x.firstChild,F=E.firstChild,N=E.nextSibling,C=N.firstChild,y=x.nextSibling,J=y.nextSibling,B=J.nextSibling,R=B.firstChild,te=R.firstChild,L=R.nextSibling,le=L.firstChild,X=L.nextSibling,ie=X.firstChild,U=B.nextSibling;return t(A,()=>e.title),t(O,(()=>{var f=_(()=>!!e.tag_line);return()=>f()&&(()=>{var g=He();return t(g,()=>e.tag_line),g})()})(),x),t(E,u(ue,{class:"w-4 h-4","aria-hidden":"true"}),F),t(F,()=>he(e.release_date)),t(N,u(ce,{class:"w-4 h-4","aria-hidden":"true"}),C),t(C,()=>xe(e.run_time)),t(x,(()=>{var f=_(()=>!!e.content_rating);return()=>f()&&(()=>{var g=Ke();return t(g,()=>e.content_rating),g})()})(),null),t(x,u(Oe,{get genres(){return e.genres}}),null),t(y,(()=>{var f=_(()=>e.audience_rating>0);return()=>f()&&(()=>{var g=We(),m=g.firstChild,S=m.firstChild;return t(g,u(ge,{class:"w-5 h-5 text-yellow-300","aria-hidden":"true"}),m),t(S,()=>e.audience_rating.toFixed(1)),g})()})(),null),t(y,(()=>{var f=_(()=>e.critic_rating>0);return()=>f()&&(()=>{var g=qe(),m=g.firstChild,S=m.firstChild;return t(g,u(ve,{class:"w-5 h-5 text-yellow-300","aria-hidden":"true"}),m),t(S,()=>e.critic_rating.toFixed(1)),g})()})(),null),t(J,()=>e.summary),R.$$click=$,t(R,u(be,{class:"w-5 h-5","aria-hidden":"true"}),te),t(L,u(fe,{class:"w-5 h-5","aria-hidden":"true"}),le),t(X,u(me,{class:"w-5 h-5","aria-hidden":"true"}),ie),t(U,(()=>{var f=_(()=>e.budget>0);return()=>f()&&(()=>{var g=Qe(),m=g.firstChild,S=m.firstChild,Y=m.nextSibling;return t(m,u(K,{class:"w-4 h-4","aria-hidden":"true"}),S),t(Y,()=>W(e.budget)),g})()})(),null),t(U,(()=>{var f=_(()=>e.revenue>0);return()=>f()&&(()=>{var g=Ze(),m=g.firstChild,S=m.firstChild,Y=m.nextSibling;return t(m,u(K,{class:"w-4 h-4","aria-hidden":"true"}),S),t(Y,()=>W(e.revenue)),g})()})(),null),t(U,u(Ue,{get studios(){return e.studios}}),null),P(f=>{var g=`url(${I(e.art)})`,m=I(e.thumb),S=`${e.title} Poster`;return g!==f.e&&((f.e=g)!=null?n.style.setProperty("background-image",g):n.style.removeProperty("background-image")),m!==f.t&&k(D,"src",f.t=m),S!==f.a&&k(D,"alt",f.a=S),f},{e:void 0,t:void 0,a:void 0}),o})(),(()=>{var o=Ge();return o.firstChild,t(o,(()=>{var n=_(()=>e.cast.length>0);return()=>n()&&u(ye,{get cast(){return e.cast}})})(),null),t(o,(()=>{var n=_(()=>e.crew.length>0);return()=>n()&&u(Fe,{get crew(){return e.crew}})})(),null),o})(),u(ze,{get extras(){return e.extras},onSelectVideo:o=>d(o)}),u(Ie,{get isOpen(){return!!s()},onClose:()=>d(null),get videoUrl(){return s()}}),u(Be,{get isOpen(){return b()},onClose:()=>h(!1),get audioOpts(){return i()},get subtitleOpts(){return a()}})]};M(["click"]);export{lt as component};
