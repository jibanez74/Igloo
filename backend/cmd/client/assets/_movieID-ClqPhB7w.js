import{t as c,i as t,f as u,k as j,m as p,g as P,s as y,N as te,C as ne,e as J,P as K,S as ae,Q as X,h as M,z as oe,T as de,o as ue,U as V,a as W,V as ce,W as ge,X as ve,Y as be,A as me,Z as fe,n as he,_ as q}from"./index-Gyaoa0LF.js";import{g as R}from"./getImgSrc-ClS6Ftii.js";function xe(l){const r=["January","February","March","April","May","June","July","August","September","October","November","December"],e=new Date(l).getDate(),i=new Date(l).getFullYear();return`${r[new Date(l).getMonth()]} ${e}, ${i}`}function $e(l){const r=Math.floor(l/60),e=l%60;return`${r}h ${e}m`}function Q(l){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(l)}var pe=c('<div class=mb-12><h3 class="text-lg font-medium text-yellow-300 mb-4">Cast</h3><div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">'),_e=c('<div class=text-center><div class="aspect-[2/3] mb-2 rounded-lg bg-blue-950/50 backdrop-blur-sm overflow-hidden shadow-lg shadow-blue-900/20"></div><div class="text-sm font-medium text-white"></div><div class="text-xs text-blue-200">'),we=c('<img class="w-full h-full object-cover"loading=lazy>',!0,!1,!1),ye=c('<div class="w-full h-full flex items-center justify-center bg-blue-950/50"><span class=text-blue-200/50>No Image');function ke(l){const r=l.cast.slice(0,12);return(()=>{var e=pe(),i=e.firstChild,a=i.nextSibling;return t(a,u(j,{each:r,children:s=>(()=>{var d=_e(),v=d.firstChild,h=v.nextSibling,$=h.nextSibling;return t(v,(()=>{var x=p(()=>!!s.thumb);return()=>x()?(()=>{var o=we();return P(n=>{var m=R(s.thumb),_=s.name;return m!==n.e&&y(o,"src",n.e=m),_!==n.t&&y(o,"alt",n.t=_),n},{e:void 0,t:void 0}),o})():ye()})()),t(h,()=>s.name),t($,()=>s.character),d})()})),e})()}const Z={Director:1,Producer:2,"Executive Producer":3,Screenplay:4,Writer:5,"Director of Photography":6,Editor:7,"Production Designer":8,"Art Director":9,"Costume Designer":10,"Makeup Artist":11,"Original Music Composer":12,"Sound Designer":13};function Ce(l,r=!0){const e=[...l];return e.sort((i,a)=>{const s=Z[i.job]??Number.MAX_SAFE_INTEGER,d=Z[a.job]??Number.MAX_SAFE_INTEGER;return s===d?i.job.localeCompare(a.job):s-d}),r?e.slice(0,12):e}var Se=c('<div class=mb-12><h3 class="text-lg font-medium text-yellow-300 mb-4">Crew</h3><div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">'),De=c('<div class=text-center><div class="aspect-[2/3] mb-2 rounded-lg bg-blue-950/50 backdrop-blur-sm overflow-hidden shadow-lg shadow-blue-900/20"></div><div class="text-sm font-medium text-white"></div><div class="text-xs text-blue-200">'),Ee=c('<img class="w-full h-full object-cover"loading=lazy>',!0,!1,!1),Fe=c('<div class="w-full h-full flex items-center justify-center bg-blue-950/50"><span class=text-blue-200/50>No Image');function je(l){const r=p(()=>Ce(l.crew,!0));return(()=>{var e=Se(),i=e.firstChild,a=i.nextSibling;return t(a,u(j,{get each(){return r()},children:s=>(()=>{var d=De(),v=d.firstChild,h=v.nextSibling,$=h.nextSibling;return t(v,(()=>{var x=p(()=>!!s.thumb);return()=>x()?(()=>{var o=Ee();return P(n=>{var m=R(s.thumb),_=s.name;return m!==n.e&&y(o,"src",n.e=m),_!==n.t&&y(o,"alt",n.t=_),n},{e:void 0,t:void 0}),o})():Fe()})()),t(h,()=>s.name),t($,()=>s.job),d})()})),e})()}var Pe=c('<div class="flex flex-wrap gap-4 text-sm text-sky-200 mb-6 drop-shadow-lg bg-slate-900/20 backdrop-blur-sm rounded-lg px-4 py-2">'),Oe=c('<span class="px-2 py-0.5 bg-sky-500/10 rounded">');function Ae(l){return(()=>{var r=Pe();return t(r,u(j,{get each(){return l.genres},children:e=>(()=>{var i=Oe();return t(i,()=>e.tag),i})()})),r})()}function le(l){const r=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,e=l.match(r);return e&&e[2].length===11?e[2]:null}function Ne(l){return`https://img.youtube.com/vi/${l}/maxresdefault.jpg`}var Te=c('<div><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"allowfullscreen class="w-full h-full">');function Ie(l){const r=le(l.url);if(!r)return null;const e=new URLSearchParams({rel:"0",modestbranding:"1",...l.autoplay&&{autoplay:"1"},...l.onEnded&&{enablejsapi:"1"}});return(()=>{var i=Te(),a=i.firstChild;return te(a,"ended",l.onEnded),P(s=>{var d=`aspect-video bg-slate-800 rounded-lg overflow-hidden ${l.class||""}`,v=`https://www.youtube.com/embed/${r}?${e.toString()}`,h=l.title||"YouTube video player";return d!==s.e&&ne(i,s.e=d),v!==s.t&&y(a,"src",s.t=v),h!==s.a&&y(a,"title",s.a=h),s},{e:void 0,t:void 0,a:void 0}),i})()}var Re=c('<dialog class="fixed m-auto inset-0 p-4 max-h-[90vh] max-w-[90vw] w-full md:w-[800px] bg-transparent backdrop:bg-slate-900/90 backdrop:backdrop-blur-sm"><div class="bg-slate-900 rounded-lg shadow-xl shadow-black/20 overflow-hidden">');function Me(l){let r;J(()=>{r&&(l.isOpen&&l.videoUrl?(r.showModal(),document.body.style.overflow="hidden"):(r.close(),document.body.style.overflow="unset"))}),J(()=>{if(!l.isOpen)return;const i=a=>{a.key==="Escape"&&l.onClose()};document.addEventListener("keydown",i),K(()=>document.removeEventListener("keydown",i))}),K(()=>{document.body.style.overflow="unset"});const e=i=>{r&&i.target===r&&l.onClose()};return(()=>{var i=Re(),a=i.firstChild;te(i,"close",l.onClose),i.$$click=e;var s=r;return typeof s=="function"?X(s,i):r=i,t(a,u(ae,{get when(){return l.videoUrl},children:d=>u(Ie,{get url(){return d()},autoplay:!0,class:"w-full",get onEnded(){return l.onClose}})})),i})()}M(["click"]);var Le=c('<div><div class="flex items-center gap-1 text-sky-400 mb-1"><span class="text-sm font-medium">Studios</span></div><div class=text-white>'),Ue=c("<span>");function Ye(l){return l.studios.length===0?null:(()=>{var r=Le(),e=r.firstChild,i=e.firstChild,a=e.nextSibling;return t(e,u(oe,{class:"w-4 h-4","aria-hidden":!0}),i),t(a,u(j,{get each(){return l.studios},children:(s,d)=>(()=>{var v=Ue();return t(v,()=>s.name,null),t(v,()=>d()<l.studios.length-1&&", ",null),v})()})),r})()}var ze=c('<section class="container mx-auto px-4 py-12 border-t border-blue-900/20"><h2 class="text-2xl font-bold text-yellow-300 mb-6">Extras</h2><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">'),Ve=c('<button class="group relative aspect-video w-full rounded-xl overflow-hidden focus:outline-none focus:ring-2 focus:ring-yellow-300 focus:ring-offset-2 focus:ring-offset-blue-950 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-1"><img class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"loading=lazy><div class="absolute inset-0 bg-gradient-to-t from-black via-black/50 to-black/10"></div><div class="absolute inset-0 bg-black/40 group-hover:bg-black/20 transition-colors duration-300"></div><div class="absolute inset-0 flex items-center justify-center"><div class="rounded-full bg-yellow-300 p-4 transform transition-all duration-300 group-hover:bg-yellow-400 group-hover:scale-110 shadow-lg shadow-black/50 group-hover:shadow-xl"></div></div><div class="absolute bottom-0 left-0 right-0 p-6"><h3 class="text-lg font-bold text-white line-clamp-2 mb-2 drop-shadow group-hover:text-white transition-colors"></h3><div class="inline-block px-3 py-1 bg-blue-950/90 rounded-full"><p class="text-sm font-medium text-yellow-300 capitalize">',!0,!1,!1);function Je(l){const r=(i,a)=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),l.onSelectVideo(a))},e=i=>{const a=i.target;a.src=a.src.replace("maxresdefault.jpg","hqdefault.jpg")};return(()=>{var i=ze(),a=i.firstChild,s=a.nextSibling;return t(s,u(j,{get each(){return l.extras},children:d=>{const v=le(d.url),h=v?Ne(v):"";return(()=>{var $=Ve(),x=$.firstChild,o=x.nextSibling,n=o.nextSibling,m=n.nextSibling,_=m.firstChild,O=m.nextSibling,F=O.firstChild,A=F.nextSibling,N=A.firstChild;return $.$$keydown=w=>r(w,d.url),$.$$click=()=>l.onSelectVideo(d.url),x.addEventListener("error",e),y(x,"src",h),t(_,u(de,{class:"w-8 h-8 text-blue-950","aria-hidden":"true"})),t(F,()=>d.title),t(N,()=>d.kind),P(w=>{var k=`Play ${d.title}`,E=d.title;return k!==w.e&&y($,"aria-label",w.e=k),E!==w.t&&y(x,"alt",w.t=E),w},{e:void 0,t:void 0}),$})()}})),i})()}M(["click","keydown"]);var Xe=c('<dialog class="fixed inset-0 bg-transparent p-0 m-0 h-full w-full outline-none"><div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] max-w-[90vw] bg-slate-900 rounded-xl shadow-2xl"><div class="flex items-center justify-between p-6 border-b border-sky-200/10"><h2 class="text-xl font-medium text-white">Playback Settings</h2><button type=button class="text-sky-200 hover:text-sky-100 transition-colors"></button></div><div class=p-6><form class=space-y-6><div><label for=audioTrack class="block text-base font-medium text-sky-200 mb-2">Audio Track</label><select id=audioTrack name=audioTrack class="w-full bg-slate-800 border border-sky-200/10 rounded-lg px-4 py-3 text-base text-white focus:outline-none focus:ring-2 focus:ring-sky-500/40"value=english></select></div><div><label for=subtitles class="block text-base font-medium text-sky-200 mb-2">Subtitles</label><select id=subtitles name=subtitles class="w-full bg-slate-800 border border-sky-200/10 rounded-lg px-4 py-3 text-base text-white focus:outline-none focus:ring-2 focus:ring-sky-500/40"value=none><option value=none>None</option></select></div><div><label for=resolution class="block text-base font-medium text-sky-200 mb-2">Resolution</label><select id=resolution name=resolution class="w-full bg-slate-800 border border-sky-200/10 rounded-lg px-4 py-3 text-base text-white focus:outline-none focus:ring-2 focus:ring-sky-500/40"value=1080p><option value=2160p>4K (2160p)</option><option value=1080p>Full HD (1080p)</option><option value=720p>HD (720p)</option><option value=480p>SD (480p)</option></select></div><div class="pt-4 flex gap-4"><button type=submit class="flex-1 px-6 py-3 bg-sky-500 hover:bg-sky-400 text-white text-base font-medium rounded-lg transition-colors">Apply Settings</button><button type=button class="flex-1 px-6 py-3 bg-slate-800 hover:bg-slate-700 text-sky-200 hover:text-sky-100 text-base font-medium rounded-lg transition-colors">Cancel'),ee=c("<option>");function Be(l){let r,e;J(()=>{r&&(l.isOpen?r.showModal():r.close())});const i=()=>{e==null||e.reset(),l.onClose()};return(()=>{var a=Xe(),s=a.firstChild,d=s.firstChild,v=d.firstChild,h=v.nextSibling,$=d.nextSibling,x=$.firstChild,o=x.firstChild,n=o.firstChild,m=n.nextSibling,_=o.nextSibling,O=_.firstChild,F=O.nextSibling;F.firstChild;var A=_.nextSibling,N=A.nextSibling,w=N.firstChild,k=w.nextSibling;a.$$click=C=>{C.target===r&&l.onClose()};var E=r;typeof E=="function"?X(E,a):r=a,h.$$click=i,t(h,u(ue,{class:"w-6 h-6","aria-hidden":"true"}));var T=e;return typeof T=="function"?X(T,x):e=x,t(m,u(j,{get each(){return l.audioOpts},children:C=>(()=>{var S=ee();return t(S,()=>C.label),P(()=>S.value=C.value),S})()})),t(F,u(j,{get each(){return l.subtitleOpts},children:C=>(()=>{var S=ee();return t(S,()=>C.label),P(()=>S.value=C.value),S})()}),null),k.$$click=i,a})()}M(["click"]);var Ge=c('<div class="relative min-h-[90vh] w-full"><div class="absolute inset-0 bg-cover bg-center"><div class="absolute inset-0 bg-gradient-to-r from-blue-950/80 via-blue-950/50 to-transparent"></div><div class="absolute inset-0 bg-gradient-to-t from-blue-950/90 via-blue-950/40 to-transparent"></div></div><div class="relative h-full container mx-auto px-4 py-12 flex flex-col justify-end"><div class="flex flex-col md:flex-row gap-8 items-end md:items-end"><div class="relative z-10 md:translate-y-16"><div class="w-48 md:w-72 aspect-[2/3] rounded-lg overflow-hidden ring-1 ring-white/10 shadow-xl shadow-black/50"><img class="w-full h-full object-cover"></div></div><div class="flex-1 max-w-3xl relative z-10"><h1 class="text-4xl md:text-6xl font-bold text-white mb-4 drop-shadow-xl"></h1><div class="flex flex-wrap gap-4 text-sm text-blue-200 mb-6 drop-shadow-lg bg-blue-950/20 backdrop-blur-sm rounded-lg px-4 py-2"><div class="flex items-center gap-1"><span></span></div><div class="flex items-center gap-1"><span></span></div></div><div class="flex gap-6 mb-6"></div><p class="text-blue-200 leading-relaxed mb-8"></p><div class="flex flex-wrap items-center gap-4 mb-8"><button type=button class="inline-flex items-center gap-2 px-6 py-3 bg-yellow-300 hover:bg-yellow-400 text-blue-950 font-medium rounded-lg transition-colors">Play</button><button type=button class="inline-flex items-center gap-2 px-4 py-3 bg-rose-500/20 hover:bg-rose-500/30 text-rose-300 hover:text-rose-200 font-medium rounded-lg transition-colors">Like</button><button type=button class="inline-flex items-center gap-2 px-4 py-3 bg-emerald-500/20 hover:bg-emerald-500/30 text-emerald-300 hover:text-emerald-200 font-medium rounded-lg transition-colors">Mark as Watched</button></div><div class="grid grid-cols-2 md:grid-cols-3 gap-6">'),He=c('<section class="container mx-auto px-4 py-12"><h2 class="text-2xl font-bold text-yellow-300 mb-6">Cast & Crew'),Ke=c('<p class="text-xl text-blue-200 mb-4 italic drop-shadow-xl">'),We=c('<span class="px-2 py-0.5 bg-yellow-300/20 rounded">'),qe=c('<div class="flex items-center gap-2"><div><div class="text-lg font-medium text-white"></div><div class="text-xs text-blue-200">Audience Rating'),Qe=c('<div class="flex items-center gap-2"><div><div class="text-lg font-medium text-white"></div><div class="text-xs text-blue-200">Critic Rating'),Ze=c('<div><div class="flex items-center gap-1 text-yellow-300 mb-1"><span class="text-sm font-medium">Budget</span></div><div class=text-white>'),et=c('<div><div class="flex items-center gap-1 text-yellow-300 mb-1"><span class="text-sm font-medium">Revenue</span></div><div class=text-white>');const it=function(){const r=V.useLoaderData(),{movie:e}=r(),i=p(()=>{if(!e.audio_streams.length)return[];const o=[];for(const n of e.audio_streams)o.push({value:n.index,label:`${n.title} ${n.language}`});return o}),a=p(()=>{if(!e.subtitles.length)return[];const o=[];for(const n of e.subtitles)o.push({value:n.index,label:`${n.title} ${n.language}`});return o}),[s,d]=W(null),[v,h]=W(!1),$=V.useNavigate(),x=async()=>{try{const o={title:e.title,audio_codec:"aac",audio_bit_rate:192,audio_channels:2,audio_stream_index:e.audio_streams[0].index,video_stream_index:e.video_streams[0].index,video_codec:"copy"},n=await fetch(`/api/v1/ffmpeg/create-hls-movie/${e.id}`,{method:"post",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),m=await n.json();if(m.error){alert(`${n.status} - ${m.error?m.error:n.statusText}`);return}$({to:"/movies/$movieID/play",from:V.fullPath,search:{title:e.title,thumb:e.thumb,pid:m.pid,m3u8Url:m.m3u8_url}})}catch(o){console.error(o),alert("an error occurred while playing the movie")}};return[" ",(()=>{var o=Ge(),n=o.firstChild,m=n.nextSibling,_=m.firstChild,O=_.firstChild,F=O.firstChild,A=F.firstChild,N=O.nextSibling,w=N.firstChild,k=w.nextSibling,E=k.firstChild,T=E.firstChild,C=E.nextSibling,S=C.firstChild,L=k.nextSibling,B=L.nextSibling,G=B.nextSibling,I=G.firstChild,ie=I.firstChild,U=I.nextSibling,re=U.firstChild,H=U.nextSibling,se=H.firstChild,Y=G.nextSibling;return t(w,()=>e.title),t(N,(()=>{var b=p(()=>!!e.tag_line);return()=>b()&&(()=>{var g=Ke();return t(g,()=>e.tag_line),g})()})(),k),t(E,u(ce,{class:"w-4 h-4","aria-hidden":"true"}),T),t(T,()=>xe(e.release_date)),t(C,u(ge,{class:"w-4 h-4","aria-hidden":"true"}),S),t(S,()=>$e(e.run_time)),t(k,(()=>{var b=p(()=>!!e.content_rating);return()=>b()&&(()=>{var g=We();return t(g,()=>e.content_rating),g})()})(),null),t(k,u(Ae,{get genres(){return e.genres}}),null),t(L,(()=>{var b=p(()=>e.audience_rating>0);return()=>b()&&(()=>{var g=qe(),f=g.firstChild,D=f.firstChild;return t(g,u(ve,{class:"w-5 h-5 text-yellow-300","aria-hidden":"true"}),f),t(D,()=>e.audience_rating.toFixed(1)),g})()})(),null),t(L,(()=>{var b=p(()=>e.critic_rating>0);return()=>b()&&(()=>{var g=Qe(),f=g.firstChild,D=f.firstChild;return t(g,u(be,{class:"w-5 h-5 text-yellow-300","aria-hidden":"true"}),f),t(D,()=>e.critic_rating.toFixed(1)),g})()})(),null),t(B,()=>e.summary),I.$$click=x,t(I,u(me,{class:"w-5 h-5","aria-hidden":"true"}),ie),t(U,u(fe,{class:"w-5 h-5","aria-hidden":"true"}),re),t(H,u(he,{class:"w-5 h-5","aria-hidden":"true"}),se),t(Y,(()=>{var b=p(()=>e.budget>0);return()=>b()&&(()=>{var g=Ze(),f=g.firstChild,D=f.firstChild,z=f.nextSibling;return t(f,u(q,{class:"w-4 h-4","aria-hidden":"true"}),D),t(z,()=>Q(e.budget)),g})()})(),null),t(Y,(()=>{var b=p(()=>e.revenue>0);return()=>b()&&(()=>{var g=et(),f=g.firstChild,D=f.firstChild,z=f.nextSibling;return t(f,u(q,{class:"w-4 h-4","aria-hidden":"true"}),D),t(z,()=>Q(e.revenue)),g})()})(),null),t(Y,u(Ye,{get studios(){return e.studios}}),null),P(b=>{var g=`url(${R(e.art)})`,f=R(e.thumb),D=`${e.title} Poster`;return g!==b.e&&((b.e=g)!=null?n.style.setProperty("background-image",g):n.style.removeProperty("background-image")),f!==b.t&&y(A,"src",b.t=f),D!==b.a&&y(A,"alt",b.a=D),b},{e:void 0,t:void 0,a:void 0}),o})(),(()=>{var o=He();return o.firstChild,t(o,(()=>{var n=p(()=>e.cast.length>0);return()=>n()&&u(ke,{get cast(){return e.cast}})})(),null),t(o,(()=>{var n=p(()=>e.crew.length>0);return()=>n()&&u(je,{get crew(){return e.crew}})})(),null),o})(),u(Je,{get extras(){return e.extras},onSelectVideo:o=>d(o)}),u(Me,{get isOpen(){return!!s()},onClose:()=>d(null),get videoUrl(){return s()}}),u(Be,{get isOpen(){return v()},onClose:()=>h(!1),get audioOpts(){return i()},get subtitleOpts(){return a()}})]};M(["click"]);export{it as component};
