import{c as _l,a as t,b as $l,d as Sl,e as Dl,t as I,i as d,f as n,S as Re,F as Tl,g as o,h as kl}from"./index-D7FrmHMA.js";import{E as Cl}from"./ErrorWarning-BYm8u8iS.js";var Il=I("<div class=mb-4>"),Al=I('<div class="mb-4 p-4 bg-green-500/10 border border-green-500/20 rounded-lg"><p class=text-green-400>Settings updated successfully!'),El=I('<article class="bg-blue-950/50 backdrop-blur-sm rounded-2xl p-6 shadow-lg shadow-blue-900/20"><form class=space-y-8><section class=space-y-4><header><h2 class="text-xl font-semibold text-yellow-300">Media Directories</h2></header><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class=space-y-2><label for=moviesDir class="block text-sm font-medium text-blue-100">Movies Directory</label><input type=text id=moviesDir class="w-full px-3 py-2 bg-blue-900/50 border border-blue-700 rounded-lg text-blue-100 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300/50 focus:border-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed"placeholder=/path/to/movies></div><div class=space-y-2><label for=tvShowsDir class="block text-sm font-medium text-blue-100">TV Shows Directory</label><input type=text id=tvShowsDir class="w-full px-3 py-2 bg-blue-900/50 border border-blue-700 rounded-lg text-blue-100 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300/50 focus:border-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed"placeholder=/path/to/tvshows></div><div class=space-y-2><label for=musicDir class="block text-sm font-medium text-blue-100">Music Directory</label><input type=text id=musicDir class="w-full px-3 py-2 bg-blue-900/50 border border-blue-700 rounded-lg text-blue-100 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300/50 focus:border-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed"placeholder=/path/to/music></div><div class=space-y-2><label for=staticDir class="block text-sm font-medium text-blue-100">Static Directory</label><input type=text id=staticDir class="w-full px-3 py-2 bg-blue-900/50 border border-blue-700 rounded-lg text-blue-100 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300/50 focus:border-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed"placeholder=/path/to/static></div></div></section><section class=space-y-4><header><h2 class="text-xl font-semibold text-yellow-300">Image Directories</h2></header><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class=space-y-2><label for=moviesImgDir class="block text-sm font-medium text-blue-100">Movies Images</label><input type=text id=moviesImgDir class="w-full px-3 py-2 bg-blue-900/50 border border-blue-700 rounded-lg text-blue-100 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300/50 focus:border-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed"placeholder=/path/to/movies/images></div><div class=space-y-2><label for=studiosImgDir class="block text-sm font-medium text-blue-100">Studios Images</label><input type=text id=studiosImgDir class="w-full px-3 py-2 bg-blue-900/50 border border-blue-700 rounded-lg text-blue-100 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300/50 focus:border-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed"placeholder=/path/to/studios/images></div><div class=space-y-2><label for=artistsImgDir class="block text-sm font-medium text-blue-100">Artists Images</label><input type=text id=artistsImgDir class="w-full px-3 py-2 bg-blue-900/50 border border-blue-700 rounded-lg text-blue-100 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300/50 focus:border-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed"placeholder=/path/to/artists/images></div><div class=space-y-2><label for=avatarImgDir class="block text-sm font-medium text-blue-100">Avatar Images</label><input type=text id=avatarImgDir class="w-full px-3 py-2 bg-blue-900/50 border border-blue-700 rounded-lg text-blue-100 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300/50 focus:border-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed"placeholder=/path/to/avatars></div></div></section><section class=space-y-4><header><h2 class="text-xl font-semibold text-yellow-300">Transcoding Settings</h2></header><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class=space-y-2><label for=ffmpegPath class="block text-sm font-medium text-blue-100">FFmpeg Path</label><input type=text id=ffmpegPath class="w-full px-3 py-2 bg-blue-900/50 border border-blue-700 rounded-lg text-blue-100 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300/50 focus:border-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed"placeholder=/usr/bin/ffmpeg></div><div class=space-y-2><label for=ffprobePath class="block text-sm font-medium text-blue-100">FFprobe Path</label><input type=text id=ffprobePath class="w-full px-3 py-2 bg-blue-900/50 border border-blue-700 rounded-lg text-blue-100 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300/50 focus:border-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed"placeholder=/usr/bin/ffprobe></div><div class=space-y-2><label for=transcodeDir class="block text-sm font-medium text-blue-100">Transcode Directory</label><input type=text id=transcodeDir class="w-full px-3 py-2 bg-blue-900/50 border border-blue-700 rounded-lg text-blue-100 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300/50 focus:border-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed"placeholder=/path/to/transcode></div><div class=space-y-2><label for=hardwareAcceleration class="block text-sm font-medium text-blue-100">Hardware Acceleration</label><select id=hardwareAcceleration class="w-full px-3 py-2 bg-blue-900/50 border border-blue-700 rounded-lg text-blue-100 focus:outline-none focus:ring-2 focus:ring-yellow-300/50 focus:border-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed"><option value>None</option><option value=h264_nvenc>NVIDIA NVENC (H.264)</option><option value=h264_qsv>Intel QuickSync (H.264)</option><option value=h264_amf>AMD AMF (H.264)</option></select></div></div><div class="flex items-center space-x-2"><input type=checkbox id=enableTranscoding class="w-4 h-4 text-yellow-300 bg-blue-900/50 border-blue-700 rounded focus:ring-yellow-300/50 disabled:opacity-50 disabled:cursor-not-allowed"><label for=enableTranscoding class="text-sm font-medium text-blue-100">Enable Transcoding</label></div></section><section class=space-y-4><header><h2 class="text-xl font-semibold text-yellow-300">API Settings</h2></header><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class=space-y-2><label for=tmdbApiKey class="block text-sm font-medium text-blue-100">TMDB API Key</label><input type=password id=tmdbApiKey class="w-full px-3 py-2 bg-blue-900/50 border border-blue-700 rounded-lg text-blue-100 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300/50 focus:border-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed"placeholder="Enter your TMDB API key"></div><div class=space-y-2><label for=jellyfinToken class="block text-sm font-medium text-blue-100">Jellyfin Token</label><input type=password id=jellyfinToken class="w-full px-3 py-2 bg-blue-900/50 border border-blue-700 rounded-lg text-blue-100 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-yellow-300/50 focus:border-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed"placeholder="Enter your Jellyfin token"></div></div></section><section class=space-y-4><header><h2 class="text-xl font-semibold text-yellow-300">Image Settings</h2></header><div class="flex items-center space-x-2"><input type=checkbox id=downloadImages class="w-4 h-4 text-yellow-300 bg-blue-900/50 border-blue-700 rounded focus:ring-yellow-300/50 disabled:opacity-50 disabled:cursor-not-allowed"><label for=downloadImages class="text-sm font-medium text-blue-100">Download Images Automatically</label></div></section><footer class="flex justify-end"><button type=submit class="inline-flex items-center px-4 py-2 bg-yellow-300 text-blue-900 font-medium rounded-lg hover:bg-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-300/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">');const Pl=_l("/_auth/_admin/settings")({component:Fl});function Fl(){const Ve=Pl.useRouteContext(),{queryClient:Qe}=Ve(),[A,E]=t(""),[P,F]=t(""),[M,j]=t(""),[K,q]=t(""),[H,L]=t(""),[N,J]=t(""),[R,V]=t(""),[Q,B]=t(""),[z,O]=t(!1),[W,G]=t(""),[U,X]=t(""),[Y,Z]=t(""),[ee,le]=t(!1),[te,ie]=t(""),[se,oe]=t(""),[re,ae]=t(""),[Be,de]=t(!1),[ne,c]=t(""),a=$l(()=>({queryKey:["settings"],queryFn:async()=>{try{const l=await fetch("/api/v1/settings",{credentials:"include"}),s=await l.json();if(!l.ok)throw new Error(`${l.status} - ${s.error?s.error:l.statusText}`);return s}catch(l){throw console.error(l),new Error("Failed to fetch settings")}}})),u=Sl(()=>({mutationFn:async l=>{try{const s=await fetch("/api/v1/settings",{method:"put",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(l)}),r=await s.json();if(!s.ok)throw new Error(`${s.status} - ${r.error?r.error:s.statusText}`);return r}catch(s){throw console.error(s),new Error("a network error occurred while updating settings")}},onSuccess:()=>{de(!0),setTimeout(()=>de(!1),3e3),Qe.invalidateQueries({queryKey:["settings"]})},onError:l=>{c(l.message),setTimeout(()=>c(""),5e3),a.refetch()}})),ze=async l=>{l.preventDefault(),c("");const s={movies_dir_list:A(),tvshows_dir_list:P(),music_dir_list:M(),movies_img_dir:K(),studios_img_dir:H(),artists_img_dir:N(),avatar_img_dir:R(),static_dir:Q(),download_images:z(),ffmpeg_path:W(),ffprobe_path:U(),transcode_dir:Y(),enable_transcoding:ee(),hardware_acceleration:te(),tmdb_api_key:se(),jellyfin_token:re()};u.mutate(s)};Dl(()=>{if(a.isSuccess){const{settings:l}=a.data;E(l.movies_dir_list),F(l.tvshows_dir_list),j(l.music_dir_list),q(l.movies_img_dir),L(l.studios_img_dir),J(l.artists_img_dir),V(l.avatar_img_dir),B(l.static_dir),O(l.download_images),G(l.ffmpeg_path),X(l.ffprobe_path),Z(l.transcode_dir),le(l.enable_transcoding),ie(l.hardware_acceleration),oe(l.tmdb_api_key),ae(l.jellyfin_token)}});const i=()=>a.isLoading||u.isPending;return(()=>{var l=El(),s=l.firstChild,r=s.firstChild,Oe=r.firstChild,We=Oe.nextSibling,ce=We.firstChild,Ge=ce.firstChild,b=Ge.nextSibling,ue=ce.nextSibling,Ue=ue.firstChild,g=Ue.nextSibling,be=ue.nextSibling,Xe=be.firstChild,f=Xe.nextSibling,Ye=be.nextSibling,Ze=Ye.firstChild,p=Ze.nextSibling,ge=r.nextSibling,el=ge.firstChild,ll=el.nextSibling,fe=ll.firstChild,tl=fe.firstChild,m=tl.nextSibling,pe=fe.nextSibling,il=pe.firstChild,v=il.nextSibling,me=pe.nextSibling,sl=me.firstChild,y=sl.nextSibling,ol=me.nextSibling,rl=ol.firstChild,h=rl.nextSibling,ve=ge.nextSibling,al=ve.firstChild,ye=al.nextSibling,he=ye.firstChild,dl=he.firstChild,x=dl.nextSibling,xe=he.nextSibling,nl=xe.firstChild,w=nl.nextSibling,we=xe.nextSibling,cl=we.firstChild,_=cl.nextSibling,ul=we.nextSibling,bl=ul.firstChild,$=bl.nextSibling,gl=ye.nextSibling,S=gl.firstChild,_e=ve.nextSibling,fl=_e.firstChild,pl=fl.nextSibling,$e=pl.firstChild,ml=$e.firstChild,D=ml.nextSibling,vl=$e.nextSibling,yl=vl.firstChild,T=yl.nextSibling,Se=_e.nextSibling,hl=Se.firstChild,xl=hl.nextSibling,k=xl.firstChild,wl=Se.nextSibling,C=wl.firstChild;return d(l,n(Re,{get when(){return ne()},get children(){var e=Il();return d(e,n(Cl,{get error(){return ne()},isVisible:!0})),e}}),s),d(l,n(Re,{get when(){return Be()},get children(){return Al()}}),s),s.addEventListener("submit",ze),b.$$input=e=>E(e.currentTarget.value),g.$$input=e=>F(e.currentTarget.value),f.$$input=e=>j(e.currentTarget.value),p.$$input=e=>B(e.currentTarget.value),m.$$input=e=>q(e.currentTarget.value),v.$$input=e=>L(e.currentTarget.value),y.$$input=e=>J(e.currentTarget.value),h.$$input=e=>V(e.currentTarget.value),x.$$input=e=>G(e.currentTarget.value),w.$$input=e=>X(e.currentTarget.value),_.$$input=e=>Z(e.currentTarget.value),$.$$input=e=>ie(e.currentTarget.value),S.$$input=e=>le(e.currentTarget.checked),D.$$input=e=>oe(e.currentTarget.value),T.$$input=e=>ae(e.currentTarget.value),k.$$input=e=>O(e.currentTarget.checked),d(C,n(Tl,{class:"w-5 h-5 mr-2"}),null),d(C,()=>a.isLoading?"Loading...":u.isPending?"Saving...":"Save Settings",null),o(e=>{var De=i(),Te=i(),ke=i(),Ce=i(),Ie=i(),Ae=i(),Ee=i(),Pe=i(),Fe=i(),Me=i(),je=i(),Ke=i(),qe=i(),He=i(),Le=i(),Ne=i(),Je=i();return De!==e.e&&(b.disabled=e.e=De),Te!==e.t&&(g.disabled=e.t=Te),ke!==e.a&&(f.disabled=e.a=ke),Ce!==e.o&&(p.disabled=e.o=Ce),Ie!==e.i&&(m.disabled=e.i=Ie),Ae!==e.n&&(v.disabled=e.n=Ae),Ee!==e.s&&(y.disabled=e.s=Ee),Pe!==e.h&&(h.disabled=e.h=Pe),Fe!==e.r&&(x.disabled=e.r=Fe),Me!==e.d&&(w.disabled=e.d=Me),je!==e.l&&(_.disabled=e.l=je),Ke!==e.u&&($.disabled=e.u=Ke),qe!==e.c&&(S.disabled=e.c=qe),He!==e.w&&(D.disabled=e.w=He),Le!==e.m&&(T.disabled=e.m=Le),Ne!==e.f&&(k.disabled=e.f=Ne),Je!==e.y&&(C.disabled=e.y=Je),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0}),o(()=>b.value=A()),o(()=>g.value=P()),o(()=>f.value=M()),o(()=>p.value=Q()),o(()=>m.value=K()),o(()=>v.value=H()),o(()=>y.value=N()),o(()=>h.value=R()),o(()=>x.value=W()),o(()=>w.value=U()),o(()=>_.value=Y()),o(()=>$.value=te()),o(()=>S.checked=ee()),o(()=>D.value=se()),o(()=>T.value=re()),o(()=>k.checked=z()),l})()}kl(["input"]);export{Pl as Route};
